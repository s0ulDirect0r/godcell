{"id":"godcell-08p","content_hash":"7901c9a416d339f7cb4cf2b5b187db84de3119e857e150b9a0fe9f5e16a51e89","title":"ECS: Migrate swarms to full ECS","description":"Migrate swarms Map to use ECS as source of truth.\n\nSwarmComponent already exists. Need to:\n1. Create swarms as ECS entities with SwarmComponent\n2. Replace getSwarms() Map queries with ECS queries\n3. Update swarm AI, movement, collision to use ECS\n4. Update respawn logic\n\nThis is the largest entity collection refactor.\n\nFiles to change:\n- server/src/swarms.ts - main swarm logic, AI, movement\n- server/src/index.ts - swarm updates, buildGameContext\n- server/src/bots.ts - bot swarm avoidance\n- server/src/ecs/factories.ts - createSwarm already exists\n- server/src/ecs/systems/GameContext.ts - remove getSwarms","status":"closed","priority":1,"issue_type":"task","assignee":"claude","created_at":"2025-11-29T16:27:38.702495-05:00","updated_at":"2025-11-29T18:23:04.369656-05:00","closed_at":"2025-11-29T18:23:04.369656-05:00","source_repo":".","labels":["ecs-migration","large","phase-5"]}
{"id":"godcell-08q","content_hash":"76298801f6f6a0b76eb43f5dde9994534153e1f895d93cd9867d8bc7d08688e6","title":"Set up Vitest for client workspace","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:21:34.002882-05:00","updated_at":"2025-11-19T21:24:29.985062-05:00","closed_at":"2025-11-19T21:24:29.985062-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-08q","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:21:34.004753-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-0em","content_hash":"561f167e0af95d2d5f264a9d0973aa6198d3248ab228d0df620dce49591b4f11","title":"Create core/ui-model modules (HUDViewModel, MinimapViewModel)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:22:02.929036-05:00","updated_at":"2025-11-19T21:31:53.994249-05:00","closed_at":"2025-11-19T21:31:53.994249-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-0em","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:22:02.930597-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-0jo","content_hash":"55df745c54189256f61b45c27841305d8b0a349df83a4b203c579a4a6390dea0","title":"Clean up and verify full migration complete","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:23:23.670031-05:00","updated_at":"2025-11-19T21:39:47.781756-05:00","closed_at":"2025-11-19T21:39:47.781756-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-0jo","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:23:23.671439-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-0tw","content_hash":"d160772e218b6efe651cd6b3ee6303ae419664f8837f3d09be8973bfd626d247","title":"Rework cell trails to have \"comet\" aesthetic instead of sperm-like","description":"Current trail lines behind single-cells look like sperm tails. Want more of a \"comet\" flavor - glowing, tapering trail with particle dispersion.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-21T09:29:33.027772-05:00","updated_at":"2025-11-21T09:58:50.932917-05:00","closed_at":"2025-11-21T09:58:50.932917-05:00","source_repo":"."}
{"id":"godcell-0wo","content_hash":"57be25847acf3ccd99dcd1dc4188a0a1ccf32d037ad5c1a7152f8023a7479839","title":"Create core/config modules (gameConfig, clientConfig)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:22:08.725958-05:00","updated_at":"2025-11-19T21:26:21.154487-05:00","closed_at":"2025-11-19T21:26:21.154487-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-0wo","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:22:08.727956-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-13q","content_hash":"a7bc584e90f62bb0b83acb29a67a5db3a817860710f88196f1a080d169ee4cd6","title":"Gradual sprite transformation as players approach evolution threshold","description":"Visual progression system: Player sprite gradually transforms as they approach evolution threshold, building anticipation for metamorphosis.\n\n**Current State:**\n- Player is a static circle until evolution threshold is hit\n- Then instant molting animation (2.5 sec invulnerability)\n- No visual buildup to evolution\n\n**Desired:**\n- **Gradual transformation**: Sprite changes incrementally as capacity increases toward threshold\n- **Progressive stages**: Maybe 3-4 visual substages showing cell growth/complexity\n- **Anticipation building**: Players can see themselves getting closer to evolution visually\n- **Final metamorphosis**: Molting animation transitions from \"almost there\" to new form\n\n**Example Progression (Single-Cell → Multi-Cell):**\n- 0-50 energy capacity: Small single cell (base sprite)\n- 50-125 energy: Cell slightly larger, membrane thickening\n- 125-200 energy: Beginning cell division visible (nucleus splitting?)\n- 200-250 energy: Two cells almost separated, ready to split\n- 250+ energy (with 80% fuel): MOLTING - final transformation to multi-cell stage\n\n**Implementation Considerations:**\n- Could use sprite sheets with transition frames\n- Or programmatic scaling/effects (glow, size, particle density)\n- Should work for all evolution stage transitions (not just stage 1→2)\n- Smooth interpolation between substages\n- Visual feedback that progress is being made\n\n**Benefits:**\n- Players can see their progress toward evolution without checking UI\n- Creates visual hierarchy in the world (who's close to evolving?)\n- Makes evolution feel more organic and earned\n- Builds anticipation and excitement for transformation moment","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-18T17:27:14.746238-05:00","updated_at":"2025-11-22T18:03:51.333658-05:00","closed_at":"2025-11-22T18:03:51.333658-05:00","source_repo":"."}
{"id":"godcell-1c2","content_hash":"403163c8b46abcc22fa40139d288498ccd2997decd24ee956fe9270b28df76da","title":"Macro-scale resource system","description":"Stage 1-2 nutrients are microscopic and irrelevant at Stage 3 scale. What do cyber-organisms eat? Data chunks? Energy nodes? Hunting other Stage 3 organisms? Define the resource loop for jungle gameplay.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-25T00:26:41.949806-05:00","updated_at":"2025-11-25T00:26:41.949806-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-1c2","depends_on_id":"godcell-r85","type":"parent-child","created_at":"2025-11-25T00:27:57.751573-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-1os","content_hash":"142581757593954c6719cc52cd977633e71bbc741ed2673ad3317784035abd8a","title":"Investigate effectiveness of movement friction config","description":"The MOVEMENT_FRICTION config value exists but it's unclear how effective it actually is at affecting gameplay feel.\n\n**Questions to answer:**\n- What is the current friction value and how does it affect movement?\n- Does changing it produce noticeable differences in gameplay feel?\n- Is the friction being applied correctly in the physics loop?\n- What range of values produces good gameplay (too slippery vs too sticky)?\n\n**Investigation steps:**\n1. Find where MOVEMENT_FRICTION is used in the codebase\n2. Test different values in playground mode\n3. Determine if friction is working as intended or needs tuning/fixing\n\n**Files to check:**\n- server/src/index.ts - physics/movement loop\n- shared/index.ts - GAME_CONFIG definition","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T00:11:03.94305-05:00","updated_at":"2025-11-25T00:11:03.94305-05:00","source_repo":"."}
{"id":"godcell-1vj","content_hash":"bb411ecf3912c21f8d6ee950b1412adb469d576119ccf2d95613fbebe387c01d","title":"Update CLAUDE.md to reflect current game state after Three.js migration","description":"CLAUDE.md \"What's Built\" section is outdated (says \"5 AI bot players\" but code has 15). After Three.js migration completes, audit and update CLAUDE.md to accurately reflect:\n- Current bot count (15)\n- Rendering technology (Three.js instead of Phaser)\n- Any other architectural changes from the migration\n- Remove outdated implementation details","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-20T10:49:22.3381-05:00","updated_at":"2025-11-20T18:03:50.779803-05:00","closed_at":"2025-11-20T18:03:50.779803-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-1vj","depends_on_id":"godcell-dj6","type":"discovered-from","created_at":"2025-11-20T10:49:22.339682-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-1xg","content_hash":"adf8f17f93a1185006d9c6e839b561ad17d2903054f7031f4423f921e678984c","title":"Prevent spawning inside gravity wells","description":"Players can currently spawn inside or very close to gravity distortion zones, leading to immediate death or unfair disadvantage on respawn.\n\n**Current Problem:**\n- Random spawn locations don't check for obstacle proximity\n- Players can spawn inside event horizon (600px) or even singularity core (60px)\n- Instant death or forced immediate escape = bad player experience\n\n**Solution:**\nImplement spawn point validation:\n- Check distance from all obstacles before placing player\n- Minimum safe distance: Outside event horizon + buffer (e.g., 700-800px from obstacle center)\n- If spawn point invalid, generate new random coordinates and retry\n- Max retry attempts (e.g., 10 tries) before expanding search radius or fallback\n\n**Implementation:**\n- Add `isSpawnSafe(x, y)` function that checks all obstacles\n- Call during player spawn/respawn\n- Ensure bots also use safe spawn logic\n\n**Edge Cases:**\n- What if entire map is covered in obstacles? (shouldn't happen with current 12 obstacles, but safeguard)\n- Spawn near map edges vs spawn near obstacles - which is worse?","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-18T17:21:56.898745-05:00","updated_at":"2025-11-18T20:13:15.800184-05:00","closed_at":"2025-11-18T20:13:15.800184-05:00","source_repo":"."}
{"id":"godcell-20o","content_hash":"f9d3f6c76379e63e7841cc7a9ef30064133e45f5d07000f5a67c262a227a6e8c","title":"Refactor to energy-only resource system","description":"Replace dual-resource system (health + energy) with unified energy-only system. All entities use energy as sole life resource. All threats drain energy directly. Death at 0 energy is instant.\n\n**Rationale:** Information entities (not biological organisms) - energy represents information coherence. All threats destabilize coherence.\n\n**Key Changes:**\n- Remove health fields from Player and related types\n- Combine health + energy pools into single energy pool per stage\n- Add damage resistance for higher evolution stages (structural stability)\n- Convert swarms to energy entities\n- Update EMP to drain energy from single-cells\n- Remove health UI, enhance energy-based visual feedback\n\n**Detailed Specification:** See ENERGY_ONLY_SPEC.md\n\n**Impact:**\n- Thematic coherence (energy = information)\n- Simplified mental model (one resource)\n- Higher stakes PvP (every hit matters)\n- Evolution more meaningful (pools + resistance + efficiency)","design":"See ENERGY_ONLY_SPEC.md for complete technical specification including:\n- Type changes (Player, EntropySwarm, messages)\n- Config updates (energy pools, damage resistance, EMP values)\n- Server implementation (metabolism, damage, death checks, EMP, swarms)\n- Client implementation (visual feedback, UI updates)\n- Testing plan\n- Migration path","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-22T23:21:28.429033-05:00","updated_at":"2025-11-24T16:38:41.572709-05:00","closed_at":"2025-11-24T16:38:41.572709-05:00","source_repo":"."}
{"id":"godcell-246","content_hash":"a22a648275d2ce742149f5f1746b62aae737e1ed23b0a4641a4223b028c90f5e","title":"Multi-cell bot AI: EMP usage and pseudopod attacks","description":"Multi-cell bots currently don't use their Stage 2 abilities, making them ineffective predators in the ecosystem.\n\n**Missing behaviors:**\n1. **EMP usage** - Multi-cells can disable swarms with EMP, then consume them for energy. Bots should:\n   - Detect nearby swarms\n   - Fire EMP when swarm is in range\n   - Chase and consume disabled swarms\n\n2. **Pseudopod attacks** - Multi-cells can fire pseudopod beams at other multi-cells. Bots should:\n   - Target enemy multi-cells in range\n   - Fire pseudopod beams to drain/kill them\n   - Use this for territorial control\n\n**Current state:**\n- `updateMultiCellBotAI()` in `bots.ts` only handles movement/avoidance\n- Multi-cells hunt single-cells via contact drain (working)\n- No EMP firing logic\n- No pseudopod firing logic\n\n**Impact:**\nWithout these abilities, multi-cell bots are just larger single-cells that die to swarms. This breaks the food chain - Stage 2 should be apex predators that control swarm populations.\n\n**Files:**\n- `server/src/bots.ts` - `updateMultiCellBotAI()` needs EMP and pseudopod logic\n- May need to expose EMP/pseudopod firing to bot system (currently player-input driven)","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-25T15:21:43.949552-05:00","updated_at":"2025-11-28T13:59:25.027734-05:00","closed_at":"2025-11-28T13:59:25.027734-05:00","source_repo":".","labels":["ai","ecology","gameplay"]}
{"id":"godcell-2db","content_hash":"450f190eb9a5e586d2657595dbc308e0d1f2d7eb419e89343185f0971afa3fb6","title":"Create render/three/camera modules (Camera2D, CameraController)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:22:31.876276-05:00","updated_at":"2025-11-19T21:39:07.559437-05:00","closed_at":"2025-11-19T21:39:07.559437-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-2db","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:22:31.879622-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-2l5","content_hash":"adae33d835da28fd6bfd278b2b5f821a253576543cb58f81535d6dbaff0cd4ed","title":"Fix nutrient attraction to obstacles","description":"Nutrient attraction to obstacles doesn't visibly work - nutrients should be drawn toward black holes but currently appear static.\n\n**Current Implementation:**\n- `attractNutrientsToObstacles()` applies inverse-square gravity to nutrients\n- Broadcasts `nutrientMoved` messages\n- Client listens for `nutrientMoved` and updates sprite positions\n\n**Issue:**\nNutrients don't appear to move toward obstacles - either:\n1. Forces are too weak (need stronger attraction constant)\n2. Network messages not being received properly\n3. Visual update not working on client side\n\n**Investigation:**\n- Check if `nutrientMoved` messages are being emitted (add debug logs)\n- Verify client is receiving and handling messages\n- Test if `OBSTACLE_NUTRIENT_ATTRACTION_SPEED: 50` is too slow\n- Check if nutrients are actually moving server-side (log positions)\n\n**Expected Behavior:**\n- Nutrients within obstacle radius slowly drift toward center\n- Visual \"feeding\" effect as obstacles consume nearby nutrients\n- Creates dynamic risk/reward (grab nutrient before it gets pulled in)","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-18T11:45:57.05163-05:00","updated_at":"2025-11-19T11:19:54.660876-05:00","closed_at":"2025-11-19T11:19:54.660876-05:00","source_repo":"."}
{"id":"godcell-2vq","content_hash":"d441bc2d5a37daaa0afc2788e67173fbcb1d286de06a2890d0ff2cb14acaf2d0","title":"Fix obstacle rings rendering through swarm spheres","description":"Obstacle rings (cyan outer, cyan middle) are visible through swarm spheres when they overlap, breaking spatial depth perception.\n\n## Problem\nBoth swarms and obstacle rings use `depthTest: false` to avoid other rendering issues, which means neither participates in depth sorting. Result: rings appear to pass through swarms instead of being occluded.\n\n## Root Cause\nTransparent object depth testing conflict:\n- If swarm has `depthWrite: true` → Fixes ring occlusion BUT breaks rendering with grid/other transparent objects\n- If swarm has `depthWrite: false` → Standard transparent behavior BUT can't occlude rings behind it\n\n## Potential Solutions to Explore\n1. Use explicit `renderOrder` values (draw order independent of depth)\n2. Split rendering into multiple passes (opaque, transparent-occluders, transparent-regular)\n3. Use custom shader with depth masking\n4. Redesign visual approach (make rings always visible by design, or swarms opaque)\n5. Z-position adjustments with careful depth testing config\n\n## Testing Data\n- Making swarm sphere fully opaque confirmed rings still visible → depth testing fundamentally disabled\n- Enabling `depthWrite: true` on swarms causes them to render under grid\n\n## Files\n- `client/src/render/three/ThreeRenderer.ts` (swarm materials ~line 573, obstacle ring materials ~line 409)","status":"open","priority":3,"issue_type":"bug","created_at":"2025-11-21T15:27:45.027551-05:00","updated_at":"2025-11-21T15:27:45.027551-05:00","source_repo":"."}
{"id":"godcell-2x3","content_hash":"09eb6f957c958508736c5bf7f08a1f8a7bb24a2b971a011b78a0b8f0235dba31","title":"Implement health and death system","description":"Add health tracking and death mechanics with PERMANENT LOSS.\n\n- Health bar UI for local player\n- Visual health indicators for other players (size/color/glow?)\n- Death triggers respawn as single-cell at random location\n- Reset all progress on death (permanent loss)\n- Death visual effect (dissolve/explode into particles?)\n- Respawn location logic (avoid spawning in hazards)\n\nRequired before implementing combat or enemies.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-17T16:19:11.079343-05:00","updated_at":"2025-11-17T19:05:02.821738-05:00","closed_at":"2025-11-17T19:01:35.626885-05:00","source_repo":"."}
{"id":"godcell-3au","content_hash":"db1b119ec650dfebcff1d7d9279ba1656f947f468b74ae0ff357815522449541","title":"Enhance client energy visual feedback","description":"Update client rendering for energy-only system:\n- Update GameState to remove health tracking\n- Enhance sprite visuals based on energy percentage (glow intensity, opacity, color shifts when low)\n- Add particle drain effects (swarm contact, gravity pull, EMP hit)\n- Verify HUD countdown still works (already energy-based)\n- Update death overlay if it references health\n\nSee history/ENERGY_ONLY_SPEC.md section: \"Client Changes\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-22T23:23:06.883084-05:00","updated_at":"2025-11-24T16:38:48.364316-05:00","closed_at":"2025-11-24T16:38:48.364316-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-3au","depends_on_id":"godcell-20o","type":"blocks","created_at":"2025-11-22T23:23:06.884566-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-3e1","content_hash":"71e3683eafe6c9f651839800ea39394be95609905ee3ec953374048cfeb6d7fa","title":"Dev tool: admin god mode view of entire map","description":"Add an admin/spectator mode that shows the entire game world at once instead of just viewport. Allows developers to observe spawn distribution, entity behavior, and game balance from a bird's eye view. Could be a separate URL or toggle-able mode.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-11-21T23:57:31.949087-05:00","updated_at":"2025-11-21T23:57:31.949087-05:00","source_repo":"."}
{"id":"godcell-3y4","content_hash":"8284f903e8fc80c329d1045e540ee9833c9b9185e73b16f3464cf24b68925fca","title":"Implement black hole hazards","description":"Create major environmental hazards - black holes with gravity wells.\n\nVisual: Dark void with particle accretion disk\nMechanics:\n- 2-3 black holes in world for testing\n- Gravity field pulls players toward center\n- Pull strength increases closer to center\n- Instant death at center point\n- Escape possible with effort at outer edges\n- High risk/reward: place nutrients near black holes?\n\nRequires health/death system.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-11-17T16:19:39.87229-05:00","updated_at":"2025-11-19T10:39:19.185998-05:00","closed_at":"2025-11-19T10:39:19.185998-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-3y4","depends_on_id":"godcell-2x3","type":"blocks","created_at":"2025-11-17T16:20:44.313953-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-3zkl","content_hash":"d6a2b225b4256cfd45d10cb093f65ac5e9c4967b0284e3f74fefe5c150686e95","title":"Stage 5: Godcell \u0026 Transcendence","description":"Transcendence to alien-angel form. Full 3D flight, maximal agency, final challenge.\n\n**Core changes from Stage 4:**\n- Perspective shift: first-person grounded → third-person 3D flight\n- Form: humanoid → godcell (procedural alien-angel, EVA-inspired)\n- Liberation from ground, full 3D movement\n- New perception layer visible\n- Final obstacle: Rite of Passage (defend the world against Entropy)\n\n**Key features:**\n- Third-person camera with full 3D flight\n- Procedurally generated transcendent form (shaped by Stage 4 playstyle)\n- Maximal agency (can visit any scale, interact with lower stages)\n- Awareness expansion (see the Signal substrate)\n- Final battle against cosmic Entropy\n- Path to God-Mind collective\n\nSee GAME_DESIGN.md for full vision.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-11-29T21:07:08.510569-05:00","updated_at":"2025-11-29T21:07:08.510569-05:00","source_repo":".","labels":["core-loop","stage-5"]}
{"id":"godcell-43k","content_hash":"d9d59d52840594efdab6a309fae26f0551129814a44cbcfbef216e6bf5d392bd","title":"Improve pseudopod visual to extend as squiggly tendril from player sprite","description":"Current pseudopod implementation just drops a glowing circle that trails behind - not very interesting or readable.\n\n**Current Problem:**\n- Pseudopod is just a glowing line with a circle at the tip\n- Doesn't feel like an organic extension of the cell\n- Not visually compelling\n\n**Desired Visual:**\n- Proper squiggly/gooey arm or tendril that extends FROM the player sprite\n- Should look like the cell membrane is stretching out\n- Organic, flowing animation (ideally with some wobble/squiggle)\n- Clear connection point to the player cell body\n- Should feel biological despite the cyber aesthetic\n\n**Implementation Challenges:**\n- May be complex to animate a squiggly/organic shape\n- Need to maintain connection to moving player sprite\n- Should still extend smoothly toward target\n- Performance considerations (can't be too expensive)\n\n**Possible Approaches:**\n- Bezier curves with animated control points for wobble\n- Chain of connected circles with physics simulation\n- Pre-animated sprite sequence\n- Particle trail with perpendicular offset oscillation\n\n**Goal:**\nMake pseudopod hunting visually interesting and make it clear the tendril is coming FROM the player cell.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-19T15:12:18.721983-05:00","updated_at":"2025-11-24T19:01:25.254166-05:00","closed_at":"2025-11-24T19:01:25.254166-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-43k","depends_on_id":"godcell-6wj","type":"discovered-from","created_at":"2025-11-19T15:12:18.723589-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-47y","content_hash":"97a5722675c80dec2e607982acaef92044dafd806bf74132d112296dc130d87a","title":"ECS: Migrate swarm drain state (activeSwarmDrains, lastBroadcastedDrains)","description":"Migrate activeSwarmDrains and lastBroadcastedDrains to ECS.\n\nThese track swarm-player drain relationships for broadcast optimization.\n\nCurrent: Sets of player IDs\n- activeSwarmDrains: players currently being drained by swarms\n- lastBroadcastedDrains: for delta broadcasting\n\nOptions:\n1. Tag-based approach (add SwarmDrainedTag to player entities)\n2. Component on player entity with swarm reference\n\nFiles to change:\n- server/src/swarms.ts - main swarm logic\n- server/src/index.ts - buildGameContext\n- server/src/ecs/systems/GameContext.ts - remove from interface","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T16:27:14.074463-05:00","updated_at":"2025-11-29T18:31:24.08215-05:00","closed_at":"2025-11-29T18:31:24.08215-05:00","source_repo":".","labels":["ecs-migration","phase-5"]}
{"id":"godcell-4a6","content_hash":"14f34af5eeaa28e78881aef12567513c92e43211d86b27813c3d02910f8410e4","title":"Update bot health checks (server)","description":"Update bots in server/src/bots.ts:\n- Replace all `player.health` checks with `player.energy`\n- Update bot respawn to use new energy values\n- Update bot initialization with new energy pools\n\nSee history/ENERGY_ONLY_SPEC.md section: \"Update All Health Checks\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-22T23:23:01.131905-05:00","updated_at":"2025-11-24T16:38:54.707893-05:00","closed_at":"2025-11-24T16:38:54.707893-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-4a6","depends_on_id":"godcell-20o","type":"blocks","created_at":"2025-11-22T23:23:01.133156-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-4aw","content_hash":"c5f79791d993cfaeac36e6738e47aca5202f83322b93d4bdb138d73ceaaa9013","title":"Add sound effects and background music","description":"Game currently has no audio. Add sound effects and background music to enhance immersion and feedback.\n\n**Audio Direction:**\n- **Theme**: Ambient electronic, glitchy, cybernetic\n- **Mood**: Mysterious, tense, atmospheric\n- **Style**: Minimal UI sounds, organic-meets-digital sfx\n- **Inspiration**: Subnautica ambience, sci-fi data processing\n\n**Sound Effects Needed:**\n\n**Player Actions:**\n- Movement: Subtle whoosh/hum (continuous while moving)\n- Nutrient collection: Data absorption beep/chime (pitch varies by value)\n- Evolution: Transformation sound (3-4 seconds, building intensity)\n- Death: Dissolution/data scatter sound\n- Respawn: Materialization/boot-up sound\n\n**Environmental:**\n- Gravity distortion: Low rumble/hum when near (intensity scales with proximity)\n- Singularity core crush: Sudden compression/void sound\n- Ambient background: Flowing data streams, distant echoes\n\n**UI/Feedback:**\n- Low health warning: Subtle heartbeat or system alarm\n- Low energy warning: Power-down hum or alert\n\n**Background Music:**\n- Main gameplay: Ambient electronic loop (3-5 minutes)\n- Tension layer: Adds when near obstacles or low health\n- Death/respawn: Brief transition stinger\n- Evolution: Triumphant musical swell\n\n**Implementation:**\n- Use Phaser's audio system (`this.sound.add()`)\n- Load audio files in preload (MP3/OGG fallbacks)\n- Volume controls (master, sfx, music separate)\n- Spatial audio for directional effects (optional)\n- Audio settings persisted to localStorage\n- Mute option\n\n**Technical Considerations:**\n- Audio file sizes (compressed formats)\n- Browser autoplay policies (require user interaction)\n- Fallback for no audio support\n- Performance impact (audio decoding)\n- Mobile considerations (battery, data usage)\n\n**Asset Sourcing:**\n- Generate with AI tools (Suno, ElevenLabs, etc.)\n- Royalty-free libraries (Freesound, OpenGameArt)\n- Synthesize programmatically (Tone.js)\n- Keep copyright attribution in CREDITS.md","status":"open","priority":3,"issue_type":"feature","created_at":"2025-11-18T11:52:04.881611-05:00","updated_at":"2025-11-18T11:52:04.881611-05:00","source_repo":"."}
{"id":"godcell-4bp","content_hash":"b1f36c267e9538af7313bba9fea803aebf9545af204018ea2d43447b3eb62183","title":"Remove syncPlayersFromECS bridge - convert remaining players Map usages to ECS","description":"Phase 4d of ECS migration. The `syncPlayersFromECS()` function rebuilds the `players` Map from ECS each tick as a bridge for legacy code. To remove it, convert remaining usages:\n\n**abilities.ts (4 usages)**\n- Line 76, 161, 337, 353: `this.ctx.players.get(playerId)` → use `getPlayerBySocketId(world, playerId)`\n\n**dev.ts (4 remaining usages)**\n- Line 280, 313, 328: `devContext.players.get()` → use ECS getters\n- Line 465: `for...of devContext.players.entries()` → use `forEachPlayer(world, ...)`\n- Line 487: `devContext.players.get(nearestId)` → use ECS\n\n**index.ts (3 game logic usages)**\n- Lines 220, 242: `checkBeamHitscan` still iterates players Map → convert to `forEachPlayer`\n- Line 687: socket handler `players.get(socket.id)` → use ECS\n\n**index.ts (3 state sync usages - may need to keep)**\n- Lines 784, 820: `Array.from(players.values())` for client state sync\n- Line 726: `players.delete()` on disconnect\n\nAfter conversion, remove `syncPlayersFromECS()` and the `players` Map declaration.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T15:01:31.339699-05:00","updated_at":"2025-11-29T15:29:45.581496-05:00","closed_at":"2025-11-29T15:29:45.581496-05:00","source_repo":".","labels":["ecs-migration","tech-debt"]}
{"id":"godcell-4br","content_hash":"fe7a58fda30a091715062ddba61c9c2657a638ae1d57f70c46ddee98ad4d3f9f","title":"Adjust cell trail transparency and length","description":"Cell color trails need visual tweaks for better aesthetics.\n\n**Changes:**\n- **Transparency**: Make trails slightly more transparent (reduce alpha/opacity)\n- **Length**: Increase trail length by 30%\n\n**Current Implementation:**\nTrails are created in GameScene.ts using Phaser particle emitters with player colors.\n\n**Implementation:**\n- Find trail alpha/opacity setting and reduce it (make more transparent)\n- Find trail lifespan or emission settings and increase by ~30% for longer trails\n- Test with multiple colored cells moving to ensure trails look good","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-18T10:44:44.556402-05:00","updated_at":"2025-11-19T11:20:02.593649-05:00","closed_at":"2025-11-19T11:20:02.593649-05:00","source_repo":"."}
{"id":"godcell-4ga","content_hash":"9ecff7e020d14f0b14fb3ab424ff62a08191f4b2cad600dba01222c906c923ec","title":"Implement distortion obstacles","description":"Create static environmental hazards for stage 1 - spatial distortions in the digital grid.\n\n**Part of stage 1 difficulty enhancements** - adds navigation challenge to expanded world.\n\n**Visual:** Warped grid sections, glitch effects\n**Mechanics:**\n- Static placement in world (10-15 distortions)\n- Collision deals damage\n- Visual warning (distortion field, particles)\n- Maybe add disorientation effect (inverted controls briefly?)\n\n**Placement:**\n- Scatter throughout expanded world (4800x3200)\n- Creates navigation challenge and danger zones\n- Forces players to path around hazards","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-17T16:19:28.348113-05:00","updated_at":"2025-11-18T11:45:07.296533-05:00","closed_at":"2025-11-18T11:45:07.296533-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-4ga","depends_on_id":"godcell-2x3","type":"blocks","created_at":"2025-11-17T16:20:27.125172-05:00","created_by":"matthewhuff"},{"issue_id":"godcell-4ga","depends_on_id":"godcell-61d","type":"blocks","created_at":"2025-11-18T10:33:43.355884-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-4hv","content_hash":"3339993cbf53fc2123e9eeba3aeba2a9b9ba5a51fd5070964dfe753ab65f64eb","title":"Add pre-spawn warnings and spawn animations for all entities","description":"Add visual warning before entity spawns and particle burst animation on spawn for all entities (cells, swarms, etc).\n\n**Current State:**\n- Entities pop into existence instantly\n- No warning before spawns (swarms/bots can surprise players)\n- Feels abrupt and unpolished\n\n**Desired System:**\n\n**Pre-Spawn Warning (Telegraph):**\n- Visual indicator appears 1-2 seconds before entity spawns\n- Shows spawn location and entity type\n- Options:\n  - Glowing circle/ring that pulses/grows\n  - Particle swirl/vortex at spawn point\n  - Grid distortion/ripple effect\n  - Color-coded by entity type (green for nutrients, red for swarms, cyan for multi-cells)\n\n**Spawn Animation:**\n- Particle burst when entity materializes\n- Entity fades in / scales up from 0\n- Could be different per entity type:\n  - **Single-cells/Multi-cells**: Scale up + fade in + membrane formation\n  - **Swarms**: Particle convergence + glitch effect\n  - **Nutrients**: Crystallization effect\n  - **Obstacles**: Gravity distortion forming\n\n**Affected Entities:**\n- Player cells (spawn/respawn)\n- Bot cells (spawn/respawn)\n- Multi-cell bots\n- Entropy swarms (initial spawn + respawn if we add that)\n- Nutrients (initial spawn + respawn)\n- Obstacles (initial spawn, probably no respawn)\n\n**Implementation:**\n\n**Server-Side:**\n- Broadcast pre-spawn message 1-2s before entity spawn\n- Message includes: position, entity type, spawn time\n- Delay actual entity spawn by warning duration\n\n**Client-Side:**\n- Listen for pre-spawn messages\n- Create warning visual at position\n- Animate warning (pulse, grow, particles)\n- Remove warning on actual spawn\n- Create spawn particle burst\n- Fade in / scale up entity over 0.5-1s\n\n**Benefits:**\n- Players can react to incoming threats (see swarm about to spawn)\n- More polished, professional feel\n- Reinforces digital/cyber aesthetic (materialization)\n- Teaches players spawn patterns/locations\n\n**Files:**\n- `server/src/index.ts` - Pre-spawn message broadcasting\n- `client/src/render/three/ThreeRenderer.ts` - Warning visuals, spawn animations\n- `shared/index.ts` - Pre-spawn message types\n\n**Related:**\n- godcell-st9 (spawn animation for Stage 1 cells - can merge/supersede)\n\n**Design Questions:**\n- How long should pre-spawn warning be? (1s? 2s?)\n- Should warning be obvious or subtle?\n- Different visuals per entity type or unified system?\n- Should spawn animations block gameplay (invulnerable during fade-in)?","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-24T13:32:21.128522-05:00","updated_at":"2025-11-25T08:25:34.356181-05:00","closed_at":"2025-11-25T08:25:34.356181-05:00","source_repo":"."}
{"id":"godcell-4k8","content_hash":"18513067723056dfc6b26b5822fea8a35618aff8c90d5c1ea4b6d9f6657413b7","title":"Define ambitions/scale vision in game design doc","description":"Capture the \"what would make this feel ambitious\" vision discussion. Topics to address:\n\n- Target entity count (density vs depth tradeoff)\n- Emergence goals: genetic algorithms, ecosystem dynamics, behavioral emergence\n- Visual spectacle: what does \"teeming digital ocean\" look like?\n- Player agency: meaningful evolution choices\n- Technical ceiling: when does Node hit its wall, and is Bevy the answer?\n\nThis came from a gut-check conversation about whether we're being ambitious enough with the tools available. The decision: finish ECS refactor, complete core loop (single-cell → godcell), THEN revisit scale/ambition.\n\nKeep Bevy as an option if we hit real performance walls, but don't switch preemptively.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-29T12:00:12.009296-05:00","updated_at":"2025-11-29T12:00:12.009296-05:00","source_repo":"."}
{"id":"godcell-4nt","content_hash":"976176007029624ab02eb49eea1d354414bec8489748c0a6bd9929f092b61caa","title":"Choose tech stack for lo-fi MMORPG","description":"Decide on client/server stack. Needs to be:\n- Fast to iterate on\n- Good for real-time multiplayer (websockets)\n- Simple rendering for 2D\n- Something you'll enjoy working with\n\nConsider: Node.js + Canvas/Pixi? Python + Pygame? Rust + Bevy? Keep it simple.","notes":"Running experiment: Install Rust/Bevy and build minimal test (moving squares) to get felt experience. 1-2 hour timebox to decide if we continue or pivot.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-17T08:57:58.759702-05:00","updated_at":"2025-11-17T19:05:02.823603-05:00","closed_at":"2025-11-17T12:55:14.037412-05:00","source_repo":"."}
{"id":"godcell-54k","content_hash":"3f2c75707acd812bf62f577a6221dfe372d470d7faa55a2128c06a6fb5abc96f","title":"Build basic server that handles connections and game state","description":"Server needs to:\n- Accept websocket connections\n- Track connected players\n- Maintain world state\n- Broadcast updates to all clients\n- Handle player input (movement)","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-17T08:57:58.853647-05:00","updated_at":"2025-11-17T19:05:02.823309-05:00","closed_at":"2025-11-17T14:16:25.901614-05:00","source_repo":"."}
{"id":"godcell-5nc","content_hash":"e75077063a5cc64c217393a506894d707e376191cffcdfa477563cab1b36f694","title":"Replace activeDrains Map with ECS DrainedBy component","description":"The `activeDrains: Map\u003cstring, string\u003e` (prey→predator) is legacy state passed through GameContext.\n\nShould be an ECS component on prey entities:\n- `DrainedBy { predatorEntity: Entity }` or similar\n- PredationSystem queries for entities with DrainedBy\n- Removes component when drain ends\n\nDiscovered while migrating PredationSystem.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T10:46:51.847127-05:00","updated_at":"2025-11-29T15:44:30.112199-05:00","closed_at":"2025-11-29T15:44:30.112199-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-5nc","depends_on_id":"godcell-shh","type":"parent-child","created_at":"2025-11-29T10:47:02.471606-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-5sh","content_hash":"3dcdd91eccd62ba42a2ad55368b1e9adf49f2b2799d5ce39e57d07c98163fa7f","title":"Increase bot count by 3x (5 → 15 bots)","description":"Current: 5 AI bots competing for nutrients\nTarget: 15 AI bots (3x increase)\n\nThis will significantly increase resource competition and create more dynamic/chaotic gameplay in Stage 1.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-18T17:17:26.717146-05:00","updated_at":"2025-11-18T20:13:31.806198-05:00","closed_at":"2025-11-18T20:13:31.806198-05:00","source_repo":"."}
{"id":"godcell-5vi","content_hash":"63472d21da92b25a29f3101a20cf5c343db4e89fb7797e7f575d8dbb50a57773","title":"Research AI/pathfinding libraries for future bot improvements","description":"Investigate existing npm packages for server-side game AI to see if we should migrate from our custom steering behaviors.\n\n**Current Implementation:**\n- Custom steering behaviors (~300 lines in bots.ts)\n- Simple wander + seek logic\n- Works well but might benefit from more advanced features\n\n**Research Areas:**\n- Server-side pathfinding libraries (A*, navigation meshes)\n- Steering behavior packages (flocking, obstacle avoidance, pursuit/evade)\n- Game AI frameworks compatible with Node.js\n\n**Evaluation Criteria:**\n- Actively maintained\n- Works server-side (not browser-only)\n- Reasonable bundle size\n- Easy to integrate with our architecture\n- Adds meaningful features beyond what we have\n\n**Potential Candidates:**\n- pathfinding.js\n- steering-behaviors npm package\n- game-ai packages\n\nOnly migrate if library provides clear value over custom code.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-18T09:32:21.858191-05:00","updated_at":"2025-11-18T09:32:21.858191-05:00","source_repo":"."}
{"id":"godcell-5zn","content_hash":"2ec682c44a58bd3cd94b084ff7e728af1f420e2eae0108d274d67c4cfda80be1","title":"Make movement consume energy","description":"Movement should cost energy to add strategic depth and prevent infinite movement.\n\n**Current State:**\n- Energy only decays passively over time (ENERGY_DECAY_RATE)\n- Players can move indefinitely as long as they have any energy\n- No cost for acceleration, turning, or sustained movement\n\n**Proposed Mechanics:**\n- **Movement cost**: Deduct energy based on speed/distance moved\n- **Idle vs active**: Standing still costs less than moving\n- **Strategic choices**: Players must balance exploration vs energy conservation\n- **Risk/reward**: Moving to distant nutrients costs energy, must be worth it\n\n**Implementation Options:**\n1. **Distance-based**: Energy cost = distance * MOVEMENT_ENERGY_COST\n2. **Speed-based**: Higher speeds cost more energy (encourages slower, careful movement)\n3. **Acceleration-based**: Only cost energy when changing velocity (rewards smooth movement)\n\n**Tuning Considerations:**\n- Don't make movement prohibitively expensive (still needs to be fun)\n- Should create interesting decisions, not frustration\n- Balance with nutrient availability and spawn rates\n- May need to adjust ENERGY_DECAY_RATE if movement adds additional drain\n\n**Testing:**\n- Start with low cost and tune upward\n- Test with bots to see if they can still function\n- Ensure players can still reach nutrients without starving\n- Watch for \"stuck in place\" scenarios where movement costs too much\n\n**Integration:**\n- Server-side: Deduct energy in movement/physics update\n- Already have energy system in place, just add the drain\n- No client changes needed (server broadcasts energy updates)","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-18T13:13:33.375531-05:00","updated_at":"2025-11-19T11:39:18.505237-05:00","closed_at":"2025-11-19T11:39:18.505237-05:00","source_repo":"."}
{"id":"godcell-60j","content_hash":"81cca6318759c5eeb9880737b52ec5275c4ab718c02a93da233e700067566900","title":"Create render/three/materials (shaders, materials)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:22:49.180198-05:00","updated_at":"2025-11-19T21:39:13.296893-05:00","closed_at":"2025-11-19T21:39:13.296893-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-60j","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:22:49.18155-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-61d","content_hash":"19f677e13f66b45501fbf8b62faae173914adb7ab5c821c582585ee4de086b60","title":"Increase stage 1 pressure: expand world and reduce nutrient scarcity","description":"Double the world size and cut nutrients in half to create resource scarcity and make stage 1 more challenging.\n\n**Changes:**\n- World size: 2400x1600 → 4800x3200 (double both dimensions)\n- Nutrients: 25 → 12 or 13 (50% reduction)\n- Consider: Slightly increase energy decay rate to add more pressure?\n\n**Rationale:**\n- Current stage 1 is too easy - nutrients are abundant\n- Need scarcity to create competition between players/bots\n- Larger world spreads out resources, forces more exploration\n- Foundation for adding obstacles and predators (dangers need space)\n\n**Test:**\n- Play with bots and feel the pressure\n- Should feel urgent to find nutrients\n- Bots should die more frequently from starvation\n- Resource competition should be visible\n\nQuick win - just config constant changes in shared/index.ts","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-18T10:33:30.691705-05:00","updated_at":"2025-11-18T10:45:35.674767-05:00","closed_at":"2025-11-18T10:45:35.674767-05:00","source_repo":"."}
{"id":"godcell-6du","content_hash":"8423c06eba9860cb6e3176dca325a9cae0e94a6f97895b5c1e55faf0fc2ff741","title":"Playtest and tune energy pools and resistance","description":"Test and tune the energy-only system:\n- Manual playtest Stage 1: Does 200 energy feel right? Too fragile/tanky?\n- Manual playtest Stage 2: Does 400 energy + 25% resistance feel meaningful?\n- Test PvP: Is every hit scary enough? Too punishing?\n- Test visual feedback: Can you tell when low on energy? What's draining you?\n- Tune values if needed (energy pools, resistance percentages, damage rates)\n\nSee history/ENERGY_ONLY_SPEC.md sections: \"Testing Plan\" and \"Open Questions\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-22T23:23:12.636004-05:00","updated_at":"2025-11-24T16:39:15.482862-05:00","closed_at":"2025-11-24T16:39:15.482862-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-6du","depends_on_id":"godcell-20o","type":"blocks","created_at":"2025-11-22T23:23:12.63762-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-6ko","content_hash":"7c9babc78a9528a22c20da9eb8730347444810325a6fb6c24bd1961d9d342ecd","title":"Implement entropy swarms (virus enemies)","description":"Create the first predator enemy type for stage 1 - chaotic entropy swarms that hunt players.\n\n**Part of stage 1 difficulty enhancements** - adds active danger and hunt pressure to the expanded world.\n\n**Visual:** Glitching, corrupted particle clusters\n\n**Behavior:**\n- Spawn at fixed locations (3-5 swarms for testing)\n- Patrol zones or random walk\n- Chase players who enter detection radius (similar to bot seek behavior)\n- Deal damage on collision (continuous while touching)\n- Move slower than players (avoidable with skill)\n\n**AI Implementation:**\n- Can reuse steering behaviors from bots.ts\n- State machine: patrol/chase\n- Detection radius: ~300-400px?\n- Slower speed than players for fair chase","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-17T16:19:22.584571-05:00","updated_at":"2025-11-19T09:21:52.354338-05:00","closed_at":"2025-11-19T09:21:52.354338-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-6ko","depends_on_id":"godcell-2x3","type":"blocks","created_at":"2025-11-17T16:20:21.391415-05:00","created_by":"matthewhuff"},{"issue_id":"godcell-6ko","depends_on_id":"godcell-61d","type":"blocks","created_at":"2025-11-18T10:33:54.490352-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-6wj","content_hash":"20b957440f2b5178be3f1aab4ecf2e60c88081375f8ae1fb353c9d9cafc57d26","title":"Stage 2: Pseudopod extension mechanic (predation)","description":"Multi-cells hunt using two mechanics: lightning projectile beams and contact-based energy drain.\n\n**CURRENT IMPLEMENTATION (PR #42):**\n\n**Pseudopod Projectile Beams:**\n- **Activation**: Left-click to fire beam toward mouse/cursor position\n- **Mechanics**: Projectile mode (travels at 1800 px/s, not hitscan)\n- **Energy Cost**: 30 per shot\n- **Damage**: 100 energy drain per hit\n- **Cooldown**: 1 second\n- **Range**: Unlimited (9999 pixels)\n- **Visual**: Lightning energy beam\n\n**Contact-Based Energy Drain:**\n- **Trigger**: Multi-cell touches single-cell\n- **Drain Rate**: 150 energy/second (~1-2 seconds to kill)\n- **Prey Effect**: Movement speed penalty (slowed while being drained)\n- **Escape**: Prey can break contact and escape\n- **Visual**: Drain auras (thick shell effect), lightning connection\n\n**Skill-Based Hunting:**\n- Prey can **dodge** projectile beams (they travel, not instant)\n- Predator must **aim** and predict movement\n- Prey can **escape** contact drains by breaking away\n- Creates chase/pursuit gameplay\n\n**Implementation Status:**\n- ✅ Projectile firing system (left-click)\n- ✅ Contact drain mechanics\n- ✅ Drain auras and visual feedback\n- ✅ Energy rewards on kill\n- ✅ Server-authoritative collision and damage\n- ⚠️ Visual improvement needed: squiggly tendril effect (tracked in godcell-43k)\n\n**Note:** Spacebar is EMP blast (separate ability), not pseudopod attack.\n\n**Biological Inspiration:** Amoeba phagocytosis adapted to cyber-organism energy combat.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-19T12:31:12.802227-05:00","updated_at":"2025-11-24T12:59:34.640333-05:00","closed_at":"2025-11-24T12:59:34.640333-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-6wj","depends_on_id":"godcell-bve","type":"blocks","created_at":"2025-11-19T12:31:48.267489-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-79l","content_hash":"fd9dc44e41c1235069023255fbb9cf6c71542563c52b37482414a7d7baa4664f","title":"Remove Phaser dependencies and old GameScene","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:23:17.925606-05:00","updated_at":"2025-11-19T21:39:42.028183-05:00","closed_at":"2025-11-19T21:39:42.028183-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-79l","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:23:17.927209-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-7bv","content_hash":"be06852a4af51ad0fb15a9ade0cff61d1cae3cc77cc3068b304b1e2156817e70","title":"Extract telemetry/stats functions to telemetry.ts module","description":"The `calculateAggregateStats()` and `createGameStateSnapshot()` functions in index.ts should be extracted to a dedicated `server/src/telemetry.ts` module.\n\nThis was noted in earlier planning but not yet done. Would help reduce index.ts size further.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-29T15:21:08.740831-05:00","updated_at":"2025-11-29T15:21:08.740831-05:00","source_repo":".","labels":["refactor"]}
{"id":"godcell-7lu7","content_hash":"de22388f8a95a5e03601deaafe2f0e8d2bd806989f35481d0de55f6ef86d8034","title":"Refactor ThreeRenderer.ts - extract entity renderers","description":"ThreeRenderer.ts is 2452 lines and growing. It handles too many responsibilities and will become increasingly painful to maintain as stages 4-5 add complexity.\n\n**Current state:**\nSingle monolithic class handling:\n- Scene/camera setup (orthographic + perspective)\n- Camera modes (topdown, first-person)\n- Entity rendering (players, nutrients, obstacles, swarms, pseudopods)\n- Background systems (soup particles, jungle environment)\n- Visual effects (trails, death animations, evolution animations, EMP, spawn fx)\n- Detection/compass system\n- Drain/gain aura effects\n- Humanoid model management\n- First-person controls\n\n**Proposed extraction:**\nSplit into focused modules in `client/src/render/three/`:\n\n1. **PlayerRenderer.ts** - Player mesh creation, trails, outlines, drain/gain auras\n2. **NutrientRenderer.ts** - Nutrient 3D icosahedrons, energy transfer effects\n3. **ObstacleRenderer.ts** - Gravity wells, accretion particles, core pulsing\n4. **SwarmRenderer.ts** - Swarm meshes, orbiting particles, internal storm, death animations\n5. **EffectsRenderer.ts** - Death animations, evolution animations, EMP pulses, spawn fx\n6. **BackgroundRenderer.ts** - Soup grid/particles, jungle environment, soup activity dots\n7. **CameraController.ts** - Camera setup, zoom, first-person controls, shake effects\n8. **DetectionRenderer.ts** - Compass indicators for chemical sensing\n\n**ThreeRenderer.ts becomes:**\n- Scene orchestrator\n- Delegates to specialized renderers\n- Handles render loop coordination\n- ~500-800 lines instead of 2400+\n\n**Benefits:**\n- Each renderer is testable in isolation\n- Easier to add Stage 4/5 visual systems\n- Clear ownership of mesh maps and lifecycle\n- HumanoidRenderer.ts already follows this pattern\n\n**Migration approach:**\n- Extract one system at a time\n- Keep ThreeRenderer API stable externally\n- Internal delegation to new modules","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T21:33:36.25217-05:00","updated_at":"2025-11-29T21:33:36.25217-05:00","source_repo":".","labels":["refactor","rendering","tech-debt"]}
{"id":"godcell-7ly","content_hash":"eba7d9d4d6c7deeaf83d32cfdc6730d0436ce66f5f6520c9ea9bc739c04a795e","title":"Add blue/cyan aura visual feedback when gaining energy","description":"Players should have a visible aura effect when actively gaining energy to provide clear visual feedback for positive energy flow.\n\nTrigger conditions:\n- Collecting nutrients\n- Draining another lifeform via contact/pseudopod\n\nVisual design:\n- Blue/cyan color (contrasts with aggressive red drain auras)\n- Should feel \"feeding\" or \"absorbing\"\n- Intensity could scale with rate of energy gain\n- **Particle transfer effect:** Particles should emit from the drained entity and be absorbed into the draining entity, creating a visible energy flow between them\n\nParticle system details:\n- Particles originate at the damaged/drained entity\n- Travel toward and get absorbed by the draining entity\n- Should create a clear visual connection showing energy transfer direction\n- Could use different particle colors/styles: cyan for nutrients, deeper blue for life-drain\n- Particle speed/density could scale with drain rate\n\nImplementation notes:\n- Client: ThreeRenderer.ts aura system (similar to existing drain auras)\n- Server: Broadcast energy gain events or include in state updates\n- Need particle system for entity-to-entity energy transfer visualization\n- May need to distinguish between nutrient collection vs draining (different intensities/shades?)\n- Consider performance with multiple players gaining energy simultaneously\n- Particle pooling/optimization for multiple simultaneous drain effects\n\nDesign considerations:\n- Duration: instant flash vs sustained glow while feeding?\n- Should it stack/intensify if gaining from multiple sources?\n- How does this interact with existing shell/stage visual effects?\n- Particle trail behavior: straight line, curved arc, or attracted/homing behavior?","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-24T15:41:24.710633-05:00","updated_at":"2025-11-25T08:25:49.941145-05:00","closed_at":"2025-11-25T08:25:49.941145-05:00","source_repo":"."}
{"id":"godcell-7pd","content_hash":"51277be3505d1a13cb02382b7f084a792b6f7e870820aa44f6bbf35c70840abe","title":"Twin-stick combat system - projectiles","description":"Stage 3 unlocks combat. Twin-stick shooter mechanics: move with one input, aim/fire with another. Energy-based projectiles (20 energy per shot from design doc). First time players can actually fight rather than flee or engulf. Server-authoritative hit detection.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-11-25T00:26:35.348285-05:00","updated_at":"2025-11-26T18:38:52.48822-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-7pd","depends_on_id":"godcell-r85","type":"parent-child","created_at":"2025-11-25T00:27:51.288944-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-7s8","content_hash":"80303f98b3d7a9a1a74a9e2f64f052e34fa0d623ef5f7d42c6ab4f477d87fa61","title":"Update swarm energy system (server)","description":"Refactor swarms in server/src/swarms.ts for energy-only system:\n\n**DONE (PR #45):**\n- ✅ Update all `player.health \u003c= 0` checks to `player.energy \u003c= 0`\n- ✅ Update `player.health -= damage` to `player.energy -= damage`\n- ✅ Use `applyDamageWithResistance` for swarm contact damage\n\n**TODO (remaining work):**\n- ❌ Implement `consumeSwarm` function: drain swarm energy during consumption, reward consumer when swarm.energy=0\n- ❌ Update `swarm.currentHealth` references to `swarm.energy` (if applicable)\n\nSee history/ENERGY_ONLY_SPEC.md sections: \"Swarm Energy Pools\" and \"Swarm Changes\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-22T23:22:49.66198-05:00","updated_at":"2025-11-24T19:00:12.953552-05:00","closed_at":"2025-11-24T19:00:12.953552-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-7s8","depends_on_id":"godcell-20o","type":"blocks","created_at":"2025-11-22T23:22:49.663519-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-7wt","content_hash":"9d45c5f27d949b68fe480ba1762e76c4bd94626cb29a0162846bf2bb3b9faf25","title":"Add damage visual effects when cells are hit by swarms or obstacles","description":"Add visual feedback when cells take damage from swarms or gravity distortions to make combat/danger feel impactful.\n\n**Visual Effects Needed:**\n\n**Swarm Contact Damage:**\n- Red flash/glow on cell membrane when touching swarm\n- Particle sparks at contact point\n- Screen shake for local player?\n- Health bar flash red\n- Maybe: corruption/glitch effect on cell visuals\n\n**Obstacle Damage (if we keep damage):**\n- Cell membrane flickers/distorts inside gravity well\n- Increasing visual corruption closer to core\n- Red energy drain particles flowing out of cell\n- Pulsing red glow synchronized with damage ticks\n\n**General Damage Feedback:**\n- Nucleus flickers when taking damage\n- Membrane transparency increases slightly (weakening)\n- Particle effects appropriate to damage source\n- Audio feedback (hit sounds, damage alerts)\n\n**Implementation:**\n- Listen for damage events in renderer\n- Trigger particle effects at damage position\n- Animate cell materials (flash red, flicker opacity)\n- Clean up effects when damage stops\n\n**Files:**\n- `client/src/render/three/ThreeRenderer.ts` - damage effect visuals\n- May need new particle systems for damage FX\n\n**Reference:**\n- Death particle effect (`godcell-cxu`) as template for particle systems","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-21T16:04:31.39448-05:00","updated_at":"2025-11-25T10:46:10.808349-05:00","closed_at":"2025-11-25T10:46:10.808349-05:00","source_repo":"."}
{"id":"godcell-84c","content_hash":"da2d902c30d000c32b9dcecc07521de779b15c8748eeca5bc331068a5c077277","title":"Create render/three/input-adapter (DOMInputAdapter)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:22:43.453916-05:00","updated_at":"2025-11-19T21:39:24.79209-05:00","closed_at":"2025-11-19T21:39:24.79209-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-84c","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:22:43.455408-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-882","content_hash":"46cbdbacd25647c8870ad34fe761494ddbfcaf4e3350a155adfe8d3f2ae707a1","title":"Experiment with larger nucleus size","description":"Try increasing nucleus size from 30% to maybe 40-50% of cell radius to make it more visually prominent.\n\n**Current State:**\n- Nucleus is 30% of cell radius\n- Visible but somewhat subtle\n\n**Proposed Change:**\n- Increase to 40-50% of radius\n- See if it improves visual clarity and cell identity\n- Should still feel like \"core inside membrane\" not \"two equal spheres\"\n\n**Testing:**\n- Try both 40% and 50%, see which feels better\n- Check at Stage 1 size (small) and Stage 2 size (large)\n- Ensure it doesn't clash with membrane visuals\n- Can always revert if it looks worse\n\n**File:** `client/src/render/three/ThreeRenderer.ts` - nucleus geometry creation (currently `radius * 0.3`)","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-21T16:04:06.845613-05:00","updated_at":"2025-11-21T16:04:06.845613-05:00","source_repo":"."}
{"id":"godcell-8c6","content_hash":"6d5382e110619d66af8571d5e377a768aed6c32a961118526e3aec635eb17811","title":"Replace playerInputDirections and playerVelocities Maps with ECS components","description":"The `playerInputDirections` and `playerVelocities` Maps are legacy state that get passed around to bots.ts and other modules.\n\nThese should be ECS components:\n- `InputComponent` already exists but may need to be used more consistently\n- `VelocityComponent` already exists but the Map is still used as the source of truth\n\nFiles affected:\n- index.ts: declares and passes these Maps\n- bots.ts: receives and uses these Maps\n- MovementSystem: likely reads from these\n\nThis is part of the broader Phase 5 goal of eliminating all legacy Maps.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T15:21:03.005349-05:00","updated_at":"2025-11-29T16:49:19.499142-05:00","closed_at":"2025-11-29T16:49:19.499142-05:00","source_repo":".","labels":["ecs-migration","tech-debt"]}
{"id":"godcell-8p5","content_hash":"f896fa9f7a01e54a880d7bc89894c0efefc39d2e516b6b1426b0eb70b220e9ab","title":"Set up TypeScript/Phaser/Node.js project structure","description":"Create clean project structure with:\n- Client: TypeScript + Phaser for rendering\n- Server: Node.js + Socket.io for multiplayer\n- Shared: Common types/constants\n- Build tooling for development and production\nMake it readable and well-organized.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-17T12:55:14.139138-05:00","updated_at":"2025-11-17T19:05:02.822434-05:00","closed_at":"2025-11-17T14:07:54.306524-05:00","source_repo":"."}
{"id":"godcell-8qx","content_hash":"d2ddea316f62b38a62c57698809085ceb31c98bda03a1c8f1e8e8348c3fe67ee","title":"Create playground mode for rapid feature testing","description":"Add a playground/sandbox mode where developers can quickly spawn entities and test features without needing full multiplayer setup.\n\nCurrent problem:\n- Testing features requires full server + client setup\n- Hard to test edge cases (multiple enemies, specific scenarios)\n- Slow iteration for gameplay mechanics\n- Example: Testing bot obstacle avoidance requires full game setup and waiting for bots to encounter obstacles naturally\n\nProposed solution:\n- Dedicated playground mode accessible via command-line flag or dev menu\n- Features:\n  - Spawn controls: enemies, obstacles, swarms, nutrients on demand\n  - God mode toggles: invincibility, infinite energy, instant evolution\n  - Time controls: pause, slow-mo, fast-forward\n  - Scenario presets: \"surrounded by enemies\", \"low energy survival\", \"evolution test\", etc.\n  - Entity property editor: modify entity stats in real-time\n  - **Scenario recorder/replayer:** Save interesting configurations (entity positions, types, states) to instantly recreate edge cases and test scenarios\n\nExample use cases:\n- Bot AI iteration: Spawn single obstacle + bot, rapidly test navigation/avoidance logic, adjust steering params, repeat\n- Combat testing: Spawn specific enemy configurations, test drain mechanics\n- Evolution testing: Instant stage changes, verify visual transitions\n- Edge case reproduction: Recreate specific bug scenarios on demand\n- Save tricky scenarios: \"bot wedged between two obstacles\", \"surrounded by swarms\", etc. for regression testing\n\nDebug visualization features:\n- Bot path trail history to see navigation patterns\n- Steering force vector overlays to debug avoidance logic\n- Collision boundary visualizations\n- AI decision state indicators\n\nBenefits:\n- Test gameplay features in isolation\n- Reproduce bug scenarios quickly\n- Iterate on balance without grinding through gameplay\n- Great for demos and presentations\n- Tight feedback loop: change code → spawn test scenario → verify → repeat\n- Persistent scenario library for regression testing and onboarding\n\nImplementation notes:\n- Could extend existing debug overlay or create new dev UI\n- Consider keybinds for quick spawning (numpad shortcuts?)\n- Save/load scenario configurations (JSON format?)\n- May want single-player mode variant vs multiplayer testing\n- Scenario files could be committed to repo for team sharing\n- Consider scenario recording/playback for before/after comparisons\n- Hot reload support for immediate code changes","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-24T16:05:15.230669-05:00","updated_at":"2025-11-25T00:10:51.562973-05:00","closed_at":"2025-11-25T00:10:51.562973-05:00","source_repo":"."}
{"id":"godcell-8t7","content_hash":"2f6ddde4d29e8e7841800272d24088058e977355b04361ef2e4301a5743b072d","title":"ECS: Migrate pseudopodHitDecays","description":"Migrate pseudopodHitDecays Map to ECS component.\n\nThis tracks damage decay on entities hit by pseudopod beams.\n\nStructure: `Map\u003cstring, { rate: number; expiresAt: number }\u003e`\n\nOptions:\n1. Add to DamageTrackingComponent\n2. Create dedicated PseudopodHitDecayComponent\n\nFiles to change:\n- server/src/index.ts - Map declaration, usage, buildGameContext\n- server/src/ecs/systems/GameContext.ts - remove from interface\n- shared/ecs/components.ts - add component\n- server/src/ecs/factories.ts - add helpers","status":"closed","priority":2,"issue_type":"task","assignee":"claude","created_at":"2025-11-29T16:27:07.728716-05:00","updated_at":"2025-11-29T16:45:59.684787-05:00","closed_at":"2025-11-29T16:45:59.684787-05:00","source_repo":".","labels":["ecs-migration","phase-5"]}
{"id":"godcell-91l","content_hash":"127d908cc546529744e1f453460d06b18ccf9feecf38865f44610f0f92a1745d","title":"3D Visual Overhaul - Depth and Immersion Upgrade","description":"Transform the game from flat 2D sprites to 3D volumetric visuals while maintaining 2D plane movement.\n\n## Vision\nCreate depth and visual richness by rendering entities as true 3D objects instead of flat circles, while keeping the gameplay on a 2D plane. This enhances immersion and makes the \"digital ocean\" aesthetic more tangible.\n\n## Core Principles\n- Movement stays 2D (x, y plane), but visuals are 3D (spheres, volumes, particles)\n- Entities have depth, lighting, and volumetric effects\n- Clear visual language for danger levels (especially gravity fields)\n- Diegetic UI (health/energy integrated into world, not HUD bars)\n- Performance-conscious (3D shouldn't tank framerate)\n\n## Components\n1. **3D Cell Sprites** - Players and bots become glowing spheres with visible nuclei\n2. **3D Swarm Energy Storms** - Virus swarms become chaotic energy balls with particle turbulence\n3. **3D Gravity Distortion Fields** - Layered danger zones with clear visual hierarchy\n4. **Diegetic Interface** - Health/energy shown through cell visuals, not UI bars\n\n## Technical Approach\n- Use Three.js sphere geometries with custom shaders\n- Particle systems for internal effects (nuclei, storms)\n- Layered materials for depth (core, membrane, glow)\n- Post-processing for integration (bloom makes 3D elements cohesive)\n- Camera stays orthographic or perspective with locked Y-axis\n\n## Success Criteria\n- Game feels more immersive and \"real\"\n- Danger levels are instantly readable (especially singularity cores)\n- Performance maintains 60fps with all entities on screen\n- Visual style is cohesive across all entity types\n- Players can gauge health/energy at a glance without HUD bars","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-21T11:08:27.324846-05:00","updated_at":"2025-11-21T15:55:00.709792-05:00","closed_at":"2025-11-21T15:55:00.709792-05:00","source_repo":"."}
{"id":"godcell-94p","content_hash":"f6e1fe995b4005cfe82ce83ca769db6406a011fb485c59b61ea4c871cd9f4e10","title":"Create render/three/hud modules (HUDOverlay and components)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:22:37.711908-05:00","updated_at":"2025-11-19T21:39:30.528398-05:00","closed_at":"2025-11-19T21:39:30.528398-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-94p","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:22:37.713301-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-96i","content_hash":"6de57f6b7bb37c91cc13a058bc045847005c0bbb1824b147be5de28b4d85cf91","title":"Replace placeholder graphics with proper sprites and environment textures","description":"Current game uses basic geometric shapes (circles, polygons) and solid colors. Replace with proper pixel art sprites and textured environments.\n\n**Art Direction:**\n- **Theme**: Digital primordial soup / cyber-organic hybrid\n- **Style**: Pixel art or stylized 2D art (maintain performance)\n- **Aesthetic**: Neon cyberpunk meets biological evolution\n- **Mood**: Mysterious, slightly ominous, vibrant\n\n**Assets Needed:**\n\n**Cyber-Cells (Players/Bots):**\n- Single-cell stage: Glowing particle/amoeba sprite with membrane\n- Multi-cell stage: Connected cells, more complex\n- Cyber-organism: Cybernetic augmentations visible\n- Humanoid: Bipedal cyber-creature\n- Godcell: Transcendent, radiant form\n- Animated idle/movement for each stage\n- Death/respawn effects\n\n**Environment:**\n- Background: Layered parallax (void space, flowing data streams, grid)\n- Particles: Data streams, flowing energy, ambient sparkles\n- Grid: More textured/detailed grid lines\n\n**Nutrients (Data Packets):**\n- Normal: Glowing data crystal/orb with rotating animation\n- High-value: Gold/yellow variant with enhanced glow\n\n**Obstacles (Gravity Distortions):**\n- Event horizon: Warped space effect, gravitational lensing\n- Danger zones: Concentric rings with animated shimmer\n- Singularity core: Dark void with accretion disk particles\n- Distortion effects: Screen warp, chromatic aberration\n\n**UI Elements:**\n- Health/energy bars: Styled frames, fill textures\n- Death screen: Themed background\n- Icons and indicators\n\n**Implementation:**\n- Export assets as sprite sheets or individual PNGs\n- Load via Phaser's asset loader\n- Replace current Graphics/Circle objects with Sprite objects\n- Maintain same collision/hitbox logic\n- Add particle effects using Phaser particle system\n\n**Considerations:**\n- Keep file sizes reasonable (pixel art helps)\n- Maintain 60fps performance\n- Assets should scale well (avoid tiny details)\n- Color palette should be cohesive\n- Accessibility: Colorblind-friendly distinctions","status":"open","priority":3,"issue_type":"feature","created_at":"2025-11-18T11:51:40.7892-05:00","updated_at":"2025-11-18T11:51:40.7892-05:00","source_repo":"."}
{"id":"godcell-a2u","content_hash":"e1a1597972f2a09a495735768ea6802236bf5096baa23ad7575ee8c3e6a21dbd","title":"Fix energy/health bars breaking through boundaries","description":"Energy and health bars overflow beyond their container boundaries. Need to clamp values to max width.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-21T09:29:09.915109-05:00","updated_at":"2025-11-21T09:42:37.940449-05:00","closed_at":"2025-11-21T09:42:37.940449-05:00","source_repo":"."}
{"id":"godcell-aei","content_hash":"83356127ab237aa51e216e646fe4d5568e770fcd8c0bde33e6111171fa4d5f8f","title":"Stage 3 spawn and death flow","description":"Where does a Stage 3 player appear after emergence? Near their soup pool? Random jungle location? When Stage 3+ dies, they return to soup as Stage 1 - need to handle cross-scale respawn. Also: can Stage 3 players spawn-camp soup pools?","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-25T00:27:08.245953-05:00","updated_at":"2025-11-25T00:27:08.245953-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-aei","depends_on_id":"godcell-r85","type":"parent-child","created_at":"2025-11-25T00:28:23.825679-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-ah1","content_hash":"9fcc58057cdddee96c33a87281da1c42f80cecb30301af2b76c702ee0afb3e78","title":"Restore white stroke outline around client player's cell","description":"The player's own cell used to have a distinctive white stroke/border to differentiate it from other cells. Bring this back in Three.js renderer.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-21T09:29:38.813455-05:00","updated_at":"2025-11-21T09:43:02.367176-05:00","closed_at":"2025-11-21T09:43:02.367176-05:00","source_repo":"."}
{"id":"godcell-ahb","content_hash":"225dae68744f58d8e124a3c4f1bb22d454371e67a0454054d24885589d3bee6f","title":"Update AI to avoid distortion cores","description":"Bots and entropy swarms currently don't avoid gravity distortion cores and frequently get crushed by singularities.\n\n**Current Behavior:**\n- Bots seek nutrients directly, ignoring obstacles\n- Bots get pulled into singularity cores and die frequently\n- Same issue will affect entropy swarms\n\n**Desired Behavior:**\n- AIs should detect nearby obstacles\n- Avoid paths that lead through dangerous core zones\n- Use steering behaviors to path around obstacles\n- Balance between avoiding danger and pursuing targets\n\n**Implementation Options:**\n1. **Simple repulsion**: Add avoidance force when too close to cores\n2. **Raycast check**: Before moving, check if path intersects core radius\n3. **Threat assessment**: Weight danger vs reward (worth risking obstacle for high-value nutrient?)\n\n**Considerations:**\n- Don't make AIs too smart (they should be beatable)\n- Some risk-taking makes them feel more alive\n- Core radius (60px instant-death zone) should be hard-avoided\n- Event horizon (600px gravity zone) can be navigated carefully\n\n**Testing:**\n- Watch bots over time - should see fewer singularity deaths\n- Ensure AIs don't get completely stuck avoiding obstacles\n- Verify they can still collect nutrients near (but not in) danger zones","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-18T14:30:34.487969-05:00","updated_at":"2025-11-19T10:16:20.107961-05:00","closed_at":"2025-11-19T10:16:20.107961-05:00","source_repo":"."}
{"id":"godcell-am5","content_hash":"171f9bdc30a910949db5317c182ebac6ad1775643fcb0a13b86d588d8fcc67d9","title":"Create core/net modules (SocketManager, MessageProcessor, IntentSender)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:21:45.437295-05:00","updated_at":"2025-11-19T21:30:16.438482-05:00","closed_at":"2025-11-19T21:30:16.438482-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-am5","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:21:45.438642-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-ank","content_hash":"f053388ad9b9159e7f2f418b8b985e107f76fd71e720c352b0e53f4b8cc0e2a9","title":"Create app/bootstrap and wire core + renderer together","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:23:12.175122-05:00","updated_at":"2025-11-19T21:39:36.282364-05:00","closed_at":"2025-11-19T21:39:36.282364-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-ank","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:23:12.176534-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-au7","content_hash":"d091c124cc804d3a9e80775dab61985b64502ba30dd8b0856791dacf1844cf5f","title":"Explore refactor to full Entity-Component-System (ECS) architecture","description":"Currently using \"data-oriented design with systems\" - a lightweight approach where:\n- Entities are plain data objects (Player, Nutrient, EntropySwarm)\n- Logic lives in functions/systems that operate on entities\n- State lives in Maps\n\n**What full ECS would add:**\n1. Entities as pure IDs (just numbers)\n2. Components as separate, queryable stores (`positions.get(entityId)`, `velocities.get(entityId)`)\n3. Formal query system (\"give me all entities with Position + Velocity + Health\")\n\n**Benefits we'd gain:**\n- Cache-friendly iteration (all positions contiguous in memory)\n- Easy runtime component add/remove (no object mutation)\n- Formal queries for \"all entities that can X\"\n- Cleaner separation of concerns\n\n**Questions to explore:**\n- Is this worth it for ~100 entities? (Performance gains may be minimal)\n- Which ECS library to use? (bitecs, miniplex, or roll our own?)\n- How does this interact with networking? (Serialization patterns)\n- Migration path from current architecture?\n\n**Context:**\nThis came up while implementing AbilitySystem - the current architecture is already 80% of the way to ECS conceptually. Full ECS would formalize and complete the pattern.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-28T13:08:46.485611-05:00","updated_at":"2025-11-28T16:32:55.035789-05:00","closed_at":"2025-11-28T16:32:55.035789-05:00","source_repo":".","labels":["architecture","exploration","refactor"]}
{"id":"godcell-b4f","content_hash":"5a051a220bd5b588bebc85cb34a49e77a8cc73b83cad4a7c65e4282496fe44f9","title":"Replace Date.now() with performance.now() for client-side animation timing","description":"ThreeRenderer.ts currently uses Date.now() for animation timing (shader uniforms, visual effects). This should be replaced with performance.now() for better precision and immunity to system clock changes.\n\nAffected areas:\n- Shader time uniforms (lines 1276, 1493, 1731, 2273, 2333)\n- Animation timers (lines 1122, 2016, 2184, 2195, 2211)\n- Flash effects (line 1461)\n\nKeep Date.now() for:\n- Session tracking (spawn times, time alive)\n- Any timestamps that need to be absolute or persist across sessions\n\nNote: Server-side Date.now() usage is appropriate for cooldowns/timers.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-24T14:52:50.76164-05:00","updated_at":"2025-11-24T14:52:50.76164-05:00","source_repo":"."}
{"id":"godcell-b9g","content_hash":"bf0697244c201b22868037249f23e8fdc99c2651e347b0dc6a68ed23477faecb","title":"Update EMP mechanics (server)","description":"Update EMP handler in server/src/index.ts:\n- Check `player.energy \u003c= 0` instead of health for validation\n- Update swarm disabling: set `swarm.energy = GAME_CONFIG.SWARM_ENERGY` (instead of currentHealth)\n- Add energy drain for single-cells: apply 40 energy drain with resistance\n- Update multi-cell stun: reduce to 1.5s (was 3s), drain 80 energy with resistance\n- Use `applyDamage` helper for resistance calculation\n\nSee history/ENERGY_ONLY_SPEC.md section: \"Server Changes #7\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-22T23:22:43.925317-05:00","updated_at":"2025-11-24T16:39:08.009251-05:00","closed_at":"2025-11-24T16:39:08.009251-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-b9g","depends_on_id":"godcell-20o","type":"blocks","created_at":"2025-11-22T23:22:43.926562-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-bfv","content_hash":"b3b42f6c223eeeb098f51a084f951293d527ce711d08a4986a8325bd77d6bbed","title":"Increase energy decay rate by 20%","description":"Current: 2.22 units/sec (~45 seconds to starvation)\nTarget: 2.66 units/sec (~37.5 seconds to starvation)\n\n20% faster decay increases survival pressure and forces more aggressive nutrient collection.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-18T17:17:32.491297-05:00","updated_at":"2025-11-18T20:13:25.221317-05:00","closed_at":"2025-11-18T20:13:25.221317-05:00","source_repo":"."}
{"id":"godcell-bkf","content_hash":"f1e70510f926a382235840dc1b209d82b9f2cd0e696e56b418a32831468703bf","title":"Stage 3 NPC predators - digital fauna","description":"AI threats at macro scale. Cyber-snakes? Data-eating viruses? Corrupted programs? These are the jungle equivalent of entropy swarms - hostile NPCs that create pressure and danger. Define behavior patterns and combat interactions.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-25T00:26:48.554294-05:00","updated_at":"2025-11-25T00:26:48.554294-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-bkf","depends_on_id":"godcell-r85","type":"parent-child","created_at":"2025-11-25T00:28:04.25677-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-brm","content_hash":"658470e235734abf84ab0f5d319b46bd397d18c30feb6ca7a79711096aef9ab6","title":"Add one 'game' element for demo juice","description":"Something beyond just walking and talking. Could be:\n- Collectible items\n- Simple combat/tag\n- Building/placing objects\n- Emotes/gestures\n- Anything that creates emergent moments\n\nKeep it simple but demo-able.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-11-17T08:57:59.311299-05:00","updated_at":"2025-11-18T08:14:49.955362-05:00","closed_at":"2025-11-18T08:14:49.955362-05:00","source_repo":"."}
{"id":"godcell-bve","content_hash":"c2fb62c4bdac515357da485fddcb0ea5946248198642d1cfa8d74a74a89440b7","title":"Stage 2: Multi-cell evolution - size increase and metabolic efficiency","description":"Implement the core Stage 2 (Multi-Cell) evolution mechanics.\n\n**Evolution Requirements:**\n- Reach energy capacity threshold (250 units)\n- Must have 80% energy (200/250) to trigger molting\n\n**Physical Changes:**\n- **Size**: 4x larger than single-cell (visual presence = predator)\n- **Appearance**: More complex cellular structure (maybe visible nucleus, organelles)\n- **Glow**: Brighter/more intense to show higher information coherence\n\n**Metabolic Efficiency:**\n- Energy pool: 250 units (up from 100)\n- Passive decay: ~2.1 units/sec (slower per capita than Stage 1)\n- Survival time: ~2 minutes to starvation (vs 90 seconds for Stage 1)\n- Movement cost: Same as Stage 1 (efficiency gain from bigger pool)\n\n**Implementation:**\n- Update evolution thresholds in GAME_CONFIG\n- Scale sprite size by 4x on evolution\n- Adjust energy pool and decay rates\n- Server logs evolution event\n- Client plays molting animation (already exists)\n\n**Design Goal:** Multi-cells feel like apex predators - bigger, more efficient, patient hunters.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-19T12:31:01.15673-05:00","updated_at":"2025-11-19T13:14:09.316862-05:00","closed_at":"2025-11-19T13:14:09.316862-05:00","source_repo":"."}
{"id":"godcell-c2h","content_hash":"f0fa0f5788bce72baa472c9d481989fe7630746f59a50200ba608a606c4444b5","title":"6-legged cyber-lizard player visual","description":"Stage 3 player sprite/mesh. Lizard-like body with 6 legs, visible subsystems (energy cores? data processors?). Maintains cyber aesthetic but more sophisticated than cellular blobs. Needs idle, movement, and combat animations.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-25T00:26:22.036247-05:00","updated_at":"2025-11-29T20:55:29.627481-05:00","closed_at":"2025-11-29T20:55:29.627481-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-c2h","depends_on_id":"godcell-r85","type":"parent-child","created_at":"2025-11-25T00:27:44.697204-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-cd7l","content_hash":"ab8ac63bd222b6352bbabb3a0a471062e571b03c8ad8611c76227173bd5ccea5","title":"Stage 5 skeleton: 3D flying sphere godcell","description":"Prove out Stage 5 technical bones - dev panel accessible only, no gameplay mechanics yet.\n\n**What this includes:**\n1. Simple glowing sphere model for godcell form (reuse/adapt existing sphere rendering)\n2. Third-person camera following the sphere\n3. Full 3D movement - WASD for XY plane + Q/E (or Space/Shift) for up/down\n4. Dev panel dropdown/button to force player to Stage 5\n5. Player exists in jungle world but liberated from ground\n\n**What this does NOT include:**\n- Procedural alien-angel generation\n- Signal system\n- Rite of passage / final battle\n- Interaction with lower stages\n- Any Stage 5 gameplay mechanics\n- Proper evolution trigger from Stage 4\n\n**Success criteria:**\n- Can click \"Stage 5\" in dev panel\n- Camera switches to third-person behind/above sphere\n- Can fly freely in 3D space (up, down, all directions)\n- Sphere model visible to other players (if any)\n- Player can move through full 3D volume of jungle world\n\n**Technical notes:**\n- Sphere can be simple emissive material with glow/bloom\n- Third-person camera offset behind and slightly above\n- Need to add Z-axis to movement system (currently XY only)\n- May need to adjust world bounds or remove ground collision for godcells","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-29T21:05:37.131505-05:00","updated_at":"2025-11-29T21:05:37.131505-05:00","source_repo":".","labels":["core-loop","skeleton","stage-5"],"dependencies":[{"issue_id":"godcell-cd7l","depends_on_id":"godcell-3zkl","type":"parent-child","created_at":"2025-11-29T21:07:39.674224-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-cdr","content_hash":"e0e4b92cd96ee16ac5b2b0f25bff38306abf7ad2969c0531da911fdbf0aba27f","title":"Double movement speed for all characters","description":"Movement currently feels slow - double the speed for players, bots, and swarms.\n\n**Current Speed:**\n- Players: 200 px/s (PLAYER_SPEED)\n- Swarms: 144 px/s (SWARM_SPEED)\n- Bots: same as players (200 px/s)\n\n**Target Speed:**\n- Players: 400 px/s (2x)\n- Swarms: 288 px/s (2x)\n- Bots: 400 px/s (2x)\n\n**Implementation:**\n- Update PLAYER_SPEED in shared/index.ts\n- Update SWARM_SPEED in shared/index.ts\n- Should apply to all movement (bots inherit player speed)\n\n**Considerations:**\n- May need to adjust other mechanics (gravity strength, nutrient attraction)\n- Test interaction with event horizons (can players still escape?)\n- Verify game balance isn't broken by faster movement\n- May make stage 1 easier (can outrun threats more easily)\n\n**Testing:**\n- Play with new speeds and feel the difference\n- Test escaping from gravity wells\n- Test chasing/avoiding swarms\n- Ensure bots still function properly","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-18T19:06:53.824221-05:00","updated_at":"2025-11-19T10:16:38.762778-05:00","closed_at":"2025-11-19T10:16:38.762778-05:00","source_repo":"."}
{"id":"godcell-cfd","content_hash":"929b989808276ca29cb85831c8a55f38dda7c7b72bda0890636a5f8e1c9a0dda","title":"Add light swarm avoidance for single-cell bots","description":"Single-cell bots currently have zero swarm avoidance - they walk straight through swarms to get food. This is intentional (hungry bots!) but maybe too reckless.\n\nConsider adding a small emergency avoidance radius (80-150px) so bots try to juke when actually caught by a swarm. They're faster than swarms (403 vs 290 px/s) but once caught they get slowed to 241 px/s and can't escape.\n\n**Current state:**\n- No swarm avoidance at all\n- Swarm deaths: ~32/min\n- Bots walk through swarms, some survive, many don't\n\n**Possible tuning:**\n- Add `avoidSwarmsEmergencyOnly()` with 80-150px radius\n- Only triggers when nearly touching a swarm\n- Lets them juke to break contact and escape\n\n**Trade-off:**\n- More avoidance = fewer swarm deaths but maybe fewer collections\n- Current ecosystem is working (3 evolutions/min) so this is a minor tweak","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-25T17:29:10.771112-05:00","updated_at":"2025-11-25T17:29:10.771112-05:00","source_repo":".","labels":["ai","minor","tuning"]}
{"id":"godcell-cry","content_hash":"4aab7595d93236dc4b284a93fc0b46b3c264d1fb8d3f3287beb4db9f70dd5b7c","title":"Stage 2: Implement camera zoom and detection indicators","description":"When evolving to multi-cell stage, two key features are missing from the Phaser version:\n\n**1. Camera Zoom Out**\n- Stage 1: Close camera view (current viewport)\n- Stage 2+: Camera zooms out to show larger area\n- Multi-cells are bigger and need more screen real estate\n- Should feel like ascending to a higher perspective\n\n**2. Detection Indicators (Chemical Sensing)**\n- Multi-cells have MULTI_CELL_DETECTION_RADIUS (1800px) chemical sensing\n- Show on-screen indicators for detected entities outside viewport\n- Arrow/icon at screen edge pointing toward detected nutrients and cells\n- Shows entity type (nutrient vs cell) and maybe stage\n- Already have DetectionUpdateMessage from server with detected entities\n- Client needs to render these indicators on HUD\n\n**Files to modify:**\n- `client/src/render/three/ThreeRenderer.ts` - camera zoom logic\n- `client/src/render/hud/HUDOverlay.ts` or new detection indicator component\n- Listen for `detectionUpdate` messages from server\n\n**Success Criteria:**\n- Camera smoothly zooms out when evolving to Stage 2\n- Detection indicators appear at screen edges\n- Indicators point toward detected entities\n- Clear visual distinction between nutrient and cell indicators","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-22T00:30:02.563263-05:00","updated_at":"2025-11-22T13:27:30.600888-05:00","closed_at":"2025-11-22T13:27:30.600888-05:00","source_repo":"."}
{"id":"godcell-cxn","content_hash":"1ed4d8c7323d9833ce9278bd6fcfdaca21717a8bdd198c263b784b5ad2c0c577","title":"Redesign entropy swarms as 3D energy storm spheres","description":"Transform flat swarm sprites into 3D chaotic energy storms with turbulent particle effects.\n\n## Current State\n- Flat circle sprite (swarm body)\n- Orbiting particles around perimeter (6 particles)\n- Red/orange color scheme\n- Looks okay but lacks visual impact\n\n## Desired Visual: Energy Storm\n\n**3D Sphere with Chaotic Interior:**\n- **Outer boundary**: Semi-transparent sphere defining swarm volume\n  - Pulsing/breathing size animation\n  - Warped/distorted (not perfectly spherical)\n  - Electric red/orange color\n  - Crackling energy feel\n\n- **Inner particle storm**: Turbulent particles inside sphere\n  - Hundreds of small particles swirling chaotically\n  - Random velocities, collisions, turbulence\n  - Creates visual \"noise\" - dangerous, unstable\n  - High-energy feel (like a miniature star)\n  \n- **Orbiting particles** (keep current system):\n  - Keep the 6 orbiting particles outside\n  - Adds to \"energy field\" effect\n  - Could make them larger/more prominent\n\n- **Lightning/arcs** (optional enhancement):\n  - Occasional electrical arcs between internal particles\n  - Adds chaos and danger signal\n\n## Visual Reference\nThink: \n- Ball lightning\n- Contained plasma storm\n- Miniature unstable star\n- Dangerous energy anomaly\n\n## Technical Implementation\n\n**Outer Sphere:**\n```typescript\nconst swarmGeometry = new THREE.SphereGeometry(radius, 32, 32);\nconst swarmMaterial = new THREE.MeshPhysicalMaterial({\n  color: 0xff4400, // Red-orange\n  transparent: true,\n  opacity: 0.3,\n  emissive: 0xff4400,\n  emissiveIntensity: 0.8,\n  roughness: 1.0,\n});\n\n// Add vertex displacement for warped look\n// Or use custom shader for animated distortion\n```\n\n**Internal Particle Storm:**\n```typescript\n// Use THREE.Points for performance (hundreds of particles)\nconst particleCount = 200;\nconst particles = new THREE.BufferGeometry();\n\n// Random positions inside sphere\nconst positions = new Float32Array(particleCount * 3);\nfor (let i = 0; i \u003c particleCount; i++) {\n  // Random point in sphere\n  const theta = Math.random() * Math.PI * 2;\n  const phi = Math.random() * Math.PI;\n  const r = Math.random() * radius;\n  \n  positions[i * 3] = r * Math.sin(phi) * Math.cos(theta);\n  positions[i * 3 + 1] = r * Math.sin(phi) * Math.sin(theta);\n  positions[i * 3 + 2] = r * Math.cos(phi);\n}\n\nconst particleMaterial = new THREE.PointsMaterial({\n  color: 0xffaa00,\n  size: 2,\n  transparent: true,\n  blending: THREE.AdditiveBlending,\n});\n```\n\n**Animation:**\n- Particles swirl/rotate inside sphere (Perlin noise for turbulence)\n- Sphere pulsates in size (breathe effect)\n- Emissive intensity flickers (unstable energy)\n- Orbiting particles continue rotating\n\n**State-Based Visuals:**\n- **Patrol mode**: Slower particle movement, dimmer\n- **Chase mode**: Faster particles, brighter glow, more aggressive pulsing\n- Helps player read swarm behavior at a glance\n\n## Hierarchy\n```\nSwarmMesh (Group)\n├─ OuterSphere (bounding volume)\n├─ InternalStorm (particle system - hundreds of points)\n└─ OrbitingParticles (existing 6 particles - keep)\n```\n\n## Performance Considerations\n- Use `THREE.Points` instead of individual meshes for internal particles\n- Limit particle count (200-300 max per swarm, 18 swarms = ~3600 particles)\n- Use sprite textures for point materials\n- Reuse geometries across swarms\n- LOD: reduce particle count for distant swarms\n\n## Integration Points\n- Update `createSwarmMesh()` in `ThreeRenderer.ts`\n- Add `updateSwarmAnimation()` for particle turbulence\n- Update swarm state changes (patrol → chase visual transition)\n- Keep existing orbiting particle logic\n\n## Testing\n- Spawn all 18 swarms, check FPS\n- Verify \"energy storm\" feel is achieved\n- Test patrol vs chase visual differentiation\n- Confirm particles are contained within sphere\n- Check bloom interaction (should look glowy and dangerous)","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-21T11:10:04.183433-05:00","updated_at":"2025-11-21T14:30:13.583905-05:00","closed_at":"2025-11-21T14:30:13.583905-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-cxn","depends_on_id":"godcell-91l","type":"parent-child","created_at":"2025-11-21T11:10:04.185066-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-cxu","content_hash":"fae268fe2a8d72365f50ea9d12ead667b25d7714972673bdc61a760ab9e56642","title":"Add death animation - cells break into particles and fade","description":"Currently cells just disappear instantly on death. Would be much better if they broke apart into particles and faded out.\n\n**Desired Effect:**\n- When a cell dies, it should explode/fragment into particles\n- Particles scatter outward from death position\n- Particles fade out over ~0.5-1 second\n- Satisfying visual feedback for death moment\n\n**Implementation:**\n- Listen for playerDied events in renderer\n- Spawn particle system at death position using cell's color\n- Animate particles outward with velocity + fade\n- Clean up particles after animation completes\n\n**Biological/Thematic Connection:**\n- Information scattering back into the digital ocean\n- Cell membrane rupturing and dispersing\n- Visual confirmation of death without being too harsh","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-21T10:01:45.53154-05:00","updated_at":"2025-11-21T10:24:57.822298-05:00","closed_at":"2025-11-21T10:24:57.822298-05:00","source_repo":"."}
{"id":"godcell-d9z","content_hash":"6be1e96b5745ca046eefeaa5f64f702ee3000760ec4807e6148a55a9a3c7c8dd","title":"Scale transcendence animation - emergence from soup to jungle","description":"The trippy moment when a player evolves to Stage 3. Camera zooms out dramatically, body morphs from multi-cell cluster to 6-legged organism, visual effect of \"breaking the surface\" of the soup. This is the gateway experience between the two game modes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-25T00:26:08.866283-05:00","updated_at":"2025-11-25T14:17:23.943625-05:00","closed_at":"2025-11-25T14:17:23.943625-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-d9z","depends_on_id":"godcell-r85","type":"parent-child","created_at":"2025-11-25T00:27:31.751453-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-ddi","content_hash":"05a2e3038e6a045a82a060cbb766ff583c8ec7f2c9248e9a33630edb8f34e00e","title":"Reimplement Stage 2 multi-cell sprite in Three.js","description":"The Stage 2 multi-cell sprite (star cluster pattern - 6 overlapping circles, 96px radius) needs to be reimplemented now that we've migrated from Canvas to Three.js.\n\n**Original Design (from Canvas renderer):**\n- Star cluster sprite pattern\n- 6 overlapping circles arranged in a pattern\n- 96px total radius (4x larger than Stage 1's 24px)\n- Should look like a multi-cellular organism\n\n**Three.js Implementation Needed:**\n- Create geometry for the multi-cell pattern\n- Could use multiple sphere geometries arranged in cluster\n- Or custom BufferGeometry with merged circles\n- Should maintain the same visual feel as original\n- Scale to match MULTI_CELL_SIZE_MULTIPLIER (currently 4x)\n\n**Files:**\n- `client/src/render/three/ThreeRenderer.ts` - Main rendering logic\n- `shared/index.ts` - Size constants (MULTI_CELL_SIZE_MULTIPLIER)\n\n**Testing:**\n- Evolve to Stage 2 and verify sprite appears correctly\n- Check scaling matches expected 96px radius\n- Ensure it's visually distinct from Stage 1 single-cell\n\n**Reference:**\nPrevious Canvas implementation may still exist in git history if needed for visual reference.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-21T16:19:59.436171-05:00","updated_at":"2025-11-21T19:57:45.834219-05:00","closed_at":"2025-11-21T19:57:45.834219-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-ddi","depends_on_id":"godcell-6wj","type":"discovered-from","created_at":"2025-11-21T16:19:59.438236-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-dj6","content_hash":"fa11b450581657cc26121827a83e47e8c5278fb96bb77199dd4119eb8aa2e250","title":"Explore converting frontend to Three.js for 3D rendering","description":"Consider migrating from Phaser 3 to Three.js for a 3D rendered experience while maintaining the same 2D planar movement mechanics.\n\n**Concept:**\n- Keep the same top-down 2D movement and gameplay\n- Render everything in 3D (cells, trails, particles, obstacles, nutrients)\n- Could add depth and visual polish (3D cells, particle effects, camera angles)\n- Maintain the cyber/digital ocean aesthetic in 3D\n\n**Considerations:**\n- **Migration effort**: Rewrite entire rendering layer\n- **Performance**: Three.js vs Phaser for 2D gameplay\n- **Artistic vision**: Does 3D enhance or distract from gameplay?\n- **Learning curve**: Team familiarity with Three.js\n- **Mobile/web compatibility**: Three.js WebGL requirements\n\n**Potential Benefits:**\n- More visually impressive\n- Better particle effects and lighting\n- Could add subtle 3D depth to cells (spheres instead of circles)\n- Modern aesthetic\n\n**Risks:**\n- Significant rewrite of client code\n- May not actually improve gameplay experience\n- Could hurt performance on lower-end devices\n\nThis is exploratory - evaluate if the visual upgrade justifies the effort.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-18T13:11:56.599747-05:00","updated_at":"2025-11-20T18:04:45.485258-05:00","closed_at":"2025-11-20T18:04:45.485258-05:00","source_repo":"."}
{"id":"godcell-dng","content_hash":"5b1a822ab0d496bfa9f7887444bf07c6de6755847c5a1419280b005b1e72d1ef","title":"Distortion zones fade over time and respawn in different areas","description":"Make gravity distortions dynamic rather than static - they fade out and respawn elsewhere to create shifting danger zones.\n\n**Current Implementation:**\n- Distortions are static, spawned once at server start\n- Same danger zones persist throughout the game\n- Players can learn safe routes\n\n**Desired:**\n- Distortions have a lifespan (e.g., 2-5 minutes)\n- Visual fade-out warning before disappearing\n- New distortion spawns elsewhere after old one fades\n- Keeps total count constant (12 distortions)\n- Forces players to adapt to changing map\n\n**Implementation Notes:**\n- Add `spawnTime` and `lifetime` to Obstacle interface\n- Server checks for expired obstacles each tick\n- Broadcast `obstacleExpired` message for fade-out visual\n- Spawn new obstacle using same procedural generation logic\n- Client animates fade-out over 5-10 seconds\n\n**Benefits:**\n- Map feels alive and unpredictable\n- Can't memorize safe routes\n- Adds temporal strategy (wait for obstacle to fade vs risk it now)\n- Creates emergent moments (distortion fading opens new path)","status":"open","priority":3,"issue_type":"feature","created_at":"2025-11-18T11:06:33.758493-05:00","updated_at":"2025-11-18T11:06:33.758493-05:00","source_repo":"."}
{"id":"godcell-e06","content_hash":"fadc8f9861e39323d8e7fd3454b83e6abc7ccd6aac8f64857e4ecd4b3b8bc93e","title":"Soup pools visible from jungle perspective","description":"Multiple soup pools scattered across the jungle as visual landmarks. These serve as spawn points where Stage 3 players emerge from. Purely cosmetic/atmospheric - Stage 3 cannot interact with Stage 1-2 players (they've transcended that scale). Visual: tiny glowing puddles with faint microscopic activity inside.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-25T00:26:28.826923-05:00","updated_at":"2025-11-25T14:17:30.462975-05:00","closed_at":"2025-11-25T14:17:30.462975-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-e06","depends_on_id":"godcell-r85","type":"parent-child","created_at":"2025-11-25T00:28:36.87841-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-e2v","content_hash":"59f9fd76716f576e42041b9a630e4bc4df62ebd30b0385dc81085ae64f8afd42","title":"Move health/energy text inside the UI bars","description":"Current health and energy text displays outside/above the bars. Move the text inside the bars for cleaner UI.\n\n**Current:**\n```\nHealth: 69/100\n[████████          ]\nEnergy: 0/250\n[                  ]\n```\n\n**Desired:**\n```\n[████ 69/100 ████  ]\n[     0/250        ]\n```\n\n**Implementation:**\n- Center text vertically within bar height\n- Ensure text is readable (white/cyan color with good contrast)\n- Position text centered horizontally in bar","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-18T10:44:29.944-05:00","updated_at":"2025-11-19T11:20:24.201803-05:00","closed_at":"2025-11-19T11:20:24.201803-05:00","source_repo":"."}
{"id":"godcell-e9h","content_hash":"4684168422182c59f9f4c3789b4010239240da636e88fa889b571b307751d40b","title":"Upgrade nutrient visuals to 3D","description":"Nutrients are the last entity type still using basic 2D visuals. Everything else (cells, swarms, obstacles) got 3D upgrades - nutrients are next.\n\n**Current State:**\n- Simple flat circles/shapes\n- No depth or dimensionality\n- Looks out of place next to 3D cells and swarms\n\n**Desired:**\n- 3D crystalline or organic shapes\n- Glow/bloom effects consistent with other entities\n- Maybe different visual tiers based on nutrient value\n- Should feel like collectible energy packets in the digital ocean\n\n**Possible Approaches:**\n- Glowing 3D polyhedra (icosahedron, octahedron)\n- Pulsing energy orbs with particle effects\n- Crystalline shards with refraction\n- Organic droplets/blobs","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-22T00:03:24.291548-05:00","updated_at":"2025-11-25T08:25:22.032278-05:00","closed_at":"2025-11-25T08:25:22.032278-05:00","source_repo":"."}
{"id":"godcell-eef","content_hash":"e6c4a8d430887235a3b8c4704ec3dd31e67e39503dd794071382f9f862009a13","title":"Fix spawn logic - players spawning in same location","description":"Currently all players and bots spawn at the exact same coordinates, causing clustering and immediate collisions.\n\n**Current Bug:**\n- Spawn logic defaults to same position for all entities\n- Players spawn on top of each other\n- Bots cluster at spawn point\n- Creates unfair initial conditions\n\n**Expected Behavior:**\n- Each player/bot spawns at a random, unique location\n- Minimum separation distance between spawn points\n- Avoid spawning near gravity distortions (existing safe spawn check should work)\n- Avoid spawning near swarms\n- Spread entities across the world for initial diversity\n\n**Implementation:**\n- Randomize spawn positions properly\n- Validate spawn points for safety (no obstacles/swarms nearby)\n- Add minimum separation distance between spawns (e.g., 300-500px)\n- Test with 15 bots + multiple players\n\n**File:** `server/src/index.ts` - spawn logic for players and bots","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-21T16:03:55.043942-05:00","updated_at":"2025-11-22T00:03:46.07764-05:00","closed_at":"2025-11-22T00:03:46.07764-05:00","source_repo":"."}
{"id":"godcell-ek4","content_hash":"cddaa6e1744ecd0ccd0fc2c8639f5a81609eac3951624abc9eb86bdfc2134234","title":"Shrink Stage 1 cells to make Stage 2 evolution feel like order of magnitude growth","description":"Currently Stage 1 → Stage 2 evolution is 24px → 96px (4x). Should feel like an order of magnitude transformation.\n\n**Proposed Changes:**\n- Reduce Stage 1 size: 24px → 16px or 18px radius\n- Keep Stage 2 at 96px (or even increase to 120px)\n- Creates more dramatic size difference (5-6x instead of 4x)\n- Makes evolution feel like a massive power-up\n\n**Visual Impact:**\n- Stage 1 cells feel small and vulnerable (appropriate for single-cell)\n- Stage 2 cells feel huge and intimidating (appropriate for predator)\n- Clear visual hierarchy: \"I used to be that small, now I'm massive\"\n\n**Balance Considerations:**\n- Smaller Stage 1 hitbox = harder to hit with nutrients?\n- Easier to dodge swarms?\n- Test if it makes Stage 1 too easy/hard\n\n**Files:**\n- `shared/index.ts` - PLAYER_SIZE constant\n- `shared/index.ts` - MULTI_CELL_SIZE_MULTIPLIER (adjust if needed)\n\n**Testing:**\n- Try 18px first, then 16px if we want even more dramatic\n- Ensure readability at small size\n- Check collision detection still feels fair","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-21T16:04:18.591877-05:00","updated_at":"2025-11-22T01:08:56.844201-05:00","closed_at":"2025-11-22T01:08:56.844201-05:00","source_repo":"."}
{"id":"godcell-f6c","content_hash":"38520fab3ec39ff0885328d78daf6a7a1e251902beded9350c5c460a917bf655","title":"Redesign gravity distortion fields as 3D layered danger zones","description":"Replace flat gravity field sprites with 3D volumetric distortion zones that clearly communicate layered danger levels.\n\n## Current State\n- Flat concentric circles (event horizon, core)\n- Purple gradient color\n- Event horizon: pull effect, not lethal\n- Core (inner 20%): instant death singularity\n- Hard to distinguish danger zones at a glance\n\n## Problem\nPlayers don't immediately recognize that the **inner core is instant death** vs outer field is just gravitational pull. Visual language needs to be clearer.\n\n## Desired Visual: Layered 3D Distortion Field\n\n**Multi-Layer Sphere Structure:**\n\n**Layer 1 - Outer Influence Zone (safe but pulls):**\n- Large semi-transparent sphere\n- Subtle distortion effect (space warping)\n- Purple/blue color, low opacity (0.15)\n- Particle field flowing inward (shows gravity direction)\n- Safe to traverse, just slows you down\n\n**Layer 2 - Event Horizon (danger zone):**\n- Medium sphere (60% of outer radius)\n- Brighter, more turbulent\n- Purple/magenta, higher opacity (0.4)\n- Particles accelerating inward\n- Crossing this is risky but survivable\n\n**Layer 3 - Singularity Core (INSTANT DEATH):**\n- Small dense sphere at center (20% of outer radius)\n- **Extremely bright and ominous**\n- Deep black center with violent purple/white edge glow\n- Particle annihilation effect at boundary\n- **CLEARLY DANGEROUS** - no ambiguity\n- Should look like \"do not touch under any circumstances\"\n\n**Visual Hierarchy:**\n```\nOuter (safe-ish) → Medium (risky) → Inner (DEATH)\nTranslucent → Brighter → Blindingly bright/dark\nCalm → Turbulent → Violent\n```\n\n## Technical Implementation\n\n**Three Concentric Spheres:**\n```typescript\n// Outer influence zone\nconst outerGeometry = new THREE.SphereGeometry(influenceRadius, 32, 32);\nconst outerMaterial = new THREE.MeshPhysicalMaterial({\n  color: 0x8844ff,\n  transparent: true,\n  opacity: 0.15,\n  emissive: 0x6622cc,\n  emissiveIntensity: 0.3,\n});\n\n// Event horizon (60% radius)\nconst horizonGeometry = new THREE.SphereGeometry(influenceRadius * 0.6, 32, 32);\nconst horizonMaterial = new THREE.MeshPhysicalMaterial({\n  color: 0xaa44ff,\n  transparent: true,\n  opacity: 0.4,\n  emissive: 0x8844ff,\n  emissiveIntensity: 0.8,\n});\n\n// Singularity core (20% radius) - DANGER\nconst coreGeometry = new THREE.SphereGeometry(influenceRadius * 0.2, 32, 32);\nconst coreMaterial = new THREE.MeshStandardMaterial({\n  color: 0x220011, // Near black\n  emissive: 0xff00ff, // Violent magenta\n  emissiveIntensity: 3.0, // BRIGHT\n});\n```\n\n**Particle Effects:**\n```typescript\n// Particles flowing inward (spiral toward core)\n// Density increases closer to center\n// Particles \"vanish\" when reaching core (annihilation)\n\n// Outer layer: Slow drift\n// Middle layer: Faster acceleration\n// Core boundary: Violent collision/destruction\n```\n\n**Visual Enhancements:**\n- **Space distortion shader**: Warp background around field (lensing effect)\n- **Pulsing animation**: Core pulses ominously\n- **Color gradient**: Outer cool purple → Inner hot magenta/white\n- **Bloom interaction**: Core blooms intensely (clearly visible from afar)\n\n## Hierarchy\n```\nGravityFieldMesh (Group)\n├─ OuterInfluence (large sphere, translucent)\n├─ EventHorizon (medium sphere, brighter)\n├─ SingularityCore (small sphere, VIOLENT GLOW)\n└─ ParticleSystem (spiraling inward particles)\n```\n\n## Danger Communication\n\n**At a glance, player should know:**\n- \"Purple misty area\" = Gravity field, be careful\n- \"Bright purple sphere\" = Dangerous, don't get too close\n- \"BLAZING bright/dark core\" = INSTANT DEATH, avoid completely\n\n**Color-coded safety:**\n- Outer: Cool blue-purple (caution)\n- Middle: Hot purple (danger)\n- Inner: Magenta/white/black (DEATH)\n\n## Risk/Reward High-Value Nutrients\n- Nutrients near outer field: Visible, clearly risky but tempting\n- Nutrients near core: \"You'd have to be insane\" positioning\n- 3D visuals make risk assessment easier (can see depth to core)\n\n## Performance\n- 3 spheres per obstacle × 12 obstacles = 36 meshes (acceptable)\n- Particle system reused across obstacles\n- Use instanced rendering if needed\n- LOD: simplify distant obstacles\n\n## Integration Points\n- Update `createObstacleMesh()` in `ThreeRenderer.ts`\n- Add layered sphere creation\n- Implement particle spiral effect\n- Update gravity calculation visualization (already works, just new visuals)\n- Test with high-value nutrient positioning\n\n## Testing\n- Stand at each layer boundary, verify visual clarity\n- Confirm core is unmistakably dangerous\n- Test from various distances (readable when zoomed out?)\n- Check FPS with all 12 obstacles rendered\n- Verify color-blind accessibility (brightness/intensity matters more than hue)\n\n## Success Criteria\n- New player instantly recognizes core = death\n- Layer boundaries are visually distinct\n- Looks awesome and ominous (attracts curiosity while warning of danger)\n- Performance remains 60fps","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-21T11:10:09.985196-05:00","updated_at":"2025-11-21T15:29:05.89428-05:00","closed_at":"2025-11-21T15:29:05.89428-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-f6c","depends_on_id":"godcell-91l","type":"parent-child","created_at":"2025-11-21T11:10:09.987097-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-f8c","content_hash":"53ff32c7a0426eab1a28f3461df5c4fd3c34faa033f54ba8755134a7171d903e","title":"Increase all entity speeds by ~20%","description":"Game feels a bit slow. Increase movement speed across the board to make it feel more responsive and dynamic.\n\n**Changes:**\n- Increase `PLAYER_SPEED` by 20% (336 → ~403)\n- Increase `SWARM_SPEED` by 20% (242 → ~290)\n- Keep relative speed ratios the same (players still faster than swarms)\n- May need to adjust movement friction to compensate\n- Test feel with bots and multiple players\n\n**Tuning:**\n- If too fast, dial back to 10-15% increase\n- Watch for control issues or loss of precision\n- Ensure gravity wells still feel dangerous (can you escape?)\n\n**File:** `shared/index.ts` - GAME_CONFIG constants","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-21T16:04:12.70948-05:00","updated_at":"2025-11-22T01:09:08.353233-05:00","closed_at":"2025-11-22T01:09:08.353233-05:00","source_repo":"."}
{"id":"godcell-fhka","content_hash":"f85fa78225b84378cfd40de8c0e2c47064b49e306d91ba066f5f1a5e31b26ff8","title":"Refactor applyDamageWithResistance to separate concerns","description":"The applyDamageWithResistance function mixes three concerns:\n1. Dev tool check (god mode immunity)\n2. Game logic (stage-based damage resistance calculation)\n3. State mutation (writing to EnergyComponent)\n\nShould be refactored to separate:\n- God mode check at a higher level (e.g., a canTakeDamage predicate or component)\n- Pure damage calculation function (input: baseDamage, stage → output: actualDamage)\n- State mutation kept explicit at call sites","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-29T19:29:34.098125-05:00","updated_at":"2025-11-29T20:30:03.505014-05:00","closed_at":"2025-11-29T20:30:03.505014-05:00","source_repo":".","labels":["architecture","ecs"]}
{"id":"godcell-fte","content_hash":"52ace18b7faa0cf268524f819ec8495c903ed0ad4c608beaca0e959ef4089077","title":"Scale nucleus glow intensity with maxEnergy (evolution progress indicator)","description":"Make nucleus glow brighter as maxEnergy increases, so cells approaching evolution thresholds radiate intensely.\n\n## Current Behavior\nNucleus emissive intensity is based only on current energy level:\n- High energy (\u003e50%): emissiveIntensity = 2.5\n- Medium energy (20-50%): emissiveIntensity = 1.4-2.0\n- Low energy (10-20%): emissiveIntensity = 0.12-0.7 (flickering)\n- Critical (\u003c10%): emissiveIntensity = 0.2-1.0 (pulsing)\n\nMaxEnergy is not considered, so a Stage 1 cell at 100/100 energy looks the same as a Stage 1 cell at 100/250 energy (close to evolution).\n\n## Desired Behavior\nNucleus glow should scale with maxEnergy to show evolution progress:\n- **Stage 1 (100 maxEnergy)**: Base glow (current behavior)\n- **Approaching Multi-Cell (250 maxEnergy)**: Nucleus radiates 2-3x brighter\n- **Approaching Cyber-Organism (500 maxEnergy)**: Even more intense\n- **Approaching Humanoid (1000 maxEnergy)**: Brilliant radiance\n- **Approaching Godcell (2000 maxEnergy)**: Transcendent glow\n\nEvolution thresholds (from shared/index.ts):\n- EVOLUTION_MULTI_CELL: 250\n- EVOLUTION_CYBER_ORGANISM: 500\n- EVOLUTION_HUMANOID: 1000\n- EVOLUTION_GODCELL: 2000\n\n## Implementation Approach\nIn `updateCellEnergy()` (ThreeRenderer.ts:889), calculate a maxEnergy multiplier and apply it to emissiveIntensity:\n\n```typescript\nconst evolutionProgress = maxEnergy / GAME_CONFIG.EVOLUTION_MULTI_CELL; // 1.0 at 250, 2.0 at 500, etc.\nconst glowMultiplier = 1.0 + evolutionProgress * 0.5; // 1.0 → 1.5 → 2.0 → etc.\n\n// Apply to all energy states\nnucleusMaterial.emissiveIntensity = baseIntensity * glowMultiplier;\n```\n\n## Visual Impact\n- Cells collecting nutrients will gradually start to glow brighter\n- Players can visually identify which cells are close to evolving\n- Creates a natural \"power up\" effect as you progress\n- Makes evolution moments more dramatic (sudden glow reset when evolving)\n\n## File Location\n`client/src/render/three/ThreeRenderer.ts` - `updateCellEnergy()` method around line 889","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-21T12:54:07.191362-05:00","updated_at":"2025-11-22T01:09:23.102128-05:00","closed_at":"2025-11-22T01:09:23.102128-05:00","source_repo":"."}
{"id":"godcell-fyr","content_hash":"8e8a10ce68763aaeaf6cd00a93e0340ce47633c8f9e85c2740bcb85e4679132e","title":"Stage 5 Godcell: Alien-Angels \u0026 The Final Passage","description":"Design vision for Stage 5 Godcell - transcendent beings with maximal agency and one final challenge.\n\n## The Perspective Shift\n\n- Stage 4: First-person, grounded, embodied\n- Stage 5: **Third-person, full 3D flight**, liberated from the ground\n\nYou've transcended embodiment. No longer *in* the world looking out—you're *above* it, moving through all three dimensions freely. A floating, flying entity.\n\n## The Godcell Form: Alien-Angels\n\nAesthetic inspiration: **Neon Genesis Evangelion angels**\n\n- Procedurally generated transcendent beings\n- Post-humanoid—no longer bound to human shape\n- Geometric? Organic? Both? Incomprehensible to lower stages\n- Beautiful and terrifying\n- Each godcell is unique\n\n**Generation factors:**\n- Random cosmic variance\n- Primary source(s) of their Signal/Experience\n- The mix of their Signal sources throughout Stage 4\n\nA hunter-godcell looks different from a builder-godcell looks different from a wanderer-godcell. Your path shapes your transcendent form.\n\n## Maximal Agency\n\nGodcells have *choice* in a way no other stage does:\n- Fly anywhere in full 3D space\n- Return to the soup (as a god visiting the primordial)\n- Engage with humanoids, creatures, lower stages\n- Observe, interact, influence (mechanics TBD)\n- Or ignore it all and begin the ascent\n\nBut eventually... the God-Mind calls. You *can* linger, but you *will* move on.\n\n## Another Awareness Expansion\n\nA new layer of reality becomes visible:\n- Humanoids can *glimpse* this layer as they accumulate Signal\n- Godcells *see* it fully\n- What IS this layer? **Open question - needs more cooking**\n\nPossibilities to explore:\n- The raw Signal substrate (seeing information itself)\n- Other godcells (always present, only now visible)\n- The God-Mind as a presence/direction\n- Entropy's true form revealed\n- The web of connections between all living things\n\n## The Final Obstacle: Rite of Passage\n\n**This is not a victory lap.**\n\nBetween godcell and God-Mind stands a final challenge—a rite of passage.\n\n**The purpose:** Godcells protect the field where Stages 1-4 play out. The final obstacle IS that protection. To join the God-Mind, you must prove yourself by defending the world you came from.\n\n**The form:** A final battle against Entropy and Noise at epic, cosmic scale.\n- Not the swarms and patches of lower stages\n- Entropy in its true, vast, terrifying form\n- The ultimate expression of chaos vs coherence\n\n**The meaning:** You don't just *escape* the world—you *defend* it. Transcendence isn't abandonment; it's guardianship. To become one with the God-Mind, you must first stand between creation and entropy.\n\n## Open Design Questions\n\n- [ ] What IS the new perceptual layer godcells see?\n- [ ] How do godcells interact with lower stages? (observe? buff? challenge? ignore?)\n- [ ] What does the final entropy battle look like mechanically?\n- [ ] Can godcells fail the rite of passage? (death → back to Stage 1?)\n- [ ] How do multiple godcells interact? (cooperation in the final battle?)\n- [ ] What's the journey to the God-Mind like after passing?\n- [ ] Loop mechanics—what changes on subsequent runs?","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-26T20:12:32.947246-05:00","updated_at":"2025-11-26T20:12:32.947246-05:00","source_repo":".","labels":["design","stage-5","vision"],"dependencies":[{"issue_id":"godcell-fyr","depends_on_id":"godcell-3zkl","type":"parent-child","created_at":"2025-11-29T21:07:33.9714-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-g2i","content_hash":"bb6156cc80fd891f750a2ebd4449689ba9118c4eae95420eb215006f3b0b5011","title":"Restore particle effects on entropy swarms","description":"Entropy swarms currently render as plain transparent circles. Need to bring back particle effects (glitch/static visual, flowing particles, or similar to make them look dangerous/viral).","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-21T09:29:44.600947-05:00","updated_at":"2025-11-21T10:34:03.97621-05:00","closed_at":"2025-11-21T10:34:03.97621-05:00","source_repo":"."}
{"id":"godcell-g5c","content_hash":"e57cd875833d9897172dc2030c65baeedcbfbf20e4932855dfd44d15eba047d3","title":"Generative procedural algorithms for stage 3+ being models","description":"Explore procedural/generative algorithms for creating unique visual models for stage 3+ beings (cyber-organism, humanoid, godcell). Especially important for godcells, which should feel truly unique and alien—each one visually distinct rather than templated.\n\nPotential approaches:\n- L-systems or fractal growth patterns\n- Wave function collapse for structural generation\n- Noise-based morphing/deformation\n- Emergent geometry from evolution history (what nutrients consumed, how they evolved, etc.)\n- Shader-based procedural detail layers\n\nGoal: Each advanced being feels like a one-of-a-kind evolved entity, not a reskinned prefab.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-25T22:32:12.31645-05:00","updated_at":"2025-11-25T22:32:12.31645-05:00","source_repo":"."}
{"id":"godcell-gbr","content_hash":"d19141633549c2f2aecfa65e1725556142c0f270ce71db52958ef65297dcfd8f","title":"Multi-scale server architecture","description":"How does the server handle both soup and jungle scales? Since Stage 3 cannot interact with Stage 1-2, these could be completely separate simulations. Options: separate world instances with player transfer on evolution, same server with isolated entity pools. Simpler than cross-scale interaction.","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-25T00:27:01.700616-05:00","updated_at":"2025-11-25T00:28:43.453273-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-gbr","depends_on_id":"godcell-r85","type":"parent-child","created_at":"2025-11-25T00:28:17.280804-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-gin","content_hash":"4c5397bbbd045d62661c683e8bf39fdfb30b2675f26e83159091a4e1728bcd80","title":"Create core/input modules (InputManager, InputState)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:21:51.173137-05:00","updated_at":"2025-11-19T21:30:59.398924-05:00","closed_at":"2025-11-19T21:30:59.398924-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-gin","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:21:51.174403-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-gj6","content_hash":"dacb01e9028160fcafbea42812f476599d5615ae709e4733651cf86f5be8055d","title":"Add character persistence across sessions","description":"Players should be able to log off and log back in to continue where they left off (position, energy, evolution stage, nutrients collected) as long as they haven't died. Currently all state is lost on disconnect.\n\nThis will require:\n- Database to store player state (likely SQLite or PostgreSQL)\n- Player identification/authentication system (simple username? tokens?)\n- Save state on disconnect\n- Load state on reconnect\n- Game design decisions about offline survival (do you starve while offline? are you vulnerable? or do you \"pause\" when disconnected?)","design":"**Offline Stasis Mechanic:**\n\nWhen a player disconnects, they enter a stasis state with drastically reduced (but not eliminated) energy decay.\n\n**Target offline survival time: ~7 days**\n- Single-cells are fragile - it feels right that they can't just log off and expect to stay alive indefinitely\n- 7 days gives casual players a reasonable window without making offline survival trivial\n- Death while offline is a legitimate risk for the unprepared\n\n**Decay Scaling by Evolution Stage:**\n- Could scale with evolution (single-cells: 3-5 days, godcells: weeks)?\n- Or flat 7 days across all stages for simplicity?\n- TBD during implementation/playtesting\n\n**Technical Implementation:**\n- Daily cron job processes offline players\n- Calculate: offline_hours × stasis_decay_rate\n- Apply accumulated decay to energy\n- If energy \u003c= 0: mark player as dead, reset to single-cell\n- Store last_update timestamp with player state\n\n**Design Philosophy:**\n- Offline isn't safe - the universe doesn't pause for you\n- But it shouldn't punish people for having lives\n- 7 days = casual-friendly but still creates survival tension","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-18T14:43:00.319437-05:00","updated_at":"2025-11-18T14:48:33.268242-05:00","source_repo":"."}
{"id":"godcell-gt2","content_hash":"86458eaae8483e76c76fab8c33bc6bf4ce71291f5c2c1100357ca86f4f333021","title":"Update predation mechanics (server)","description":"Update predation logic in server/src/index.ts:\n- Update `engulfPrey`: set `prey.energy = 0` instead of health\n- Update `checkPredationCollisions`: use `player.energy` checks\n- Update `checkPseudopodCollision`: use `prey.health` → `prey.energy` checks\n- Update energy broadcast to remove health field from EnergyUpdateMessage\n\nSee history/ENERGY_ONLY_SPEC.md sections: \"Server Changes #6 and #10\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-22T23:22:55.395546-05:00","updated_at":"2025-11-24T19:00:19.315849-05:00","closed_at":"2025-11-24T19:00:19.315849-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-gt2","depends_on_id":"godcell-20o","type":"blocks","created_at":"2025-11-22T23:22:55.396815-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-h0x","content_hash":"442e623fd7b7da2592c5503cb44ff040803af8b4d320d572219bf680965b475d","title":"Create minimal world/map","description":"Start with something simple - maybe just a small area with some boundaries.\nCould be a single room, small town, or abstract space.\nLo-fi aesthetic - doesn't need to be pretty, just functional and charming.","design":"**GODCELL - Digital Primordial Soup**\n\nGame concept: Players are cyber-cells evolving toward transcendence/godhood.\n\nFirst world aesthetic:\n- Digital \"water\" - flowing data streams and particles\n- Tron meets microscopic life\n- Dark void with glowing neon elements\n- Grid-like structure but organic/flowing\n- Particles representing data nutrients\n- Players as glowing cyber-cells (circles, not squares)\n\nVisual elements to implement:\n- Flowing particle background system\n- Grid or flowing line pattern\n- Change player rendering to circular cells\n- Glowing/pulsing effects\n- Ambient data streams flowing past","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-17T08:57:59.121196-05:00","updated_at":"2025-11-17T19:05:02.825113-05:00","closed_at":"2025-11-17T16:10:13.938013-05:00","source_repo":"."}
{"id":"godcell-h73","content_hash":"905f28527da35ab4115842c308892f7205efe743e349fdfe99f1f82f51ee8cfc","title":"ECS: Migrate cooldowns (playerEMPCooldowns, playerPseudopodCooldowns)","description":"Migrate playerEMPCooldowns and playerPseudopodCooldowns Maps to use CooldownsComponent (already exists in shared/ecs/components.ts).\n\nFiles to change:\n- server/src/abilities.ts - main usage (get/set cooldowns)\n- server/src/index.ts - Map declarations, buildGameContext\n- server/src/ecs/systems/GameContext.ts - remove from interface\n- server/src/ecs/factories.ts - add getCooldownsBySocketId helper if needed\n\nCooldownsComponent structure:\n```typescript\ninterface CooldownsComponent {\n  lastEMPTime?: number;\n  lastPseudopodTime?: number;\n}\n```\n\nPattern: Replace `playerEMPCooldowns.get(id)` with `getCooldownsBySocketId(world, id)?.lastEMPTime`","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T16:26:55.602339-05:00","updated_at":"2025-11-29T16:33:11.955671-05:00","closed_at":"2025-11-29T16:33:11.955671-05:00","source_repo":".","labels":["ecs-migration","phase-5"]}
{"id":"godcell-hih0","content_hash":"b96b540a65da797ded48862e6e61be9a4fece1ad992375840922ac2b306ec627","title":"Procedural humanoid geometry (replace GLB)","description":"Replace `Xbot.glb` external model with procedural Three.js primitives to maintain consistent aesthetic with other stages.\n\n**Current state:**\n- `HumanoidRenderer.ts` loads `Xbot.glb` via GLTFLoader\n- External file dependency\n- Animation via skeletal animation clips\n\n**Proposed approach:**\nBuild a stylized cyber-humanoid using Three.js primitives:\n- **Head**: Sphere or octahedron (angular = more cyber)\n- **Torso**: Box or tapered cylinder\n- **Limbs**: Cylinders or capsules (arms, legs)\n- **Joints**: Small spheres at shoulders, elbows, hips, knees\n- **Details**: Glowing \"core\" in chest, energy lines along limbs\n\n**Animation strategy:**\nInstead of skeletal animation from GLB:\n- Programmatic bone transforms (simple IK or keyframe-style)\n- Procedural idle breathing/sway\n- Walk/run cycles built from sine waves on joint angles\n\n**Tradeoffs:**\n\n| GLB (current) | Procedural |\n|---------------|------------|\n| Smoother, realistic animation | More robotic/geometric look |\n| External file dependency | Self-contained code |\n| Hard to customize | Easy to tweak proportions/style |\n| One-time load | Zero load time |\n\n**Aesthetic fit:**\n- Matches existing procedural geometry (cells, organisms)\n- Cyber-glow aesthetic easier to achieve procedurally\n- Can add energy veins, pulsing cores, angular geometry\n- Fits GODCELL's digital/synthetic visual language\n\n**Files:**\n- `client/src/render/three/HumanoidRenderer.ts` - replace GLB loading with procedural generation\n- Keep same API: `createHumanoidModel`, `updateHumanoidAnimation`, etc.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-29T21:30:37.558188-05:00","updated_at":"2025-11-29T21:30:37.558188-05:00","source_repo":".","labels":["aesthetics","rendering","stage-4"],"dependencies":[{"issue_id":"godcell-hih0","depends_on_id":"godcell-jp7r","type":"parent-child","created_at":"2025-11-29T21:30:47.64164-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-hkz","content_hash":"f6c46d05b8efabd07d248530c40d3a3a927246175fbba929a734158cbc6aa324","title":"Tighten single-cell movement handling","description":"Post-Three.js migration, single-cell movement feels looser than it should. Need to re-tune momentum/responsiveness for tighter handling.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-21T09:29:27.219009-05:00","updated_at":"2025-11-21T09:58:40.731547-05:00","closed_at":"2025-11-21T09:58:40.731547-05:00","source_repo":"."}
{"id":"godcell-hvh","content_hash":"8593352427bec7e983091392fad1f8abd0a70f94331ac37db5460fc565adb509","title":"Stage 4 Humanoid: First-Person Experience \u0026 Transcendence Design","description":"Design vision for Stage 4 Humanoid gameplay - the \"intelligence awakening\" stage where the game fundamentally shifts.\n\n## The Perspective Shift\n\nStage 4 transitions from top-down to **first-person** (Three.js PerspectiveCamera).\n\n- Stages 1-3: God-view. You observe yourself from outside.\n- Stage 4: Embodied. You're *inside* a body, looking *out*.\n\nThis mirrors sapience—being a subject, not just an object. It also creates vulnerability: blind spots, threats from behind, needing to *look* to *see*. Terrifying in a permadeath game.\n\n## The Humanoid Form\n\nEvolved digital being with variable procedural morphology:\n- Bipedal stance\n- 2 or 4 arms (gameplay implications TBD)\n- Cycloptic or binocular eyes (FOV/perception differences TBD)\n- Head, humanoid silhouette\n- Cyber-aesthetic: glowing energy lines, digital flesh, proto-god appearance\n\nOpen question: Is variation random at evolution, or influenced by how you played Stage 3?\n\n## The Dual Resource System\n\n**Energy** — Survival Constraint\n- Scarce, specific sources (primarily hunting beasts with energy spears)\n- Keeps you alive—you MUST engage with the world to not starve\n- Forces you out of hiding, into risk\n- Same metabolic pressure as earlier stages, but different scale\n\n**Experience** — Progression Currency\n- Universal: EVERYTHING contributes\n- Build? Experience. Hunt? Experience. Cooperate? Experience. Explore? Experience.\n- The path to godhood is YOUR path\n- You simply have to *live* enough to transcend\n\nThis enables playstyle diversity:\n- **The Hunter** — energy-rich, experience through kills and mastery\n- **The Builder** — scrapes by on energy, experience through creation\n- **The Wanderer** — careful energy management, experience through discovery\n- **The Social** — trades, cooperates, experience through connection\n\n## The Philosophical Core\n\nStage 4 is about **sense-making and meaning-making**.\n\n| Stage | Mode of Being | Core Activity |\n|-------|---------------|---------------|\n| 1. Single-Cell | Reactive | Flee, consume, survive |\n| 2. Multi-Cell | Predatory | Hunt, dominate, expand |\n| 3. Cyber-Organism | Combative | Fight, compete, territory |\n| 4. Humanoid | **Interpretive** | Understand, create, mean |\n| 5. Godcell | Transcendent | Become truth itself |\n\nThe humanoid doesn't just survive the ecosystem—they *comprehend* it.\n\n## Transcendence Through Experience\n\n\"Energy is survival. Experience is transcendence.\"\n\n- Energy keeps you alive (biological, thermodynamic)\n- Experience makes you *real* (cognitive, philosophical)\n\nYou don't just *collect* experience—you *metabolize* it. Turn events into understanding. Integrate them into what you are.\n\nA humanoid who survives a thousand hunts but learns nothing stays a humanoid forever. A humanoid who metabolizes what happens to them—who extracts signal from the noise of existence—becomes a godcell.\n\n**A godcell isn't someone who ate the most. It's someone who lived the most.**\n\n## Open Design Questions\n\n- [ ] What generates Experience? (all actions, but weighted differently?)\n- [ ] What do humanoids hunt? (Stage 3 organisms? New macro-fauna? Each other?)\n- [ ] What can they build? (shelters, traps, monuments, beacons?)\n- [ ] Is there society? (communication, trade, tribes, rituals?)\n- [ ] What does entropy look like at humanoid scale?\n- [ ] How does variable morphology affect gameplay?\n- [ ] Experience threshold for Godcell evolution?","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-26T19:56:59.092376-05:00","updated_at":"2025-11-26T19:56:59.092376-05:00","source_repo":".","labels":["design","stage-4","vision"],"dependencies":[{"issue_id":"godcell-hvh","depends_on_id":"godcell-jp7r","type":"parent-child","created_at":"2025-11-29T21:07:22.598686-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-hx1","content_hash":"3a4937b830e2e83965e10a5da74ab218e16cca5cfe00d94927f6fdb0eb17aa40","title":"Implement AI/bot players for multiplayer testing","description":"Add AI-controlled players (bots) to test multiplayer dynamics and resource competition before real multiplayer sessions.\n\n**Purpose:**\n- Feel what it's like with multiple players competing\n- Test nutrient scarcity and competition mechanics\n- Observe emergent territorial behavior\n- Validate that stage 1 gameplay is fun with competition\n\n**Bot Behaviors:**\n- Movement: Navigate the world (simple pathfinding or random walk?)\n- Nutrient collection: Seek and collect nearby nutrients\n- Collision avoidance: Don't clump up or get stuck\n- Evolution: Should bots evolve if they collect enough nutrients?\n- Visual distinction: Clearly identifiable as bots vs human players\n\n**Initial Scope:**\n- Start with 3-5 bots for testing\n- Simple AI is fine - they don't need to be smart, just active\n- Server-side simulation (same as real players from client perspective)\n\n**Open Questions:**\n- How sophisticated should the AI be? (simple seeking vs strategic?)\n- Should bots interact with entropy swarms?\n- Do bots fight back if we add combat?\n- Should there be a toggle to enable/disable bots?","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-18T08:19:25.774925-05:00","updated_at":"2025-11-19T09:21:45.552224-05:00","closed_at":"2025-11-19T09:21:45.552224-05:00","source_repo":"."}
{"id":"godcell-hyx","content_hash":"7b7ffc7956f68b2c1c3f27caf24cdd08e7faea6f832aa4c41d766c7c03627ec1","title":"Design and implement proper death/respawn flow","description":"Currently when a player dies, the camera stops tracking them and the game state is unclear. Need to properly design the death/respawn experience.\n\n**Current Bug:**\n- After death, camera doesn't follow the player anymore\n- No clear feedback about what happened\n- No explicit respawn mechanism\n\n**Desired Flow:**\n- Player dies (health reaches zero or starvation)\n- Show Death UI screen with:\n  - Death message/stats (how did you die? how long did you survive? nutrients collected?)\n  - Respawn button\n  - Maybe: death animation/transition (dilution effect from design doc?)\n- Player clicks Respawn\n- Respawn as single-cell at random location\n- Camera tracks new player entity\n- All progress reset (back to stage 1)\n\n**Design Questions:**\n- Should there be a respawn delay/timer?\n- Show death statistics? (time survived, nutrients collected, stage reached?)\n- Should camera show the death location for a moment before UI?\n- Spectate mode option instead of immediate respawn?\n- Does the dilution death visual from the design doc happen before or during the UI?\n\n**Technical:**\n- Death UI component (overlay)\n- Proper cleanup of old player entity\n- Camera re-attachment to new player entity\n- Server-side respawn handling","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-11-18T08:20:46.441162-05:00","updated_at":"2025-11-18T08:39:03.383463-05:00","closed_at":"2025-11-18T08:39:03.383463-05:00","source_repo":"."}
{"id":"godcell-idp","content_hash":"e1c318b44f6ce5631cdc1a9523bd257b515154387f2fe62c7c037dbc6d8cab4e","title":"Use performance.now() microseconds for alien/dramatic energy-time display","description":"Replace the current seconds-based countdown timer with raw microseconds from performance.now() for a more dramatic, alien aesthetic.\n\nCurrent: Eva-style countdown in seconds (conventional)\nProposed: Raw microsecond counter that rapidly increments (alien/sci-fi feel)\n\nThis would make the energy/time relationship feel more otherworldly and emphasize the digital/computational nature of the primordial ocean.\n\nImplementation notes:\n- Consider how to display microseconds readably (formatting, grouping)\n- May need to adjust update frequency for performance\n- Could affect HUDOverlay timer display\n- Might need to recalibrate how players interpret time pressure\n\nDesign considerations:\n- What does the \"alien\" counter communicate to players?\n- Should it count up (time alive) or down (time remaining)?\n- How does this interact with existing energy/metabolism mechanics?","status":"open","priority":3,"issue_type":"feature","created_at":"2025-11-24T14:55:43.067058-05:00","updated_at":"2025-11-24T14:55:43.067058-05:00","source_repo":"."}
{"id":"godcell-imy","content_hash":"4deb93a37dfe4db2a6a42b4c7f9f34dfe1a36c71623b459e31e32496087c5dd0","title":"Verify countdown timer accuracy OR remove it entirely","description":"Confirm that the energy countdown timer is actually ticking at 1 real-world second per displayed second. If not, fix it. If we can't determine its purpose, consider removing it.\n\n**Questions to Answer:**\n1. Is the timer counting down at the correct pace? (1 real second = 1 game second)\n2. What is the timer's purpose? (Time until starvation? Just energy depletion indicator?)\n3. Do we still need it, or is the energy bar sufficient?\n\n**Testing:**\n- Use a stopwatch to verify timer accuracy\n- Compare timer countdown to actual energy depletion rate\n- Check if timer is helpful or just visual clutter\n\n**Options:**\n- **Fix it:** Ensure timer is accurate, keep it as energy countdown\n- **Remove it:** Delete timer HUD element if it's redundant with energy bar\n- **Redesign it:** Make it more useful (show \"time to starvation\" in seconds?)\n\n**Current Implementation:**\n`client/src/render/hud/HUDOverlay.ts` - countdown timer logic\n\n**Decision:** User mentioned \"not sure of its purpose anymore\" - lean toward removal unless we find a compelling reason to keep it.","status":"open","priority":2,"issue_type":"task","created_at":"2025-11-21T16:04:25.173971-05:00","updated_at":"2025-11-21T16:04:25.173971-05:00","source_repo":"."}
{"id":"godcell-iyv","content_hash":"5cc4c4ea4fc58ccced681a335ed9b40ae2042787a3db80d8fc64047d727c22cd","title":"Reposition HUD elements inside game canvas","description":"Health/energy bars and countdown timer currently render outside the Three.js canvas. Should be positioned inside the canvas area (though the extra space is nice).","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-21T09:29:21.457865-05:00","updated_at":"2025-11-21T10:01:39.582464-05:00","closed_at":"2025-11-21T10:01:39.582464-05:00","source_repo":"."}
{"id":"godcell-j2a","content_hash":"abef28b8ceab87defb3de7e1158e1a539a9d05e1ee5c03112084fa2f9235bbb2","title":"Digital jungle environment rendering","description":"New macro-scale world with visual depth. Digital trees, data rivers, glitch zones, firewall barriers. Top-down 3D rendering (movement still 2D on x/y plane). Establish the aesthetic language for the jungle that contrasts with but complements the soup.","status":"open","priority":1,"issue_type":"feature","created_at":"2025-11-25T00:26:15.352381-05:00","updated_at":"2025-11-25T00:26:15.352381-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-j2a","depends_on_id":"godcell-r85","type":"parent-child","created_at":"2025-11-25T00:27:38.246167-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-j5p","content_hash":"009ce0b192e4bf4c8a2cd552ace866351f89cc54c929dca8733835d11157abd2","title":"Replace pseudopods/pseudopodHits Maps with ECS components","description":"The `pseudopods: Map\u003cstring, Pseudopod\u003e` and `pseudopodHits: Map\u003cstring, Set\u003cstring\u003e\u003e` are legacy state.\n\nShould be ECS:\n- Pseudopod entities with Position, Velocity, Owner components\n- HitTracking component or similar for per-beam hit sets\n- PseudopodSystem queries ECS instead of iterating Maps\n\nDiscovered while migrating PseudopodSystem.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T10:58:18.353286-05:00","updated_at":"2025-11-29T16:03:00.798353-05:00","closed_at":"2025-11-29T16:03:00.798353-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-j5p","depends_on_id":"godcell-shh","type":"parent-child","created_at":"2025-11-29T10:58:28.737135-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-j6j","content_hash":"c06ddb9bfdb7b2e76272480d7760595cf1f2a3a32bf9319d640826fc0dfc529c","title":"Change contact predation to slow-drain mechanic like entropy swarms","description":"Current contact predation (multi-cell touching Stage 1 player) instantly kills the prey. This feels too harsh and not satisfying.\n\n**Current Behavior:**\n- Multi-cell touches Stage 1 player\n- Instant engulfment and death\n- No counterplay, no escape once touched\n\n**Desired Behavior (Entropy Swarm Model):**\n- Contact begins draining prey's energy/health over time\n- Prey is slowed down while being drained (can't instantly escape)\n- If prey escapes the predator's range, drain stops and they survive\n- If drain completes (health/energy reaches zero), prey is consumed\n- Predator gains energy gradually during drain process\n\n**Benefits:**\n- Creates tense chase moments (\"almost got away!\")\n- Gives prey a chance to fight free or get help\n- More satisfying for predator (watching prey struggle)\n- Feels more biological (digestion takes time)\n- Opens counterplay options (future: allies can interrupt drain?)\n\n**Implementation:**\n- Add \"beingDrained\" state to players\n- Track drainer ID and drain start time\n- Apply damage/energy loss per tick while in contact\n- Apply movement speed penalty to prey\n- If contact breaks (distance \u003e threshold), stop drain\n- Visual feedback: prey shrinking, color fading, particles flowing to predator\n\n**Tuning Parameters:**\n- Drain rate (damage/energy per second)\n- Speed penalty (50% slower? 75%?)\n- Escape distance threshold\n- Whether predator also slows down during drain","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-19T15:12:24.556387-05:00","updated_at":"2025-11-24T12:46:11.627158-05:00","closed_at":"2025-11-24T12:46:11.627158-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-j6j","depends_on_id":"godcell-l6w","type":"discovered-from","created_at":"2025-11-19T15:12:24.557422-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-jp7r","content_hash":"40b07d6101c33ff6e4fe90bf1fddcd42b1d21a84a94dbcac40c3a2b621ae9d1f","title":"Stage 4: Humanoid \u0026 Intelligence Awakening","description":"The leap to sapience. First-person embodied gameplay in the digital jungle.\n\n**Core changes from Stage 3:**\n- Perspective shift: top-down → first-person\n- Form: cyber-organism → humanoid (bipedal, procedural variation)\n- New resource: Signal/Experience (progression currency separate from Energy)\n- New gameplay: building, creation, meaning-making\n\n**Key features:**\n- First-person PerspectiveCamera\n- Humanoid model with procedural morphology\n- Dual resource system (Energy for survival, Signal for transcendence)\n- Combat with energy spears\n- Construction/building mechanics\n- Playstyle diversity (Hunter, Builder, Wanderer, Social)\n\nSee GAME_DESIGN.md for full vision.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-11-29T21:07:02.770651-05:00","updated_at":"2025-11-29T21:07:02.770651-05:00","source_repo":".","labels":["core-loop","stage-4"]}
{"id":"godcell-jxx","content_hash":"7f8bad95bde3ccdea2b82af9e460129ee603842b0bda594b39d9c052feb4fc68","title":"Build basic client with rendering and input","description":"Client needs to:\n- Connect to server via websocket\n- Render simple 2D world\n- Handle keyboard/mouse input\n- Send player actions to server\n- Display other players","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-17T08:57:58.942396-05:00","updated_at":"2025-11-17T19:05:02.823021-05:00","closed_at":"2025-11-17T14:16:32.471411-05:00","source_repo":"."}
{"id":"godcell-jy5","content_hash":"afac08327b484591275f4c711d111ee34119c67c294be049d3078c19bb0c5304","title":"Add unique evolution visuals for Stage 2 multi-cells","description":"Currently the evolution visual effects (corona, pulsing, particles) are designed for single-cells. Multi-cells need their own distinct evolution visuals that work with their multi-sphere structure.\n\n**Current state:**\n- Single-cells have corona glow, pulsing scale, particle effects during evolution\n- Multi-cells use the same system but it doesn't look right on the hexagonal cell cluster\n\n**Desired:**\n- Evolution effects that complement the multi-cell morphology\n- Could include:\n  - Energy flowing between the individual cells\n  - Each cell in the cluster pulsing in sequence (wave effect)\n  - Tethers/connections glowing brighter\n  - New cells \"budding\" from existing ones during evolution\n  - Coordinated particle effects around the whole organism\n\n**Files:**\n- client/src/render/three/ThreeRenderer.ts - evolution effect triggers\n- client/src/render/three/MultiCellRenderer.ts - multi-cell specific rendering\n- client/src/render/three/effects/ - evolution effect utilities\n\n**Design questions:**\n- Should multi-cell → cyber-organism evolution look different than single-cell → multi-cell?\n- What visual language communicates \"organism complexity increasing\"?","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-25T00:18:17.548948-05:00","updated_at":"2025-11-25T00:18:17.548948-05:00","source_repo":"."}
{"id":"godcell-k1q","content_hash":"f61d20216f482edb553056755aa6729973e2677d8205d14acaf95494f5f57af3","title":"Refactor ThreeRenderer.ts - extract visual effects into separate modules","description":"ThreeRenderer.ts has grown to ~3800+ lines and is becoming unwieldy. Extract visual effects into focused modules:\n\n- ParticleEffects.ts (death particles, evolution particles, hit sparks)\n- DrainEffects.ts (drain auras, pulsing animations)\n- EntityRenderers.ts (player meshes, swarm meshes, obstacle meshes)\n- TrailSystem.ts (player trails)\n\nKeep ThreeRenderer as orchestrator/coordinator, delegate to specialized systems.","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-11-24T13:43:01.589109-05:00","updated_at":"2025-11-24T18:53:12.942756-05:00","closed_at":"2025-11-24T18:53:12.942756-05:00","source_repo":"."}
{"id":"godcell-kij","content_hash":"54733772998c52a4f08d1f4d731a353ac0578f4a9025886bf04077c1729af3f4","title":"Migrate all bots to ECS entities","description":"Currently bots exist in a hybrid state:\n- Some bots are only in the legacy `players` Map (e.g., initial multi-cell bots from `spawnMultiCellBot()`)\n- Some bots have ECS entities (created via `ecsCreatePlayer()`)\n\nThis causes ECS systems like BuddingSystem to not see legacy-only bots, since they iterate `ctx.world.forEachWithTag(Tags.Player, ...)`.\n\n**Goal:** All bots should be created with ECS entities. The `bots.ts` functions (`spawnMultiCellBot`, `spawnBotAt`, etc.) should call `ecsCreatePlayer()` to ensure bots are visible to all ECS systems.\n\n**Affected files:**\n- `server/src/bots.ts` - bot spawning functions\n- Possibly `server/src/index.ts` - initialization\n\n**Related:** This was discovered while debugging why BuddingSystem wasn't triggering for Stage 2 bots.","status":"closed","priority":2,"issue_type":"task","assignee":"claude","created_at":"2025-11-28T22:43:56.258192-05:00","updated_at":"2025-11-29T16:48:56.929514-05:00","closed_at":"2025-11-29T16:48:56.929514-05:00","source_repo":".","labels":["bots","ecs","refactor"]}
{"id":"godcell-kla","content_hash":"c39c7c900e20835f373887c20e9c30139a060f537f26022c1479ba1edc9ca519","title":"ECS: Migrate activeDamage HUD state","description":"Migrate activeDamage Map to ECS or compute from existing components.\n\nThis tracks active damage sources for HUD display.\n\nStructure: `Map\u003cstring, ActiveDamageRecord[]\u003e` where ActiveDamageRecord has damageRate, source, proximityFactor.\n\nOptions:\n1. Component on player entity\n2. Computed from existing damage components each tick\n3. Keep as transient per-tick data (like tickData)\n\nFiles to change:\n- server/src/index.ts - Map declaration, recordDamage helper, buildGameContext\n- server/src/ecs/systems/GameContext.ts - interface","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T16:27:20.648681-05:00","updated_at":"2025-11-29T18:31:16.119074-05:00","closed_at":"2025-11-29T18:31:16.119074-05:00","source_repo":".","labels":["ecs-migration","phase-5"]}
{"id":"godcell-kpx","content_hash":"8e1ebceb13a512617a4bc083630c71fea22c0bd098631470aab2fc79d1bd8a17","title":"Implement player movement and synchronization","description":"Players can move around and see each other move in real-time.\nHandle basic networking concerns (latency, prediction, etc.)","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-17T08:57:59.031553-05:00","updated_at":"2025-11-17T19:05:02.822727-05:00","closed_at":"2025-11-17T14:16:38.798566-05:00","source_repo":"."}
{"id":"godcell-kst","content_hash":"e98d5b2749d719298163865f405afe9709449a981c1505b098425385302585c1","title":"Visual communication of energy value without HUD meters","description":"Players need a clear way to understand what's worth pursuing for energy/maxEnergy gain. Current problem: swarms, nutrients, prey all have different values but it's not visually obvious which is \"worth it\".\n\nThe energy gain aura helps show recent gains but doesn't communicate *prospective* value.\n\nDesign constraint: Avoid HUD stats/meters/numbers. Find visual/spatial solutions.\n\nPossible directions to explore:\n- Size/glow intensity correlating to value\n- Particle density or emission rate\n- Color temperature (warm = high value?)\n- Pulsing/animation frequency\n- \"Ripeness\" visual states\n- Proximity-based reveals (get close to see value)\n- Predator instinct indicators (highlighting high-value targets)","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-28T13:39:16.166209-05:00","updated_at":"2025-11-28T13:39:16.166209-05:00","source_repo":"."}
{"id":"godcell-kt1","content_hash":"d07249776d23f792823324eea1c9df0f5fd548fafb700309356b80bf819dc7c2","title":"Train neural network agents to play GODCELL","description":"Build reinforcement learning (RL) infrastructure to train neural network agents that learn to play GODCELL, discovering emergent strategies and serving as challenging AI opponents.\n\n## Motivation\n\nGODCELL's design (multi-agent competition, predator-prey dynamics, risk/reward decisions, resource scarcity) creates a perfect testbed for reinforcement learning. ML agents could:\n- Discover strategies we never designed (edge-running, ambush tactics, territory control)\n- Validate game balance (if AI exploits something, it's probably broken)\n- Provide genuinely challenging opponents (learned behavior vs scripted)\n- Serve as a learning vehicle for ML/RL concepts through a project we care about\n\nThis aligns with the \"emergent creativity\" philosophy - let intelligence emerge from simple rules.\n\n## Goals\n\n**Primary:**\n- Train neural net to survive Stage 1 (collect nutrients, avoid threats, evolve)\n- Discover emergent survival strategies\n- Learn RL/ML concepts through hands-on implementation\n\n**Secondary:**\n- Multi-agent competitive training (agents compete for resources)\n- Predator-prey adversarial training (Stage 2 hunting Stage 1)\n- Deploy trained models as \"hard mode\" bots in game\n\n**Learning Outcomes:**\n- Understand observation → action → reward loop\n- Experience reward shaping (game design skill!)\n- Debug ML systems (fascinating problem-solving)\n- See emergent behavior arise from optimization\n\n## Technical Architecture\n\n### Game Environment Wrapper\nExpose GODCELL as a Gymnasium (OpenAI Gym) environment that RL algorithms can interface with:\n\n```python\n# Python side - RL training\nimport gymnasium as gym\nfrom stable_baselines3 import PPO\n\nclass GodcellEnv(gym.Env):\n    \"\"\"\n    Wraps GODCELL game server as RL environment\n    Handles observation space, action space, rewards\n    \"\"\"\n    \n    def reset(self):\n        # Spawn agent, return initial observation\n        \n    def step(self, action):\n        # Send action to server\n        # Receive next state\n        # Calculate reward\n        # Return (observation, reward, done, info)\n```\n\n### Communication Layer\nTwo options:\n\n**Option A: Python controls Node server**\n- Python script spawns headless Node server\n- Communicate via Socket.io or HTTP API\n- Server runs in \"training mode\" (no rendering, faster ticks)\n- Pros: Reuses existing game logic\n- Cons: Slower (cross-process communication)\n\n**Option B: Rewrite core logic in Python**\n- Port game physics/rules from TypeScript to Python\n- Pure Python simulation (no networking overhead)\n- Pros: Much faster training (10-100x)\n- Cons: Maintain two codebases\n\n**Recommendation:** Start with Option A (reuse server), migrate to Option B if training is too slow.\n\n### Observation Space (What AI Sees)\n\n```python\nobservation = {\n    # Agent state (normalized 0-1)\n    'energy': float,           # Current energy / max energy\n    'health': float,           # Current health / max health\n    'position': [x, y],        # Normalized to world size\n    'velocity': [vx, vy],      # Current momentum\n    'stage': int,              # Evolution stage (0-4)\n    \n    # Nearby entities (sorted by distance, padded/truncated to fixed size)\n    'nutrients': [             # Closest 8 nutrients\n        {'distance': float, 'angle': float, 'value': float},\n        # ... (padded with zeros if \u003c 8)\n    ],\n    'swarms': [                # Closest 5 swarms\n        {'distance': float, 'angle': float, 'state': str},\n    ],\n    'obstacles': [             # Closest 3 obstacles\n        {'distance': float, 'angle': float, 'core_distance': float},\n    ],\n    'players': [               # Closest 5 other players (for Stage 2+)\n        {'distance': float, 'angle': float, 'stage': int},\n    ],\n}\n```\n\n**Observation Design Notes:**\n- Relative positions (distance/angle) instead of absolute (translation invariant)\n- Fixed-size arrays (neural nets need consistent input shape)\n- Normalized values (helps training stability)\n- Sorted by relevance (closest entities matter most)\n\n### Action Space (What AI Can Do)\n\n**Stage 1 (Single-Cell):**\n```python\naction = {\n    'move_x': float,  # -1 to +1 (continuous)\n    'move_y': float,  # -1 to +1 (continuous)\n}\n```\n\n**Stage 2+ (Multi-Cell):**\n```python\naction = {\n    'move_x': float,\n    'move_y': float,\n    'pseudopod_extend': bool,      # Whether to extend pseudopod\n    'pseudopod_target_x': float,   # -1 to +1 (relative to agent)\n    'pseudopod_target_y': float,\n}\n```\n\n### Reward Function (What Makes AI Good)\n\n**Stage 1 Survival:**\n```python\nreward = 0\n\n# Survival bonus\nreward += 0.01 * dt  # Small reward per second alive\n\n# Nutrient collection\nif nutrient_collected:\n    reward += 1.0 + (nutrient_value / 100)  # Bonus for high-value nutrients\n    \n# Evolution milestone\nif evolved:\n    reward += 5.0\n    \n# Death penalty\nif died:\n    reward -= 10.0\n    \n# Efficiency incentives\nreward -= 0.0001 * distance_to_nearest_nutrient  # Encourage seeking\nreward -= 0.001 if in_danger_zone else 0  # Penalize risky positions\n\n# Energy management\nif energy \u003c 0.2:  # Low energy is dangerous\n    reward -= 0.01 * dt\n```\n\n**Reward Shaping Notes:**\n- Dense rewards (frequent small signals) train faster than sparse (rare big signals)\n- Magnitude matters (death = -10, alive = +0.01 means \"don't die\" is priority)\n- Can tune to encourage specific behaviors (risk-taking, efficiency, exploration)\n\n### ML Stack\n\n```\nPython Environment:\n├─ Python 3.10+\n├─ PyTorch 2.0+ (neural net framework)\n├─ Stable Baselines3 (pre-built RL algorithms: PPO, DQN, SAC)\n├─ Gymnasium (environment interface standard)\n├─ NumPy (array operations)\n└─ Matplotlib / TensorBoard (training visualization)\n\nTraining Infrastructure:\n├─ Training script (runs episodes, logs metrics)\n├─ Model checkpointing (save best agents)\n├─ Hyperparameter configs (learning rate, network size, etc.)\n└─ Evaluation script (test trained agent performance)\n\nVisualization:\n├─ TensorBoard for training curves (reward over time, loss, etc.)\n├─ Game client to watch trained agent play live\n└─ Episode recordings (save interesting runs)\n```\n\n## Implementation Phases\n\n### Phase 1: Single-Agent Stage 1 Survival (MVP)\n**Goal:** Prove concept - train a neural net to survive as single-cell\n\n**Tasks:**\n1. Build Gymnasium environment wrapper for GODCELL\n2. Define observation space (agent state + nearby entities)\n3. Define action space (movement only)\n4. Implement reward function (survival, collection, death)\n5. Set up training loop with PPO algorithm\n6. Train agent for ~100k episodes (~few hours on laptop)\n7. Evaluate: Watch agent play in game client\n8. Iterate on reward shaping until behavior is interesting\n\n**Success Criteria:**\n- Agent learns to collect nutrients consistently\n- Agent avoids gravity wells and swarms\n- Agent survives longer than random actions\n- Agent reaches Stage 2 evolution\n\n**Estimated Effort:** ~1 week (with me coding, you tweaking rewards)\n\n**Deliverables:**\n- Python training script\n- Trained model file (.pth or .pkl)\n- Integration to load trained agent into game server\n- Metrics/graphs showing learning progress\n\n### Phase 2: Multi-Agent Competition\n**Goal:** Train multiple agents simultaneously, competing for resources\n\n**Tasks:**\n1. Modify environment to support multiple agents in same world\n2. Update observation space to include other agents\n3. Train agents together (they compete for scarce nutrients)\n4. Observe emergent strategies (territory, avoidance, aggression?)\n5. Self-play training (agents get smarter as competition improves)\n\n**Success Criteria:**\n- Agents develop distinct strategies\n- Agents respond to other agents' presence\n- Competitive dynamics emerge (chasing, fleeing, claiming areas)\n\n**Estimated Effort:** ~3-4 days\n\n**Emergent Behaviors to Look For:**\n- Territory claiming (agents stake out regions)\n- Avoidance (fleeing from stronger agents)\n- Herding (multiple agents coordinating?)\n- Resource prediction (going where nutrients will spawn)\n\n### Phase 3: Predator-Prey Adversarial Training\n**Goal:** Train Stage 2 agents to hunt Stage 1 prey\n\n**Tasks:**\n1. Update action space for Stage 2 (pseudopod extension)\n2. Implement predator reward function (energy from hunting)\n3. Implement prey reward function (survival against predators)\n4. Adversarial training loop (predator and prey improve together)\n5. Curriculum learning (start with dumb prey, increase difficulty)\n\n**Success Criteria:**\n- Predators learn to use pseudopods effectively\n- Predators learn pursuit strategies (cut off escape routes, ambush)\n- Prey learns evasion strategies (unpredictable movement, using obstacles)\n- Arms race dynamics (both keep improving)\n\n**Estimated Effort:** ~5-7 days\n\n**Advanced Techniques:**\n- Population-based training (multiple predator/prey variants)\n- Behavioral diversity rewards (encourage varied strategies)\n- Save \"hall of fame\" opponents (train against past best agents)\n\n### Phase 4: Deployment as Game Bots\n**Goal:** Export trained models as \"hard mode\" AI opponents\n\n**Tasks:**\n1. Serialize trained models for production use\n2. Build inference pipeline (load model, run predictions in game)\n3. Optimize for real-time performance (fast forward pass)\n4. Add difficulty settings (use partially-trained vs fully-trained models)\n5. Package as optional \"ML bots\" vs current steering behavior bots\n\n**Success Criteria:**\n- Trained agents run at 60fps in production server\n- Players can toggle ML bots on/off\n- ML bots provide genuinely challenging gameplay\n- Model files are small enough to deploy (\u003c10MB)\n\n**Estimated Effort:** ~3 days\n\n**Deployment Options:**\n- Ship models with game (bundle .pth files)\n- Load from CDN (update models without redeploying)\n- Server-side inference only (clients see results, not model)\n\n## Technical Challenges \u0026 Solutions\n\n### Challenge 1: Training Speed\n- **Problem:** Cross-process communication (Python ↔ Node) is slow\n- **Solution:** Vectorized environments (run 16 game instances in parallel)\n- **Solution:** Port core logic to Python if needed (10-100x speedup)\n- **Solution:** Use GPU for neural net inference (PyTorch CUDA)\n\n### Challenge 2: Reward Shaping\n- **Problem:** Agent finds exploits (sits in corner, farms one spot)\n- **Solution:** Iterative reward tuning (penalize boring behavior)\n- **Solution:** Curriculum learning (start easy, increase difficulty)\n- **Solution:** Behavioral cloning (train on human demonstrations first)\n\n### Challenge 3: Non-Stationarity\n- **Problem:** Game state changes as agent learns (other agents adapt)\n- **Solution:** Self-play (agents train against copies of themselves)\n- **Solution:** Population-based training (diverse opponent pool)\n\n### Challenge 4: Observation Design\n- **Problem:** Too much info → slow training, too little → can't learn\n- **Solution:** Start minimal, add observations incrementally\n- **Solution:** Attention mechanisms (let network focus on relevant entities)\n\n## Learning Resources\n\n**For Understanding (optional, I'll handle implementation):**\n- Spinning Up in Deep RL (OpenAI) - Best conceptual intro\n- Stable Baselines3 Docs - Practical RL library\n- Gymnasium Docs - Environment interface standard\n- PPO Paper - Algorithm we'll use\n\n**For Debugging:**\n- TensorBoard visualization (is it learning?)\n- Episode recordings (what is it doing?)\n- Reward decomposition (where are points coming from?)\n\n## Success Metrics\n\n**Phase 1 Success:**\n- Average survival time \u003e 2 minutes\n- Evolution rate \u003e 50% of episodes\n- Nutrient collection rate \u003e current bots\n- Avoids 90%+ of singularity cores\n\n**Phase 2 Success:**\n- Emergent competitive behavior visible\n- Agents develop distinct strategies\n- Resource distribution becomes non-uniform (territory)\n\n**Phase 3 Success:**\n- Predator hunting success rate \u003e 30%\n- Prey escape success rate \u003e 40%\n- Both improve over training time\n\n**Phase 4 Success:**\n- Players report ML bots are challenging\n- Inference runs at \u003c5ms per action (60fps capable)\n- Model size \u003c5MB (deployable)\n\n## Future Extensions (Beyond Epic)\n\n- **Imitation Learning:** Train on human player replays\n- **Hierarchical RL:** High-level strategy + low-level execution\n- **Multi-objective:** Optimize for survival AND entertainment\n- **Explainability:** Visualize what neural net is \"thinking\"\n- **Online Learning:** Agents continue learning from live gameplay\n- **Evolution Sim:** Let agents evolve strategies over generations\n\n## Why This Matters\n\nThis epic transforms GODCELL from \"game with AI\" to \"AI research platform disguised as game.\" We're not just making smarter bots - we're discovering what optimal play looks like in an emergent system.\n\nIf agents discover strategies we never designed (edge-running, ambush hunting, resource prediction), that validates the depth of the game design. If they find exploits, that's valuable balance feedback.\n\nPlus: You learn ML/RL through a project you actually care about. Way better than MNIST digits or CartPole.\n\n## Implementation Order\n\n1. **Phase 1** (1 week) - Proves concept, validates approach\n2. **Evaluate** - Is this interesting? Continue or shelve?\n3. **Phase 2** (3-4 days) - Multi-agent if Phase 1 succeeds\n4. **Phase 3** (5-7 days) - Predator-prey if competitive dynamics are cool\n5. **Phase 4** (3 days) - Deploy if we want ML bots in production\n\nStart with Phase 1, decide at each milestone if it's worth continuing.","status":"open","priority":3,"issue_type":"epic","created_at":"2025-11-20T19:57:41.36976-05:00","updated_at":"2025-11-20T19:57:41.36976-05:00","source_repo":"."}
{"id":"godcell-kuc","content_hash":"cc673142ce08ec61e79b66da08ece072ec41bba56cbc26b8c152d6a90f3563bc","title":"Implement projectile weapon system","description":"Add energy-based projectile weapons unlocked at Cyber-Organism stage.\n\nMechanics:\n- Unlocked at stage 3 (Cyber-Organism)\n- Fire with spacebar or mouse click\n- Projectile travels in straight line\n- Deals damage on hit to players or enemies\n- Cooldown between shots (0.5s for testing)\n- Visual: glowing energy bolt matching player color\n- Server-authoritative hit detection\n\nRequires health system and progression system (stage gating).","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-17T16:19:34.082926-05:00","updated_at":"2025-11-17T19:05:02.823896-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-kuc","depends_on_id":"godcell-2x3","type":"blocks","created_at":"2025-11-17T16:20:32.875103-05:00","created_by":"matthewhuff"},{"issue_id":"godcell-kuc","depends_on_id":"godcell-qwn","type":"blocks","created_at":"2025-11-17T16:20:38.615674-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-l6w","content_hash":"1a8d1dfcb26f259f1fe9b20cdc1ef2967f128912c43a717fe358def02465a511","title":"Stage 2: Multi-cells can prey on Stage 1 players","description":"Multi-cell players can engulf and kill Stage 1 players using pseudopods.\n\n**PvP Predation:**\n- Multi-cells can use pseudopods on **real Stage 1 players** (not just NPCs)\n- Same mechanic as NPC hunting: touch → engulf → kill\n- Creates **permanent loss risk** for Stage 1 players from evolved predators\n- Stage 1 players must **evade multi-cells** to survive\n\n**Asymmetric Gameplay:**\n- **Predator (Stage 2)**: Patient hunter with detection + pseudopods\n- **Prey (Stage 1)**: Fast, evasive, must stay aware of surroundings\n- **Escape tactics**: Hide in noise patches, use obstacles, outmaneuver\n\n**Balance Concerns:**\n- Could Stage 1 become too punishing?\n- Should there be safe zones where multi-cells can't hunt?\n- Should Stage 1 players have a speed boost to compensate?\n- Do multi-cells get enough reward to justify hunting players vs NPCs?\n\n**Rewards for Predation:**\n- Predator gains energy from kill (50% of prey's energy?)\n- Prey drops nutrients (50% of collected)\n- Creates risk/reward: hunting players is more rewarding than NPCs\n\n**Design Philosophy:**\n- Stage 2 is **plane transcendence** - you become predator to your former peers\n- Stage 1 is now the bottom of the food chain (but fast enough to escape)\n- Survival requires awareness and evasion skills\n\n**Implementation:**\n- Same pseudopod collision logic works on both NPCs and players\n- Server validates engulfment, kills prey player\n- Death triggers normal respawn (permanent loss mechanic)\n- Predator receives energy/nutrient rewards\n\n**Questions to Answer:**\n- Is this too harsh for Stage 1?\n- Do we need escape mechanics or safe zones?\n- How do we communicate danger to Stage 1 players (visual warning when multi-cell nearby)?","design":"**Design Decision Needed:**\n\nBefore implementing, we need to answer: **Should multi-cells be able to kill Stage 1 players, or only NPCs?**\n\n**Option A: PvP Predation Enabled**\n- Multi-cells can hunt real Stage 1 players\n- Creates high-stakes survival for beginners\n- Risk: Could be too punishing, drives players away\n- Benefit: True plane transcendence, emergent predator-prey dynamics\n\n**Option B: NPCs Only**\n- Multi-cells can only hunt NPC single-cells\n- Stage 1 players are safe from predation (only die to starvation/obstacles)\n- Risk: Feels less authentic, removes food chain tension\n- Benefit: Friendlier new player experience\n\n**Option C: Opt-in PvP Zones**\n- Certain areas allow predation, others are safe\n- Nutrient-rich zones = PvP enabled (risk/reward)\n- Risk: Splits playerbase, adds complexity\n- Benefit: Choice-driven, balances safety and challenge\n\n**Recommendation:**\nStart with **Option A** (full PvP predation) because:\n1. Matches the biological model (food chains are real)\n2. Creates emergent gameplay (territory, evasion tactics)\n3. Stage 1 has speed advantage (can escape skilled predators)\n4. Reinforces permanent loss stakes\n5. Can always add safe zones later if too harsh\n\nBut give Stage 1 tools to survive:\n- Speed advantage over multi-cells\n- Noise patches as hiding spots\n- Visual warning when multi-cell is tracking you\n- Maybe temporary sprint ability (energy cost)?","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-19T12:31:25.025987-05:00","updated_at":"2025-11-25T10:45:49.653529-05:00","closed_at":"2025-11-25T10:45:49.653529-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-l6w","depends_on_id":"godcell-6wj","type":"blocks","created_at":"2025-11-19T12:31:59.730806-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-l9j","content_hash":"fb5d5847dfd980e969be6383e4d5f19f045519bdc5be01d01c3e435c614a31fd","title":"ECS: Migrate obstacles Map to full ECS","description":"Migrate obstacles Map to use ECS as source of truth.\n\nObstacleComponent already exists. Need to:\n1. Create obstacles as ECS entities with ObstacleComponent\n2. Replace Map\u003cstring, Obstacle\u003e queries with ECS queries\n3. Update collision detection to use ECS\n4. forEachObstacle and getObstacleZones helpers already exist\n\nFiles to change:\n- server/src/index.ts - obstacle spawning, collision\n- server/src/bots.ts - bot obstacle avoidance\n- server/src/swarms.ts - swarm obstacle avoidance\n- server/src/ecs/factories.ts - createObstacle already exists\n- server/src/ecs/systems/GameContext.ts - remove obstacles Map","status":"closed","priority":1,"issue_type":"task","assignee":"claude","created_at":"2025-11-29T16:27:32.665873-05:00","updated_at":"2025-11-29T16:56:26.318285-05:00","closed_at":"2025-11-29T16:56:26.318285-05:00","source_repo":".","labels":["ecs-migration","large","phase-5"]}
{"id":"godcell-lii","content_hash":"1981d7f9235700ba89265dde13d925094ccda0b34dd0b47990145ca6017ab417","title":"Use model-viewer debug mode for faster VFX/sprite iteration","description":"Create a debug/development workflow using the existing model-viewer for iterating on visual effects and sprite models without needing to run the full game.\n\nCurrent problem:\n- Testing VFX requires launching full client + server\n- Hard to isolate and tune specific visual effects\n- Slow iteration cycle for visual development\n\nProposed solution:\n- Extend model-viewer to support VFX development\n- Add controls for:\n  - Stage switching (to preview different cell stages)\n  - Effect triggering (drain auras, damage flashes, evolution effects, etc.)\n  - Parameter tweaking (colors, intensity, timing)\n  - Animation playback controls\n\nBenefits:\n- Instant visual feedback\n- No need for server/multiplayer setup\n- Can focus purely on aesthetics without gameplay distractions\n- Easier to screenshot/record for design iteration\n\nImplementation notes:\n- Model-viewer already exists, need to identify current location/state\n- Add UI controls for effect parameters\n- Consider hot-reloading for shader/material changes","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-24T16:05:09.473091-05:00","updated_at":"2025-11-25T01:50:25.251968-05:00","closed_at":"2025-11-25T01:50:25.251968-05:00","source_repo":"."}
{"id":"godcell-m2v","content_hash":"162619b2dc551f64cee992ed652778cc2f1259ed9341a0e5438499394da5974a","title":"Add energy countdown timer (digital watch style)","description":"Display a countdown timer at center-top of screen showing seconds until player runs out of energy.\n\n**Visual Style:**\n- Digital watch aesthetic (monospace font, segmented display look)\n- Position: Center-top of screen (fixed to viewport)\n- Format: MM:SS or just SS depending on time remaining\n- Color: Cyan (matches energy bar) → Yellow (warning) → Red (critical)\n\n**Calculation:**\n- currentEnergy / energyDecayRate = seconds remaining\n- Update every frame or every second\n- Account for current decay rate (passive + movement if implemented)\n\n**Behavior:**\n- Shows time until energy reaches 0\n- Color shifts as time decreases:\n  - \u003e30s: Cyan (safe)\n  - 15-30s: Yellow (warning)\n  - \u003c15s: Red (critical, maybe pulsing)\n- When energy is refilled, timer resets/increases\n\n**Purpose:**\nCreates constant tension and awareness of the starvation clock - reinforces the survival pressure of Stage 1.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-18T17:18:43.841719-05:00","updated_at":"2025-11-19T10:16:29.548365-05:00","closed_at":"2025-11-19T10:16:29.548365-05:00","source_repo":"."}
{"id":"godcell-mvr","content_hash":"2c9bb27a32db5543b0d7926ca931ea231ba1d83cf470a2495a27ea326ade6033","title":"Redesign gravity distortions: visual damage feedback or remove damage entirely","description":"Current gravity distortions look beautiful but don't clearly communicate that they're damaging. Two potential directions:\n\n**Option A: Make them FEEL damaging/poisonous**\n- Add visual corruption/glitch effects to zones\n- Pulsing danger colors (sickly greens, toxic purples, warning reds)\n- Particles that look corrosive or harmful\n- Screen distortion/chromatic aberration when inside\n- Visual language that screams \"this is hurting you\"\n\n**Option B: Remove damage entirely**\n- Keep them as pure navigation obstacles (gravity pull only)\n- Beautiful cosmic hazards, not lethal zones\n- Simplifies threat model (swarms = damage, obstacles = gravity)\n- May make game too easy or change intended difficulty curve\n\n**Current State:**\n- Obstacles deal health damage based on proximity to core\n- Visual language is \"cosmic mystery\" not \"poisonous hazard\"\n- Players may not realize they're taking damage until too late\n\n**Decision Needed:**\n- Which direction aligns better with game feel?\n- If keeping damage: what visual language makes it obvious?\n- If removing damage: how does this affect difficulty balance?","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-21T16:03:49.148944-05:00","updated_at":"2025-11-21T16:03:49.148944-05:00","source_repo":"."}
{"id":"godcell-mxm","content_hash":"2c1d99e0c436ae601ca116bf83a6ea192a7f5fc46490cb87a455d98d2b550825","title":"Stage 2: Multi-cell vs Entropy Swarm combat mechanics","description":"Multi-cells currently have no special combat mechanics against entropy swarms - they just take damage like Stage 1 cells. This creates a design gap: you've evolved to a predator stage but are still helpless against swarms.\n\n**Current State:**\n- Multi-cells take swarm damage same as Stage 1\n- No counterplay or defensive options\n- Feels inconsistent with \"apex predator\" fantasy\n- Swarms are equal threat to both stages\n\n**Design Questions:**\n\n**Should multi-cells be more resistant to swarms?**\n- Larger size = more mass = harder to damage?\n- Multi-cell membrane is tougher (evolved defense)?\n- Takes 50% damage from swarms compared to Stage 1?\n- Or same damage but larger energy pool makes it less threatening?\n\n**Should multi-cells have counterplay options?**\n- **Option A: Pseudopods can damage/push swarms**\n  - Extend pseudopod into swarm → damages swarm entities\n  - Doesn't kill them but pushes them back (creates space)\n  - Risky: costs energy, you take damage while extending\n  - Skill-based: good timing creates safe passage\n\n- **Option B: Multi-cells can \"tank through\" swarms**\n  - Brief invulnerability window when charging through swarm\n  - Costs significant energy (50+ units)\n  - High-risk high-reward escape option\n  - Visual: membrane hardens/glows, barrier effect\n\n- **Option C: Multi-cells can consume swarm energy**\n  - Pseudopod contact with swarm drains its energy\n  - Converts swarm threat into energy source\n  - Risky: must get close, take damage during drain\n  - Makes swarms risk/reward instead of pure threat\n\n- **Option D: No special mechanics**\n  - Multi-cells just have more HP/energy to survive longer\n  - Swarms remain equal threat to all stages\n  - Simpler design, less mechanics to balance\n\n**Combat Dynamics:**\n\nIf we add counterplay, what's the intended dynamic?\n- **Flee:** Multi-cells still want to avoid swarms (drain is costly)\n- **Fight:** Only when cornered or strategic value (clear path)\n- **Hunt through danger:** Chase prey into swarm zones (risky predator play)\n\n**Balance Considerations:**\n- Don't make swarms trivial (they're ecosystem pressure)\n- Maintain risk for multi-cells (not invincible)\n- Create interesting decisions (fight vs flee, risk vs reward)\n- Reward skill (timing, positioning, energy management)\n\n**Visual Feedback:**\n- If multi-cells resist/fight swarms, needs clear visuals\n- Pseudopod striking swarm → swarm particles scatter\n- Membrane tanking damage → ripple/barrier effects\n- Energy drain → particles flowing from swarm to multi-cell\n\n**Implementation Complexity:**\n- Option D: Trivial (already exists via energy pool)\n- Option A: Medium (pseudopod collision with swarm entities)\n- Option C: Medium (add drain mechanic to pseudopods)\n- Option B: Low (add temporary invuln state + energy cost)\n\n**Recommendation:**\nStart with **Option A (Pseudopods push swarms)** because:\n1. Reuses pseudopod system (already implementing for predation)\n2. Creates skill-based counterplay (aim, timing)\n3. Maintains swarm threat (you take damage while fighting)\n4. Fits biological model (multi-cells can defend themselves)\n5. Opens tactical decisions (fight through vs flee around)\n\nBut make it costly:\n- Pseudopod takes damage while extended in swarm\n- Energy cost to extend\n- Only pushes swarms back, doesn't kill them\n- Creates brief safe corridor, not permanent solution","design":"## EMP Pulse Ability - Final Spec\n\nMulti-cells (colonial type) can fire an EMP pulse to disable nearby threats and create hunting opportunities.\n\n### Core Mechanic\n\n**Activation:**\n- Press spacebar\n- Instant cast, no charge-up\n- Visual/audio feedback (electromagnetic pulse wave)\n\n**Parameters (LOCKED):**\n- **Energy cost:** 80 units (out of 300 pool = ~27%)\n- **Cooldown:** 10 seconds\n- **AoE Range:** 4x multi-cell radius (~384 units)\n- **Paralyze Duration:** 3 seconds\n\n**Affected Targets:**\n- **Swarms:** Paralyzed, stop moving/attacking\n- **Multi-cells:** Stunned + energy drained\n- **Single-cells:** Stunned (NPCs and players)\n- **Does NOT affect:** Obstacles, nutrients\n\n### The Hunt: EMP → Feast\n\n**CRITICAL DESIGN:** Multi-cells can consume paralyzed swarms for energy.\n\n**The Combo:**\n1. Multi-cell dives toward swarm (risky, taking damage)\n2. Fires EMP at close range (80 energy cost)\n3. Swarms freeze for 3 seconds\n4. Multi-cell devours frozen swarm entities (pseudopod? contact? TBD)\n5. Massive energy gain (swarm = dense energy source)\n6. If successful: net positive (gain \u003e 80 cost)\n7. If failed: net loss (spent 80, took damage, got nothing)\n\n**Risk/Reward Balance:**\n- High cost (80 energy upfront)\n- High risk (must get close to swarms, take damage)\n- High reward (swarms = rich energy source)\n- Skill-based (timing, positioning, greed management)\n\n**Questions:**\n- How do you consume frozen swarms? Contact? Pseudopod?\n- How much energy per swarm entity consumed? (100? 150? 200?)\n- Can you eat multiple swarm entities in 3 seconds?\n- Does swarm recover if you don't consume it? (Yes - EMP is stun, not kill)\n- Can other multi-cells steal your kill? (PvP dynamics?)\n\n### Tactical Use Cases\n\n**Offensive (Swarm Hunting):**\n- Dive into swarm → EMP → feast → massive energy gain\n- High risk, high reward playstyle\n- Requires balls and skill\n\n**Defensive (Escape):**\n- Surrounded by swarms → EMP → flee while frozen\n- Energy investment to survive\n\n**PvP (Multi-cell vs Multi-cell):**\n- Stun rival → drain their energy → they're weakened\n- Opens pseudopod hunting window (if they're drained enough)\n- Steal their kills (EMP their swarm target, eat it yourself)\n\n**Combo (EMP + Pseudopod):**\n- EMP freezes enemies (swarms, cells)\n- Pseudopod extends to eat frozen targets\n- \"Frozen food\" - easier to aim, guaranteed hit\n\n### Energy Drain on Multi-cells\n\n**When multi-cell is hit by EMP:**\n- Stunned for 3 seconds (can't move, can't act)\n- Loses energy (how much? 50? 80? Same as cost?)\n- Creates PvP counterplay (EMP battles between multi-cells)\n- Hit multi-cell is vulnerable (drained + stunned = prey)\n\n### Panic Button\n\n**Can use EMP while being drained by swarm:**\n- Last-ditch escape (break free from drain)\n- Paralyzes swarm, stops damage\n- Expensive but saves your life\n- Creates tense moments (\"do I EMP now or can I escape?\")\n\n### Visual Design\n\n**Pulse Wave:**\n- Expanding blue/white electromagnetic ring from multi-cell center\n- Travels outward at high speed\n- Visible to all players (telegraphs the threat)\n- Dissipates at max range (4x radius)\n\n**Caster Effect:**\n- Multi-cell flashes bright white/blue at moment of cast\n- Cell cluster briefly glows (energy discharge)\n- Screen shake (minor, at epicenter)\n- Particle burst (digital sparks, EM radiation lines)\n\n**Hit Effect:**\n- Affected entities flash/glitch (electromagnetic interference)\n- Frozen in place, stuttering animation\n- Blue outline/glow (shows they're stunned)\n- Swarm particles stop moving (frozen cloud)\n- Single-cells/multi-cells have electric arcs on membrane\n\n**Audio:**\n- Caster: Deep electronic \"WHOOMPH\" pulse\n- Wave: Crackling static/interference as it expands\n- Hit: Digital glitch sounds on affected entities\n- Ambient: Electromagnetic hum during duration\n\n### Implementation Steps\n\n**1. Server-side (Ability System):**\n- Add EMP ability to Player interface (multi-cells only)\n- Track cooldown state (lastEMPTime)\n- Handle spacebar input → validate → execute\n- Validate: has 80 energy, cooldown ready, is multi-cell\n- Apply energy cost (current - 80)\n- Calculate AoE (all entities within 4x radius)\n- Apply status effects:\n  - Swarms: paralyzed (3s)\n  - Multi-cells: stunned (3s) + energy drain\n  - Single-cells: stunned (3s)\n- Broadcast EMP event to all clients\n\n**2. Client-side (Visuals):**\n- Listen for EMP events\n- Render expanding pulse wave (particle system or shader)\n- Apply visual effects to affected entities\n- Play audio (pulse, static, glitch)\n- Show cooldown indicator on UI\n\n**3. Swarm Consumption Mechanic:**\n- TBD: How do you eat frozen swarms?\n- Option A: Contact with frozen swarm → absorb energy\n- Option B: Pseudopod touch → absorb energy\n- Option C: Automatic (frozen swarms in range get consumed)\n- Energy gain per swarm entity (tune for balance)\n\n**4. Status Effects:**\n- Add \"paralyzed\" status to entities\n- While paralyzed: velocity = 0, can't act, visual effect\n- Duration timer, clear on expire\n- Multi-cells: also drain energy on hit\n\n### Balance Tuning Parameters\n\n**Locked:**\n- Cost: 80 energy\n- Cooldown: 10 seconds\n- Range: 4x multi-cell radius (~384 units)\n- Duration: 3 seconds\n\n**TBD:**\n- Energy per swarm entity consumed (100-200?)\n- Multi-cell energy drain on hit (50-100?)\n- Swarm consumption mechanic (contact? pseudopod? auto?)\n- Can you eat multiple swarms in 3 seconds? (Yes? No? Limited?)\n\n### Design Philosophy\n\n**High-stakes offensive tool, not just defensive panic button.**\n\n- Rewards aggression (hunt swarms for energy)\n- Punishes mistakes (expensive, takes damage to get close)\n- Creates skill expression (timing, positioning, greed)\n- Fits cyber-organism theme (EM tech vs organic threats)\n- Makes multi-cells feel like apex predators with *tools*\n\n**\"You're not running from swarms anymore. You're *hunting* them.\"**","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-22T21:26:05.736424-05:00","updated_at":"2025-11-24T12:46:22.634844-05:00","closed_at":"2025-11-24T12:46:22.634844-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-mxm","depends_on_id":"godcell-6wj","type":"blocks","created_at":"2025-11-22T21:26:05.739656-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-nag","content_hash":"daa1256cc7effb3941d10f2d53f45958f0c77382a51fbe1cec213e83e5cfa519","title":"Create core/sim modules (interpolator, camera, timers, utils)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:21:57.05439-05:00","updated_at":"2025-11-19T21:28:36.502862-05:00","closed_at":"2025-11-19T21:28:36.502862-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-nag","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:21:57.058036-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-nhg","content_hash":"47dd34f9f0d7643f593a493d1d188eb273cfadafae75eb883c300d4b24983d0d","title":"Upgrade bot AI to survive obstacles and swarms","description":"Bots currently die too easily to gravity distortions and entropy swarms. They need smarter threat avoidance to reach Stage 2.\n\n**Current Problems:**\n- Bots fly into gravity wells and die to singularity cores\n- Bots don't effectively evade entropy swarms\n- Very few bots survive long enough to collect 15+ nutrients\n- Makes testing Stage 2 features difficult\n\n**Needed Improvements:**\n\n**Gravity Avoidance:**\n- Detect obstacles within detection radius\n- Calculate avoidance vectors (flee from event horizons)\n- Weight avoidance higher than nutrient seeking when close to danger\n- Never path through gravity wells toward nutrients\n- Implement graduated threat zones (outer = caution, inner = flee, core = panic)\n\n**Swarm Avoidance:**\n- Detect swarms within range\n- Flee from approaching swarms (especially chase state)\n- Path around patrol zones\n- Prioritize survival over nutrient collection when threatened\n\n**Risk Assessment:**\n- Don't chase nutrients that are inside/near gravity wells\n- Don't chase nutrients being guarded by swarms\n- Only take calculated risks (e.g., high-value nutrient worth the danger)\n\n**Survival Priorities:**\n1. Avoid death (obstacles, swarms)\n2. Maintain energy (collect safe nutrients)\n3. Evolve (collect enough nutrients for Stage 2)\n\n**Files:**\n- `server/src/bots.ts` - AI steering behaviors\n- `server/src/swarms.ts` - Reference their avoidance logic\n\n**Success Criteria:**\n- 30%+ of bots reach Stage 2 evolution\n- Bots path intelligently around threats\n- Rare to see bots suicide into singularity cores","status":"closed","priority":1,"issue_type":"feature","assignee":"Claude","created_at":"2025-11-21T16:04:00.980244-05:00","updated_at":"2025-11-25T15:22:13.816859-05:00","closed_at":"2025-11-25T15:22:13.816859-05:00","source_repo":"."}
{"id":"godcell-npx","content_hash":"e888e79841c1674b64ee1e2ccc1fdfbd7580d92c869129e3f9f28734c7a7ff75","title":"Create render/loop with fixed-step accumulator","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:22:54.91695-05:00","updated_at":"2025-11-19T21:39:01.810241-05:00","closed_at":"2025-11-19T21:39:01.810241-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-npx","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:22:54.918325-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-o11r","content_hash":"da4d683b822fd0216086be3dc625c8cce3a4819318d0240eabd8e7536179f88d","title":"Stage 4 skeleton: First-person humanoid in jungle","description":"Prove out Stage 4 technical bones - dev panel accessible only, no gameplay mechanics yet.\n\n**What this includes:**\n1. Simple humanoid model (grab from Three.js examples or GLTFLoader library model - don't roll our own)\n2. First-person camera (PerspectiveCamera) when player is Stage 4\n3. Dev panel dropdown/button to force player to Stage 4\n4. Player exists in jungle world (Stage 3+ world, soup unrendered)\n5. Basic first-person WASD movement on ground plane\n\n**What this does NOT include:**\n- Combat, weapons, energy spears\n- Signal/Experience system\n- Procedural morphology variation\n- Any Stage 4 gameplay mechanics\n- Proper evolution trigger from Stage 3\n\n**Success criteria:**\n- Can click \"Stage 4\" in dev panel\n- Camera switches to first-person inside humanoid\n- Can walk around jungle environment in first-person\n- Humanoid model visible to other players (if any)\n\n**Technical notes:**\n- May need to find a suitable CC0/MIT humanoid model (mixamo, Three.js examples, sketchfab)\n- Camera should be at \"head height\" of humanoid\n- Movement stays on XY ground plane (no flying yet)","status":"open","priority":1,"issue_type":"task","created_at":"2025-11-29T21:05:31.379894-05:00","updated_at":"2025-11-29T21:05:31.379894-05:00","source_repo":".","labels":["core-loop","skeleton","stage-4"],"dependencies":[{"issue_id":"godcell-o11r","depends_on_id":"godcell-jp7r","type":"parent-child","created_at":"2025-11-29T21:07:28.284261-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-o23","content_hash":"088cad5f65639a85b0b7cb9d1b2927967ac157d69389c20bdf553788b9bd7af6","title":"Macro-scale entropy manifestations","description":"How does entropy threaten Stage 3 players? Design doc suggests: Noise Storms (static weather obscuring vision/scrambling inputs), Decay Zones (areas that drain health over time), Dilution Rifts (gravitational tears that pull you apart). Define what entropy looks like at jungle scale.","status":"open","priority":3,"issue_type":"task","created_at":"2025-11-25T00:26:55.151136-05:00","updated_at":"2025-11-25T00:26:55.151136-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-o23","depends_on_id":"godcell-r85","type":"parent-child","created_at":"2025-11-25T00:28:10.801871-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-o3x","content_hash":"108145b5f6b533cb377e89734bac916e09b7cef21fba97faa1e46ee041cbbab7","title":"Write unit tests for all core modules","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:22:14.523036-05:00","updated_at":"2025-11-19T21:33:15.832778-05:00","closed_at":"2025-11-19T21:33:15.832778-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-o3x","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:22:14.5244-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-oe4","content_hash":"5873386e03012d71d70b0d8e7300c4606cb2b5723259d0424648bb409c32c108","title":"Create core/state modules (GameState, entities, interpolation, selectors)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:21:39.732174-05:00","updated_at":"2025-11-19T21:28:30.789333-05:00","closed_at":"2025-11-19T21:28:30.789333-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-oe4","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:21:39.733437-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-ola","content_hash":"cee3ec736815d653b2437d10814df5b9a19351691cc54d56261f0b8b485d468f","title":"Stage 2: Spawn NPC single-cells as prey population","description":"Create a population of AI-controlled single-cells for multi-cells to hunt.\n\n**NPC Single-Cells:**\n- **Count**: Start with ~20-30 NPCs in the world\n- **Behavior**: Simple wander + flee from multi-cells (use existing bot AI)\n- **Visuals**: Look like player single-cells but slightly dimmer/distinct\n- **Energy**: Have energy, can collect nutrients, can starve\n- **Respawn**: When killed/starved, respawn after delay (like current bots)\n\n**Prey AI:**\n- **Default**: Wander randomly, seek nearby nutrients\n- **Flee**: If multi-cell detected within range, flee in opposite direction\n- **Speed**: Same as player single-cells (can escape if skilled predator)\n- **No evolution**: NPCs stay Stage 1 forever (they're prey, not competitors)\n\n**Population Dynamics:**\n- Maintain constant NPC count (respawn on death)\n- NPCs compete with players for nutrients (ecosystem pressure)\n- Creates natural hunting grounds (NPC clusters around nutrients)\n\n**Plane Transcendence:**\nThis implements the \"Cellular Ocean\" concept - when you evolve to Stage 2, suddenly the world is full of prey. You've transcended to a new layer where you're the hunter.\n\n**Implementation:**\n- Extend current bot system (bots.ts) to support Stage 1 NPCs\n- Add flee behavior (opposite of seek)\n- Spawn NPCs on server start\n- NPCs visible to all clients\n- Can be engulfed by multi-cells (same as player single-cells)\n\n**Balance:**\n- NPC prey should be common enough to hunt\n- But not so abundant that players ignore nutrients\n- NPCs create movement/activity in the world (feels alive)","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-19T12:31:18.935821-05:00","updated_at":"2025-11-21T16:17:16.014306-05:00","closed_at":"2025-11-21T16:17:16.014306-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-ola","depends_on_id":"godcell-6wj","type":"blocks","created_at":"2025-11-19T12:31:53.970764-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-ovd","content_hash":"95960860e0a0e98ee98cf58104aefc4646051603df18e5f83ecd58f09a2a84e2","title":"Create render/three/scene2d modules (Scene2D, Grid, Particles, Trails, Nutrients, Obstacles, Players)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:22:26.0255-05:00","updated_at":"2025-11-19T21:39:19.044498-05:00","closed_at":"2025-11-19T21:39:19.044498-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-ovd","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:22:26.026898-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-owh","content_hash":"2ca4e7fb1fa40f94b311ab12f8ad70a50fbdc2f600d9ff7df32022664117f3a1","title":"Double swarm DPS (15 → 30 damage/sec)","description":"Current: Swarms deal 15 health/sec on contact\nTarget: 30 health/sec (2x damage)\n\nMakes entropy swarms more threatening - players will take damage faster if they don't escape quickly.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-18T17:17:38.248285-05:00","updated_at":"2025-11-18T20:13:38.420013-05:00","closed_at":"2025-11-18T20:13:38.420013-05:00","source_repo":"."}
{"id":"godcell-oz5","content_hash":"20a6a20e114d93e038754ae38801a23a5a039f13f9d3e999a1e649e623cbda99","title":"Implement nutrient collection system","description":"Create floating data packet nutrients that players can collect by touching them.\n\n- Limited spawns across the world (start with ~20-30 for testing)\n- Distinct visual from background particles (maybe hexagonal data crystals?)\n- Active pickup on collision\n- Respawn after collection (30s cooldown for testing)\n- Track player's collected nutrient count\n- Visual feedback on collection (particle effect, sound)\n\nThis is foundational - needed for progression system.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-17T16:19:05.324727-05:00","updated_at":"2025-11-17T19:05:02.822105-05:00","closed_at":"2025-11-17T19:01:26.904978-05:00","source_repo":"."}
{"id":"godcell-piv","content_hash":"8b9d0378246fb6e4701c51616a3728a4f7780979ca445e9c252cdb922b911a33","title":"Stage 2: Expanded detection radius (chemical sensing)","description":"Multi-cells can \"sense\" prey and nutrients from much farther away than single-cells can see.\n\n**Detection Radius:**\n- Multi-cells detect entities within ~3x their viewport range\n- Detects: Single-cells (prey), nutrients, obstacles, other multi-cells\n- Single-cells have no extended detection (only see what's on screen)\n\n**Visual Feedback:**\n- **Radar UI**: Small minimap or edge indicators showing detected entities\n- **Direction arrows**: Point toward nearby single-cells (prey tracking)\n- **Distance fade**: Closer entities appear brighter/more prominent\n- **Nutrient indicators**: Show high-value nutrients in detection range\n\n**Biological Inspiration:**\nReal predatory cells use chemical gradients to \"smell\" prey from a distance. This is chemical sensing, not vision.\n\n**Gameplay Impact:**\n- Multi-cells can **hunt strategically** - see prey before prey sees them\n- Creates **information asymmetry** - predator knows, prey doesn't\n- Single-cells must stay alert - you don't know when a hunter is tracking you\n\n**Implementation:**\n- Server sends detected entities to multi-cell clients\n- Client renders radar/minimap UI (only for Stage 2+)\n- Edge-of-screen indicators for off-screen entities\n- Filter detection by entity type (configurable ranges)","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-19T12:31:06.998072-05:00","updated_at":"2025-11-19T13:55:33.895154-05:00","closed_at":"2025-11-19T13:55:33.895154-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-piv","depends_on_id":"godcell-bve","type":"blocks","created_at":"2025-11-19T12:31:42.556756-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-pk1","content_hash":"9a501a4d9bddcdb7f09354896b9fac9c6f598bf0ea3dca878e1b3cfa7a3aad38","title":"Dev panel for live server configuration and debugging","description":"Build a lightweight web-based dev panel for rapid iteration on game parameters without server restarts.\n\n## The Problem\nCurrently tuning game values requires:\n1. Edit `GAME_CONFIG` in shared/index.ts\n2. Restart server\n3. Test in-game\n4. Repeat\n\nThis is slow and breaks flow during creative iteration.\n\n## The Solution\nWeb-based dev panel with live parameter tweaking and visual debugging tools.\n\n## Core Features\n\n### Phase 1: Live Config Tweaking (MVP)\n- Web UI overlay on game client (toggleable with `?dev` URL param)\n- Organized sliders/inputs for GAME_CONFIG values\n- Categories: Movement, Evolution, AI, Spawning, Combat\n- Changes sent to server via Socket.io, applied immediately\n- No restart needed - values update in running game\n- Export button to dump current config (copy to clipboard)\n\n### Phase 2: Visual Debugging\n- Click entities to inspect state (health, energy, AI state, velocity)\n- Toggle visualization overlays:\n  - Collision boxes (hitbox radius)\n  - Detection ranges (chemical sensing, swarm detection)\n  - Gravity wells (influence zones, event horizons, cores)\n  - AI pathfinding (where bots are seeking/fleeing)\n  - Velocity vectors (movement direction/speed)\n- Pause/resume game loop\n- Step through ticks one at a time\n\n### Phase 3: Entity Manipulation\n- Click-to-spawn entities (nutrients, obstacles, swarms)\n- Drag to reposition entities\n- Delete entities by clicking\n- Quick test scenarios (spawn predator near prey, etc.)\n- Godmode toggle (invincibility, infinite energy)\n\n### Phase 4: Configuration Management\n- Save/load preset configurations\n- Named presets: \"Stage 1 Testing\", \"Multi-cell Predation\", \"Performance Test\"\n- Store in localStorage\n- Export/import as JSON files\n- Reset to defaults button\n\n## Technical Implementation\n\n### Server Side\n```\nserver/src/dev.ts - Dev mode utilities\n├─ Socket.io event: 'dev:updateConfig'\n├─ Validates changes before applying\n├─ Broadcasts config updates to all clients\n└─ Only active when NODE_ENV=development\n```\n\n### Client Side\n```\nclient/src/dev/DevPanel.ts - Main dev panel UI\n├─ Uses tweakpane.js or lil-gui (lightweight)\n├─ Fetches GAME_CONFIG on load\n├─ Sends updates via Socket.io\n├─ Organized folder structure by category\n└─ Toggleable with ?dev URL param\n\nclient/src/dev/DebugVisualizer.ts - Visual overlays\n├─ Renders collision boxes, ranges, vectors\n├─ Entity inspector on click\n└─ Integrates with ThreeRenderer\n```\n\n### Shared\n```\nUpdate GAME_CONFIG to be mutable at runtime\nAdd dev message types to shared/index.ts\n```\n\n## Benefits\n- 10x faster iteration on game tuning\n- Visual feedback while tweaking values\n- No context-switching (dev panel in same window as game)\n- Easier to find \"feel\" of mechanics\n- Debugging AI behaviors becomes visual\n- Can test edge cases quickly (spawn 50 swarms, etc.)\n\n## Architecture Considerations\n- Dev panel only loads in development mode\n- Zero impact on production build\n- Config changes are ephemeral (not saved to file automatically)\n- Must manually export and update GAME_CONFIG when you find good values\n- Security: Dev endpoints only respond in NODE_ENV=development\n\n## Future Enhancements (Beyond Epic)\n- Timeline/playback (record game session, scrub through)\n- Performance profiling (entity counts, frame times)\n- Network traffic visualization\n- AI behavior trees visualization\n- Level/scene editor (if we add pre-designed content later)\n\n## Implementation Order\n1. Phase 1 (Live Config) - Core value prop, 2-3 hours\n2. Phase 2 (Visual Debug) - Massive debugging help, 1-2 days\n3. Phase 4 (Presets) - Quality of life, ~4 hours\n4. Phase 3 (Entity Manipulation) - Nice to have, ~1 day\n\nStart with Phase 1, evaluate if we need the rest.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-11-20T18:15:54.006661-05:00","updated_at":"2025-11-25T00:10:58.138865-05:00","closed_at":"2025-11-25T00:10:58.138865-05:00","source_repo":"."}
{"id":"godcell-pph","content_hash":"0ee1eae57c41778373cbe2a88b6810758eb7431df9d17f47ee26061642d90f1f","title":"Fix stuttering white circle on player sprite during movement","description":"The white circle outline around the player's sprite (visual indicator for \"this is you\") stutters subtly during movement. It's a small issue but creates an unpleasant visual experience.\n\n**Symptoms:**\n- White circle doesn't move perfectly smoothly with player\n- Subtle judder/stutter during motion\n- More noticeable when moving at angles\n\n**Possible Causes:**\n- Circle not attached to sprite properly\n- Circle updated in different loop than sprite position\n- Camera lerp causing desync between sprite and circle\n- Z-index or rendering order issue\n\n**Investigation:**\n- Check how white circle is created/attached in GameScene.ts\n- Check if it's a Phaser Graphics object vs sprite\n- Verify it's parented to player sprite (not independently positioned)\n- Check update loop timing\n\n**Fix:**\nLikely need to ensure circle is a child of the sprite or updated in the same frame.","notes":"Investigation update: Not related to white circle specifically. Issue appears to be with camera, rendering, or general sprite movement smoothness.","status":"closed","priority":3,"issue_type":"bug","created_at":"2025-11-18T10:45:01.588801-05:00","updated_at":"2025-11-19T18:16:22.808766-05:00","closed_at":"2025-11-19T18:16:22.808766-05:00","source_repo":"."}
{"id":"godcell-q7c","content_hash":"bacc42b002c74753e1f114ddec58c876e1b8388bbbaa3f9cb48b2e45f54b7316","title":"Redesign cell sprites as 3D spheres with glowing nuclei","description":"Replace flat 2D circle/star sprites with 3D spherical cells that have visible glowing nuclei.\n\n## Current State\n- **Stage 1**: Flat circle sprite (24px radius)\n- **Stage 2+**: Flat star cluster pattern (6 overlapping circles, 96px radius)\n- Single color with trail effect\n- No depth or volume\n\n## Desired Visual\n**3D Sphere with Layered Structure:**\n- **Outer membrane**: Semi-transparent sphere (cell wall)\n  - Slight iridescence or fresnel effect (edge glow)\n  - Stage-based size (Stage 1: small, Stage 2+: larger)\n  - Color: Player's unique color\n  - Material: Translucent, slightly glossy\n\n- **Inner nucleus**: Smaller glowing sphere at center\n  - Bright, pulsing glow\n  - Visible through membrane\n  - Energy/health state affects brightness/intensity\n  - Emissive material (contributes to bloom)\n  \n- **Particles** (optional): \n  - Small particles orbiting inside the membrane\n  - Adds \"life\" and movement\n  - Could represent metabolism/energy\n\n## Technical Implementation\n\n**Geometry:**\n```typescript\n// Outer membrane\nconst membraneGeometry = new THREE.SphereGeometry(radius, 32, 32);\nconst membraneMaterial = new THREE.MeshPhysicalMaterial({\n  color: playerColor,\n  transparent: true,\n  opacity: 0.6,\n  roughness: 0.2,\n  metalness: 0.1,\n  clearcoat: 0.5,\n});\n\n// Inner nucleus\nconst nucleusGeometry = new THREE.SphereGeometry(radius * 0.3, 16, 16);\nconst nucleusMaterial = new THREE.MeshStandardMaterial({\n  color: playerColor,\n  emissive: playerColor,\n  emissiveIntensity: 2.0, // Bright!\n});\n```\n\n**Hierarchy:**\n```\nPlayerMesh (Group)\n├─ Membrane (Outer sphere)\n├─ Nucleus (Inner glowing sphere)\n└─ Trail (existing particle trail - keep this)\n```\n\n**Energy/Health Visualization (Diegetic UI):**\n- **High energy**: Nucleus glows bright, membrane vibrant\n- **Medium energy**: Nucleus dims slightly, membrane color desaturates\n- **Low energy** (\u003c20%): Nucleus flickers, membrane becomes pale/translucent\n- **Critical** (\u003c10%): Nucleus pulses urgently, membrane nearly transparent\n\n**Stage Variations:**\n- **Stage 1**: Single sphere, simple nucleus\n- **Stage 2+**: Could have multiple smaller nuclei? Or larger, more complex structure?\n- Size scales with stage (current system)\n\n## Camera Considerations\n- If using orthographic camera, 3D still works (depth through lighting/shading)\n- If switching to perspective, cells maintain readable size at distance\n- Camera can stay locked to XY plane (no rotation on view)\n\n## Performance\n- Use instanced rendering for multiple cells (bots, players)\n- LOD system if needed (simpler geometry at distance)\n- Reuse geometries across entities\n- Monitor draw calls and poly count\n\n## Integration Points\n- Update `ThreeRenderer.createPlayerMesh()` in `client/src/render/three/ThreeRenderer.ts`\n- Update `updatePlayerVisuals()` to set emissive intensity based on energy\n- Keep existing trail system (works well)\n- Remove or fade out current flat sprites\n\n## Testing\n- Spawn 15 bots + player, check FPS\n- Verify cells are readable at Stage 1 size\n- Confirm nucleus glow is visible through membrane\n- Test energy state transitions (full → low → critical)","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-21T11:09:58.358062-05:00","updated_at":"2025-11-21T12:38:51.875485-05:00","closed_at":"2025-11-21T12:38:51.875485-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-q7c","depends_on_id":"godcell-91l","type":"parent-child","created_at":"2025-11-21T11:09:58.360374-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-qwn","content_hash":"24e298edc035352572e5f60591ae3331f2763479e0cf37221457abda0238ae9c","title":"Implement evolution progression system","description":"Create the evolution stage system that tracks player progress.\n\nEvolution stages:\n1. Single-Cell (starting) - 20px radius\n2. Multi-Cell (10 nutrients) - 30px radius, faster\n3. Cyber-Organism (25 nutrients) - 40px radius, projectile weapon\n4. Humanoid (50 nutrients) - 50px radius, advanced abilities\n5. Godcell (100 nutrients) - endgame form\n\nMechanics:\n- Track current stage and evolution points (EP)\n- Nutrient collection grants 1 EP\n- Automatic evolution when threshold reached\n- Visual transformation on evolution\n- Update player size, speed, abilities based on stage\n- Broadcast evolution events to other players\n- UI showing current stage and progress to next\n\nDepends on nutrient system.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-17T16:19:16.823477-05:00","updated_at":"2025-11-17T19:05:02.820721-05:00","closed_at":"2025-11-17T19:01:49.460668-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-qwn","depends_on_id":"godcell-oz5","type":"blocks","created_at":"2025-11-17T16:20:13.652155-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-qwt","content_hash":"77dc4251f8bb8495b7cfea530459c739eef423a40ac2d69d6a58eb86ae770503","title":"Full ECS Migration: Server + Client","description":"Complete ECS architecture across entire codebase. Move ECS to shared/, eliminate players Map on server, add ECS world to client, component-based network messages.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-28T23:08:10.296925-05:00","updated_at":"2025-11-29T20:55:51.980284-05:00","closed_at":"2025-11-29T20:55:51.980284-05:00","source_repo":"."}
{"id":"godcell-qzwf","content_hash":"a651e2782787bd9db22dd9aeafb08e96e862b257b047f8b4d21144e429a15dd2","title":"Eliminate SystemContext - systems receive only World","description":"Goal: Make World the sole source of truth for systems.\n\nCurrently SystemContext has { world, io, deltaTime }. To eliminate it:\n1. Add deltaTime as a World resource (singleton data accessible via world.getResource())\n2. Inject io directly into NetworkBroadcastSystem at construction\n3. Change System interface to just: update(world: World): void\n\nThis aligns with pure ECS architecture where World is the single context.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-29T19:29:39.851333-05:00","updated_at":"2025-11-29T20:56:11.172372-05:00","closed_at":"2025-11-29T20:56:11.172372-05:00","source_repo":".","labels":["architecture","ecs"]}
{"id":"godcell-r5e","content_hash":"e4cc7f36815adace0ed5c9f2590176e36cbf13cdeac2939c4f13fbe1b03a6128","title":"Stage 2: Expanded viewport for multi-cells","description":"Multi-cells should have a larger camera viewport to see more of the world, giving them a strategic advantage as predators.\n\n**Current State:**\n- All players have the same viewport size (1200×800)\n- Single-cells and multi-cells see the same amount of the world\n\n**Desired:**\n- Multi-cells have a **zoomed out camera** to see more territory\n- Reflects their expanded sensory capabilities\n- Helps with hunting (can spot prey from farther away)\n- Gives strategic awareness of surroundings\n\n**Implementation:**\n- Stage-specific camera zoom levels\n- Stage 1 (single-cell): 1.0x zoom (current viewport)\n- Stage 2 (multi-cell): 1.5x zoom (see 50% more area)\n- Stage 3+ (cyber-organism and beyond): Could zoom out even more?\n\n**Camera Updates:**\n- Adjust camera zoom on evolution (smooth transition)\n- Adjust camera zoom on respawn (reset to Stage 1 zoom)\n- Client-side camera management in GameScene.ts\n\n**Benefits:**\n- Multi-cells feel more powerful and aware\n- Predators can survey hunting grounds\n- Complements chemical sensing (arrows + visual sight)\n- Natural progression: evolve → see more → understand more","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-11-19T13:40:24.980702-05:00","updated_at":"2025-11-19T13:55:52.844902-05:00","closed_at":"2025-11-19T13:55:52.844902-05:00","source_repo":"."}
{"id":"godcell-r85","content_hash":"73e21e0182e193cc9e1c0b9577d49c61f40ef81e520df74a198da7fe9f0d312e","title":"Stage 3: Cyber-Organism \u0026 Digital Jungle","description":"The paradigm shift from microscopic soup to macro-scale digital jungle. When players evolve to Stage 3, they experience scale transcendence - breaking the surface of the primordial soup and emerging as 6-legged cyber-organisms into a vast new world. Introduces combat, new environment, macro-scale resources, and territorial PvP.","status":"open","priority":1,"issue_type":"epic","created_at":"2025-11-25T00:25:04.016139-05:00","updated_at":"2025-11-25T00:25:04.016139-05:00","source_repo":"."}
{"id":"godcell-s68","content_hash":"ce5fa09d4adb5b65b475625b670d75bca64572923a221fbbb30df8ca4523d157","title":"Add server logging to file for debugging and monitoring","description":"Server currently only logs to console, which is lost when the process restarts. Add file-based logging for better debugging and monitoring.\n\n**Requirements:**\n- Log server events to a file (e.g., `logs/server.log`)\n- Include timestamps on all log entries\n- Log important events:\n  - Server start/stop\n  - Player connections/disconnections\n  - Deaths (starvation, obstacle crushing, etc.)\n  - Evolution events\n  - Errors and warnings\n- Rotate logs (daily or by size) to prevent unbounded growth\n- Keep console logging for development visibility\n\n**Implementation Options:**\n1. **Simple approach**: Use Node.js `fs.appendFile()` with custom wrapper\n2. **Library approach**: Use `winston` or `pino` for structured logging with rotation\n3. **Hybrid**: Keep console.log for dev, add file logger for specific events\n\n**Benefits:**\n- Debug issues after they happen (read logs retroactively)\n- Monitor server health and player behavior\n- Track down edge cases and crashes\n- Essential for production deployment\n\n**Configuration:**\n- Log level control (debug, info, warn, error)\n- Log directory configurable via env var\n- Option to disable file logging in development","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-18T11:51:16.062634-05:00","updated_at":"2025-11-18T13:32:04.529382-05:00","closed_at":"2025-11-18T13:32:04.529382-05:00","source_repo":"."}
{"id":"godcell-s9y","content_hash":"11a584601c6a3bcf9e38ccd23357eb7c5b7d303135ec9923fe2f3856db5d2a70","title":"New entity types: slow-field and speed-field obstacles","description":"Add two new obstacle/entity types to fill map spaces and create tactical variety:\n\n**Slow-Field**: Smaller obstacle that slows player movement when inside its radius (like swarm slow effect but stationary). Visual: blue pulsing zone.\n\n**Speed-Field**: Smaller obstacle that boosts player speed when inside its radius. High-risk high-reward - go fast but harder to control. Visual: yellow/gold pulsing zone.\n\nBoth should:\n- Be smaller than gravity distortions (complement existing obstacles)\n- Use Bridson's distribution with their own separation rules\n- Have clear visual indicators\n- Add tactical depth to navigation and risk/reward decisions\n\nPossibly tune quantities to fill map nicely without overwhelming.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-22T00:05:08.511892-05:00","updated_at":"2025-11-22T00:05:08.511892-05:00","source_repo":"."}
{"id":"godcell-sgm","content_hash":"128cd0b3e4dea49468af602d66859d395282cea1f943fdeabd9c28b63911a616","title":"Create death UI overlay with stats and respawn button","description":"Design and implement the UI overlay that appears when a player dies.\n\n**UI Components:**\n- Full-screen overlay (semi-transparent dark background?)\n- Death message/title (\"You have diluted into the digital ocean\" or similar)\n- Statistics display:\n  - Time survived\n  - Nutrients collected\n  - Evolution stage reached\n  - Cause of death (starvation, entropy, combat, etc.)\n- Respawn button (primary action)\n- Maybe: death quote/flavor text that changes each time\n\n**Visual Design:**\n- Should fit the digital/glitch aesthetic of the game\n- Clear, readable text\n- Prominent respawn button\n- Optional: subtle particle effects or animation\n\n**Interaction:**\n- Show automatically when player dies\n- Respawn button sends respawn request to server\n- UI dismisses on respawn\n- Maybe: ESC key also triggers respawn? Or separate close?\n\n**Technical:**\n- Phaser UI overlay scene or DOM elements?\n- Receive death event from server with stats\n- Hook into respawn flow\n- Clean camera tracking state on respawn\n\n**Integration:**\n- Part of the overall death/respawn flow (godcell-hyx)\n- Should work with dilution death animation when that's implemented","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-18T08:21:54.044132-05:00","updated_at":"2025-11-18T09:09:48.191587-05:00","closed_at":"2025-11-18T09:09:48.191587-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-sgm","depends_on_id":"godcell-hyx","type":"discovered-from","created_at":"2025-11-18T08:21:54.045665-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-shh","content_hash":"fb77689c19c0e93e4f195e4be679964f13249d8193aa6554c16de1c7778d5d42","title":"Complete ECS migration - eliminate legacy state","description":"Epic tracking all work needed to fully migrate to ECS as the sole source of truth.\n\nCurrently we have dual-state: legacy Maps (players, nutrients, activeDrains, etc.) alongside ECS components. Systems iterate legacy Maps and use ECS for reads/writes.\n\nGoal: Systems iterate ECS directly, no legacy Map wrappers, all game state lives in components.","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-11-29T10:46:39.40142-05:00","updated_at":"2025-11-29T20:55:58.292633-05:00","closed_at":"2025-11-29T20:55:58.292633-05:00","source_repo":"."}
{"id":"godcell-smj","content_hash":"2941aef623f090d9700801141def233285dee8f4debd933958b699fce7a5f1f0","title":"Install Three.js dependencies (three, @types/three, three-stdlib, postprocessing)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:22:20.25862-05:00","updated_at":"2025-11-19T21:33:49.903937-05:00","closed_at":"2025-11-19T21:33:49.903937-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-smj","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:22:20.260079-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-sr6","content_hash":"8d8a239e8a74cb7b8ede018c9fe4a020d71085b9041131d82cc4937d0ec5f068","title":"Create render/postprocessing (composer, passes for bloom/glow)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:23:00.676114-05:00","updated_at":"2025-11-21T09:20:38.616071-05:00","closed_at":"2025-11-21T09:20:38.616071-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-sr6","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:23:00.678587-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-st9","content_hash":"afa4e3285c6d2c4c11efcf08a2fca9b3158d5eaf937f9a402b984892a733f095","title":"Add spawn animation for Stage 1 cells","description":"Add a satisfying spawn/respawn animation when cells first appear or come back after death.\n\n**Current State:**\n- Cells pop into existence instantly\n- No visual transition or fanfare\n- Feels abrupt, especially on respawn\n\n**Desired Animation:**\n- Cells materialize/fade in when spawning\n- Could be: scale up from 0, fade in opacity, particle burst, or combination\n- Duration: 0.5-1 second\n- Should feel organic and match the digital primordial soup aesthetic\n\n**Possible Approaches:**\n\n**Option 1: Scale + Fade**\n- Cell starts at 0.1x scale, 0 opacity\n- Smoothly scales up to full size while fading in\n- Simple, effective\n\n**Option 2: Particle Assembly**\n- Particles converge to spawn point\n- Coalesce into cell form\n- More dramatic, matches digital theme\n\n**Option 3: Materialization**\n- Glitchy/digital fade-in effect\n- Scanlines or pixelation resolving into cell\n- Fits cyber aesthetic\n\n**Option 4: Membrane Formation**\n- Nucleus appears first (bright)\n- Membrane and cytoplasm form around it\n- Organic growth feel\n\n**Implementation:**\n- Add spawn animation state to cell renderer\n- Trigger on player joined/respawned events\n- Interpolate over animation duration\n- Make cell invulnerable during spawn animation? (or not - risk/reward)\n\n**Files:**\n- `client/src/render/three/ThreeRenderer.ts` - animation logic\n- Listen for `playerJoined` and `playerRespawned` messages","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-22T00:36:26.346024-05:00","updated_at":"2025-11-25T08:25:42.057176-05:00","closed_at":"2025-11-25T08:25:42.057176-05:00","source_repo":"."}
{"id":"godcell-t2t","content_hash":"56f811780c63ec99c2620c0380927062773607a93c00f8fab78bbda6e1179902","title":"Investigate client interpolation issues after ECS migration","description":"User noticed interpolation seems \"a little off\" in-game after the ECS systems refactor session.\n\nPossible causes:\n- Timing changes in broadcast systems (NetworkBroadcastSystem now uses instance tick counters vs module-level)\n- State sync differences with dual-write pattern\n- Energy/position update frequency changes\n\nDiscovered during ECS migration work.","status":"open","priority":2,"issue_type":"bug","created_at":"2025-11-29T11:18:18.830784-05:00","updated_at":"2025-11-29T11:18:18.830784-05:00","source_repo":"."}
{"id":"godcell-t4u","content_hash":"8e2bd2383ed8ea36a281fd9b3c17e09b729212bb0ce2edf4fe0ea8336769fc8c","title":"Migrate to renderer-agnostic architecture with Three.js","description":"Full migration from Phaser to Three.js with clean core/renderer separation. Phases: 1) Carve out renderer-agnostic core, 2) Add Three.js renderer, 3) Deprecate Phaser. Includes interpolation, fixed-step loop, unit tests.","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-11-19T21:20:55.793743-05:00","updated_at":"2025-11-19T21:39:53.504281-05:00","closed_at":"2025-11-19T21:39:53.504281-05:00","source_repo":"."}
{"id":"godcell-tyu","content_hash":"74cdc48d535c308f31536cdd396bed71299b3bb10d08598fca2ccf3796ea4644","title":"Update shared types for energy-only system","description":"Update type definitions in shared/index.ts:\n- Remove `health` and `maxHealth` from Player interface\n- Rename `EntropySwarm.currentHealth` to `energy`\n- Remove `health` field from EnergyUpdateMessage\n- Update GAME_CONFIG constants (remove health multipliers, add energy pools, add damage resistance values, add EMP single-cell drain)\n\nSee history/ENERGY_ONLY_SPEC.md sections: \"Type Changes\" and \"Configuration Changes\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-22T23:22:26.69308-05:00","updated_at":"2025-11-24T18:59:53.567579-05:00","closed_at":"2025-11-24T18:59:53.567579-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-tyu","depends_on_id":"godcell-20o","type":"blocks","created_at":"2025-11-22T23:22:26.695212-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-u6k","content_hash":"5f415cd8030e00401f2a608170b99bf6f79ea61804ec230be5faab32d50d2d08","title":"Update server metabolism and death checks","description":"Refactor server/src/index.ts metabolism/death logic:\n- Replace all `player.health` checks with `player.energy`\n- Update `updateMetabolism`: remove starvation damage phase (just mark source when energy=0)\n- Update `checkPlayerDeaths`: check `energy \u003c= 0` instead of health\n- Update `applyGravityForces`: singularity sets energy=0\n- Update obstacle damage to use `applyDamage` (with resistance)\n- Update `createPlayer`: initialize with new energy pools (200 for Stage1)\n- Update `respawnPlayer`: reset to new energy values\n- Update `handleEvolutionComplete`: set energy pools based on stage, create helper functions\n\nSee history/ENERGY_ONLY_SPEC.md section: \"Server Changes\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-22T23:22:38.180349-05:00","updated_at":"2025-11-24T19:00:06.682945-05:00","closed_at":"2025-11-24T19:00:06.682945-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-u6k","depends_on_id":"godcell-20o","type":"blocks","created_at":"2025-11-22T23:22:38.181892-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-ugd","content_hash":"1e2f419a44e96ea51209c87ac370659c970b33563f40445fabbcbe5cca127695","title":"Restore text overlays on health/energy bars","description":"Health and energy bars need text showing current/max values overlaid on top (e.g., \"69/100\").","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-11-21T09:29:15.684906-05:00","updated_at":"2025-11-21T09:42:50.800632-05:00","closed_at":"2025-11-21T09:42:50.800632-05:00","source_repo":"."}
{"id":"godcell-umx","content_hash":"6c7b430979d75e3ed997ae406cd316b5c00fb12de9a3513fa49446b24faf155e","title":"Build server telemetry dashboard page","description":"Create a web page/endpoint that displays real-time game telemetry stats including:\n- Bot death rate (deaths/min by cause: starvation, singularity, swarm, predation, beam)\n- Evolution rate (evolutions/min by transition type: single-cell→multi-cell, etc.)\n- Average survival time at each stage before evolving\n- Current stage distribution (how many bots at each stage)\n- Aggregate stats (total players, alive/dead, average energy)\n\nThe data is already being tracked server-side in logger.ts via:\n- `getDeathRateStats()` - deaths per minute with breakdown by cause and stage\n- `getEvolutionRateStats()` - evolutions per minute with breakdown by transition type and avg survival time\n\nOptions to consider:\n1. Simple HTML page served by express with periodic AJAX refresh\n2. WebSocket-based real-time dashboard\n3. JSON API endpoint that can be consumed by external tools\n\nAlso explore reading the JSON log file (server/logs/server.log) for historical data visualization.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-11-25T15:18:07.803955-05:00","updated_at":"2025-11-25T15:18:07.803955-05:00","source_repo":".","labels":["devtools","telemetry","ui"]}
{"id":"godcell-utr","content_hash":"49e43ad45fa3dee6c931e50e296bcacbdcf11b8ea6c747648aa6a5453c420159","title":"Add basic chat system","description":"Players can send text messages that everyone sees.\nMinimal UI - text box + message display.","notes":"Deprioritized - chat won't be useful until later game stages when players have more metabolic efficiency and breathing room. Stage 1 is too intense for chatting.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-11-17T08:57:59.213075-05:00","updated_at":"2025-11-18T13:13:27.661602-05:00","source_repo":"."}
{"id":"godcell-uyd","content_hash":"1b43dbdac9d899983b9225e115a5d4c721c2f6aefcfd513f6b49cd930c2f784c","title":"Create render/three/debug (DebugPanel, DebugOverlay)","description":"","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-19T21:23:06.430499-05:00","updated_at":"2025-11-21T09:21:09.398276-05:00","closed_at":"2025-11-21T09:21:09.398276-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-uyd","depends_on_id":"godcell-t4u","type":"parent-child","created_at":"2025-11-19T21:23:06.431888-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-uzs","content_hash":"75992f20e9bd910edbd5f001aa34d1ef4e8613baabefa4ed1ed1e245f5ce95b4","title":"Add momentum/inertia to player movement","description":"Players should have momentum when moving - if they release input keys, they should continue floating/coasting for a bit before coming to a stop, rather than stopping instantly.\n\n**Current Behavior:**\n- Release movement keys = instant stop\n- Movement feels too stiff and responsive\n- No sense of floating in the digital ocean\n\n**Desired Behavior:**\n- Release movement keys = gradual deceleration\n- Player coasts/floats for a moment before stopping\n- Creates more fluid, space-like movement\n- Adds strategic depth (harder to stop on a dime)\n\n**Implementation:**\n- Add velocity decay/friction system instead of instant zeroing\n- When no input, gradually reduce velocity over time\n- Configurable deceleration rate (start conservative, tune up)\n- Server-authoritative (apply to velocity updates)\n\n**Tuning Parameters:**\n- Friction coefficient (how quickly velocity decays)\n- Maybe cap max velocity separately from acceleration\n- Should feel floaty but still controllable\n\n**Testing:**\n- Test with bots (ensure they still function)\n- Check interaction with gravity wells\n- Verify network sync doesn't cause drift","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-18T19:06:48.060363-05:00","updated_at":"2025-11-19T10:16:47.126166-05:00","closed_at":"2025-11-19T10:16:47.126166-05:00","source_repo":"."}
{"id":"godcell-v48","content_hash":"7539f36ada92ae6174959a10e2eaf20cc5239baf5f9ad6736f12c7e687933109","title":"Multi-cell morphology variation system","description":"Add visual and gameplay variation to multi-cell stage through different morphologies. Players can evolve into different multi-cell forms (colonial vs radial vs others), creating species diversity and emergent gameplay.\n\nCurrently have two fully implemented multi-cell styles:\n- Colonial (Volvox-style): 7 cells in hexagonal arrangement with energy tethers\n- Radial (Hydra-style): Central core with 5 waving appendages and energy tubes\n\nThis epic covers implementing the variation system and potentially expanding to other stages.","design":"## Vision\n\nCreate visual diversity and emergent gameplay through morphological variation at evolution stages. Players evolve into different \"species\" with distinct appearances and potentially different stats/behaviors.\n\n## Implementation Phases\n\n### Phase 1: Random Multi-Cell Morphology (Simplest)\n- Randomly assign colonial or radial style when player evolves to multi-cell\n- No stat differences, pure visual variety\n- Instant species diversity in the ocean\n- ~2 hours implementation\n\n### Phase 2: Named Species/Genome System\n- Each player gets persistent \"species ID\" or \"genome seed\"\n- Determines morphology across deaths\n- Display in UI: \"Species #A3F2\" or similar\n- Players can recognize their \"lineage\"\n- ~3-4 hours implementation\n\n### Phase 3: Additional Morphologies\nDesign and implement more multi-cell variants:\n- **Clustered**: Irregular blob of 10+ small cells (tank build)\n- **Linear**: 4-5 cells in a line/snake (unique movement)\n- **Asymmetric**: Specialized cells in different positions\n- Each new style: ~4-6 hours (design + implementation + animation)\n\n### Phase 4: Stat Differentiation\nDifferent morphologies get slight stat variations:\n- Colonial: balanced, +10% energy efficiency\n- Radial: +15% speed, -5% health\n- Clustered: +25% health, -10% speed\n- Linear: unique turning mechanics\n- Requires careful balance testing\n- ~6-8 hours (tuning + testing)\n\n### Phase 5: Influenced Evolution\nGameplay influences which morphology you get:\n- Nutrient-focused → colonial (gatherer)\n- Combat-focused → radial (predator)\n- Survival-focused → clustered (tank)\n- Tracks player behavior before evolution\n- ~8-10 hours (tracking + UI + balance)\n\n### Phase 6: Evolution Branches\nStage 2 splits into multiple paths that affect later stages:\n- Different multi-cell morphs lead to different cyber-organism forms\n- Creates branching evolution tree\n- Significantly more complex\n- ~20+ hours (design + implementation + balance)\n\n## Technical Notes\n\n- Morphology styles stored in player entity (stage + morphType field)\n- MultiCellRenderer already supports style parameter\n- URL param ?multicell=colonial|radial for testing\n- Standalone HTML demos exist for both styles\n\n## Open Questions\n\n- Should morphology persist across deaths (genome) or randomize each run?\n- Do we want stat differences or pure visual variety first?\n- How many morphologies is \"enough\"? (2, 4, 6, 10?)\n- Should this extend to other stages (cyber-organism, humanoid)?\n- Do we want player choice or always random/influenced?","acceptance_criteria":"- [ ] Can evolve into at least 2 visually distinct multi-cell morphologies\n- [ ] Morphology selection happens at evolution (either random or based on criteria)\n- [ ] Both morphologies render correctly with animations\n- [ ] Players can distinguish other players' morphologies at a glance\n- [ ] System is extensible (easy to add more morphologies later)\n- [ ] Performance is acceptable with mixed morphologies in scene\n- [ ] (Optional) Stats are balanced if stat differentiation is implemented\n- [ ] (Optional) Evolution influence system feels fair and understandable","status":"open","priority":2,"issue_type":"epic","created_at":"2025-11-21T17:00:29.597454-05:00","updated_at":"2025-11-21T17:00:29.597454-05:00","source_repo":"."}
{"id":"godcell-vjy","content_hash":"d876b8dc761df905970dcb24c63dea17ff7dbe04d697cbcca6312442b1e075b2","title":"ECS: Migrate nutrients Map to full ECS","description":"Migrate nutrients Map to use ECS as source of truth.\n\nNutrientComponent already exists. Need to:\n1. Create nutrients as ECS entities with NutrientComponent\n2. Replace Map\u003cstring, Nutrient\u003e queries with ECS queries\n3. Update collision detection to use ECS\n4. Update respawn logic\n\nThis is a larger refactor - nutrients are used widely.\n\nFiles to change:\n- server/src/index.ts - nutrient spawning, collision, respawn\n- server/src/bots.ts - bot nutrient targeting\n- server/src/ecs/factories.ts - createNutrient already exists, verify usage\n- server/src/ecs/systems/GameContext.ts - remove nutrients Map","status":"closed","priority":1,"issue_type":"task","assignee":"claude","created_at":"2025-11-29T16:27:26.673942-05:00","updated_at":"2025-11-29T16:41:14.33528-05:00","closed_at":"2025-11-29T16:41:14.33528-05:00","source_repo":".","labels":["ecs-migration","large","phase-5"]}
{"id":"godcell-vls","content_hash":"586d13d59a25f916bc780369e3c185288f7e713325124d40dc91701a5a89a67e","title":"Dev tool: snapshot game board state to JSON/image","description":"Add ability to capture snapshots of the entire game board showing positions of all entities (players, bots, obstacles, swarms, nutrients). Could be JSON dump or visual representation. Useful for debugging spawn distribution and game balance.","status":"open","priority":3,"issue_type":"feature","created_at":"2025-11-21T23:57:19.272525-05:00","updated_at":"2025-11-21T23:57:19.272525-05:00","source_repo":"."}
{"id":"godcell-wxs","content_hash":"4391fe7232e76886fe480d9d4de7ac2c99666d473665c4fb213e6d3cb862d617","title":"ECS: Migrate death tracking (playerLastDamageSource, playerLastBeamShooter)","description":"Migrate playerLastDamageSource and playerLastBeamShooter Maps to ECS components.\n\nThese track what killed a player for death cause logging.\n\nOptions:\n1. Create new DamageTrackingComponent with lastDamageSource and lastBeamShooter fields\n2. Or add to existing component\n\nFiles to change:\n- server/src/index.ts - Map declarations, death handling, buildGameContext\n- server/src/ecs/systems/GameContext.ts - remove from interface\n- shared/ecs/components.ts - add/update component interface\n- server/src/ecs/factories.ts - add helpers\n\nCurrent usage pattern:\n- playerLastDamageSource.set(id, cause) when damage applied\n- playerLastDamageSource.get(id) on death for logging\n- playerLastBeamShooter tracks victim → shooter for pseudopod kills","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-29T16:27:01.693859-05:00","updated_at":"2025-11-29T16:40:27.418656-05:00","closed_at":"2025-11-29T16:40:27.418656-05:00","source_repo":".","labels":["ecs-migration","phase-5"]}
{"id":"godcell-xf13","content_hash":"9007e7a6e99077a4c6b27bbda84a07efedd3dd8d8b0d362308e920a3c27f639c","title":"Eliminate GameContext - direct imports and ECS-native systems","description":"GameContext was a bridge between legacy Map-based state and ECS. Now that all entity collections are in ECS, we can eliminate it entirely.\n\n**What remains in GameContext:**\n\nCore (keep as minimal SystemContext):\n- `world`, `io`, `deltaTime` - every system needs these\n\nStill passed through context but shouldn't be:\n- Helper functions: `distance`, `getPlayerRadius`, `getWorldBoundsForStage`, `applyDamageWithResistance`, `recordDamage`, `getEnergyDecayRate`, `getDamageResistance`, `getStageMaxEnergy`, `isSoupStage`, `isJungleStage`, `isBot`\n- `tickData` (damagedPlayerIds, slowedPlayerIds) - cross-system communication\n- `abilitySystem` - ability handling\n\nLegacy functions wrapping monolithic code:\n- `updateBots` - calls bots.ts updateBots()\n- `updateSwarms`, `updateSwarmPositions`, `processSwarmRespawns`, `checkSwarmCollisions` - calls swarms.ts\n- `respawnNutrient`, `removeSwarm` - entity lifecycle\n\n**Migration phases:**\n\nPhase A: Replace helper function references with direct imports\n- Systems import from helpers.ts and stage.ts directly\n- Remove helper functions from GameContext interface\n- Mechanical refactor, low risk\n\nPhase B: Replace tickData with ECS tags\n- Add DamagedThisTickTag and SlowedThisTickTag\n- SwarmCollisionSystem adds tags, MovementSystem reads them\n- Clear tags at end of tick or start of next\n- Remove tickData from GameContext\n\nPhase C: Refactor swarm/bot monolithic functions into ECS systems\n- Break up updateBots into proper ECS iteration in BotAISystem\n- Break up swarm functions into SwarmAISystem iterations\n- This is the biggest task - the legacy functions contain complex AI logic\n- After this, only world/io/deltaTime remain","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-11-29T18:37:12.961709-05:00","updated_at":"2025-11-29T20:56:04.859905-05:00","closed_at":"2025-11-29T20:56:04.859905-05:00","source_repo":".","labels":["ecs-migration","refactor"]}
{"id":"godcell-xr6","content_hash":"c14fc1f79636424822d604444780bfa9865e6cf0b812a41d5cf2470312fa683b","title":"Living Ecosystem: Natural Life Cycles \u0026 Population Dynamics","description":"Transform GODCELL from a resource collection game with static opposition into a living, breathing ecosystem with circular energy flows and emergent population dynamics.\n\n## The Problem\n\nCurrently the game has:\n- **One-way energy flows**: nutrients → cells → void (death = deletion)\n- **Static populations**: 15 bots, 18 swarms, 32 nutrients on fixed respawn timers\n- **No reproduction**: everything spawned by game systems, nothing births itself\n- **No feedback loops**: predator success doesn't affect prey populations\n- **No environmental variation**: static world state at all times\n\nThis feels like a game board with moving pieces, not a primordial ocean teeming with life.\n\n## The Vision\n\nCreate circular flows where **death feeds life**. Energy is conserved and transformed, not deleted. Populations rise and fall based on pressure. The world feels alive because it actually *is* alive—emergent behaviors from simple rules.\n\n## Core Mechanics\n\n### 1. Corpse Decay → Nutrient Cascade\nWhen entities die, they release nutrients proportional to accumulated energy:\n- Death creates a \"corpse\" that decays over time (5-10s)\n- Corpse releases nutrients in pulses as it decays\n- Larger/more evolved entities drop more nutrients\n- Creates scavenging behavior and rush to death sites\n- Energy is conserved in the world, not deleted\n\n### 2. Swarm Reproduction \u0026 Starvation\nReplace timer-based respawning with biological population dynamics:\n- Swarms gain \"biomass\" when they damage players\n- At biomass threshold, swarm divides into two smaller swarms\n- Without feeding, swarms slowly starve and shrink\n- Starving swarms eventually die (and drop nutrients!)\n- Creates boom/bust cycles tied to prey availability\n\n### 3. Bot Budding / Reproduction\nSuccessful bots create offspring:\n- Stage 2+ bots with excess energy can \"bud off\" a Stage 1\n- Parent loses some energy, child spawns nearby\n- Creates lineages and organic population growth\n- Population self-regulates based on nutrient availability\n- Bots feel like part of the ecosystem, not spawned obstacles\n\n### 4. Nutrient Blooms from Death Zones\nDeath-heavy areas become temporarily nutrient-rich:\n- Death sites accumulate \"decay energy\" in local area\n- High decay energy triggers nutrient bloom (faster/richer spawns)\n- Creates migration patterns toward active hunting grounds\n- Battlefields become feeding grounds\n\n### 5. Carrying Capacity \u0026 Resource Pressure\nPopulation self-regulates through resource feedback:\n- More cells = faster nutrient depletion = starvation pressure\n- Fewer cells = nutrient abundance = faster growth\n- Nutrient respawn rate could scale inversely with population\n- Creates natural oscillations without scripted timers\n\n### 6. Environmental Cycles (stretch)\nSimple cycles that create ecosystem rhythm:\n- **Nutrient tides**: Periodic density shifts (abundant ↔ scarce)\n- **Swarm migrations**: Swarms drift toward/away from areas\n- **Energy weather**: Passive decay rate fluctuates (harsh periods)\n\n## Success Criteria\n\n- [ ] Death releases energy back into the world (corpse decay)\n- [ ] Swarm population emerges from reproduction/starvation, not timers\n- [ ] Bot population grows organically from successful bots\n- [ ] Observable boom/bust cycles in population graphs\n- [ ] Players notice and adapt to ecosystem state (scavenging, migration)\n- [ ] The world feels alive even when you're just watching\n\n## Technical Considerations\n\n- All lifecycle logic remains server-authoritative\n- New entity states needed: corpse, starving, budding\n- Telemetry for population dynamics (births, deaths, population over time)\n- Tuning will require iteration—start with corpse decay as foundation","notes":"## Implementation Progress (Nov 28, 2025)\n\n### Completed\n- ✅ ECS infrastructure: CorpseDecaySystem, BuddingSystem\n- ✅ Corpse entity creation on death (except singularity deaths)\n- ✅ Pulsed nutrient release from corpses (3 pulses over decay)\n- ✅ Bot budding at Stage 2+ with progress thresholds\n- ✅ Client-side corpse rendering with decay pulse effects\n- ✅ Client-side budding visual effects\n\n### Critical Discovery: Energy Economics Are Broken\n\n**The Problem:**\nWhen we enabled corpse decay even at 25% energy ratio, the ecosystem went into hyperdrive:\n- Started with 32 nutrients → ballooned to 202+ nutrients\n- Average player energy: 1945 (should be ~500-800)\n- Everyone rapidly evolving to Stage 2-3\n- 424+ corpse pulse events in short time window\n\n**Root Cause Analysis:**\nThe energy economics compound in ways we didn't anticipate:\n\n1. **Predation already returns energy**: When Stage 2+ kills something, they absorb ~30% of victim's energy directly\n2. **Corpse decay adds MORE energy return**: 25% of maxEnergy as nutrients\n3. **Multi-cell corpses are huge**: A Stage 2 corpse drops 5-6 nutrients per pulse × 3 pulses = 15-18 nutrients\n4. **Death begets death begets nutrients**: High energy → more predation → more corpses → more nutrients → more energy\n\n**The Math Problem:**\n- Old system: Kill something → absorb 30% → 70% lost to entropy\n- New system: Kill something → absorb 30% → corpse drops 25% as nutrients → only 45% lost\n- But nutrients are PUBLIC - anyone can collect them\n- So total energy entering system from a single death could be 30% + 25% + bonus from others collecting = \u003e55%\n\n**With reproduction on top:**\n- High energy bots bud constantly\n- Offspring die → more corpses → more nutrients\n- Population explodes → more deaths → infinite nutrients\n\n### Lessons for Ecosystem Design\n\n1. **Energy must leak**: If total returns \u003e ~50%, ecosystem inflates. Need significant \"entropy tax\"\n2. **Predation absorption and corpse drops are ADDITIVE** - must budget together\n3. **Public vs private energy return matters** - corpse nutrients are public goods\n4. **Reproduction multiplies the problem** - each new entity is an energy amplifier\n5. **Multi-stage corpses need different ratios** - Stage 1 = small, Stage 3 = massive\n\n### Proposed Fix Options\n\n**Option A: Disable corpses for now**\n- Revert to deletion on death\n- Implement reproduction only (simpler energy model)\n- Add corpses back with proper economics later\n\n**Option B: Severe reduction**\n- Corpse energy ratio: 5-10% (not 25%)\n- Cap max nutrients in world (hard limit ~50-60)\n- Larger entities drop same nutrients as small ones (flat, not scaled)\n\n**Option C: Replace predation absorption**\n- Remove direct absorption on kill\n- ALL energy returns via corpse only\n- Single energy pathway easier to balance\n\n**Recommendation:** Option A or C - the current dual-pathway (absorption + corpse) is fundamentally hard to balance.","status":"in_progress","priority":2,"issue_type":"epic","created_at":"2025-11-26T18:46:34.382603-05:00","updated_at":"2025-11-28T17:46:21.905541-05:00","source_repo":".","labels":["ecosystem","emergent","gameplay"]}
{"id":"godcell-y48","content_hash":"ba54aa04300ebb50f560cf152b2583e89bb150d6c3bee11b00eec372fb1eed30","title":"Nutritional value of nutrients affected by proximity to distortion cores","description":"Nutrients near gravity distortion cores should have modified nutritional values - either degraded by the intense gravity field or enhanced by exotic physics. This creates more nuanced risk/reward gameplay where players must balance safety vs. nutrient quality.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-18T14:34:24.679096-05:00","updated_at":"2025-11-19T11:19:45.564118-05:00","closed_at":"2025-11-19T11:19:45.564118-05:00","source_repo":"."}
{"id":"godcell-y50","content_hash":"7ecda97e5afecfba3e3edff812687894f9d29de90a812cfe73df051db763e83b","title":"Replace health/energy bars with more interesting visual indicators","description":"The current health and energy bars are functional but boring. They break the immersion of the digital ocean aesthetic.\n\n**Current State:**\n- Traditional rectangular bars in top-left corner\n- Text display of exact values (69/100, etc.)\n- Static, utilitarian UI elements\n- Feels like a placeholder\n\n**Vision:**\nIntegrate health/energy feedback directly into the game world in a more organic, visually interesting way that fits the cyber-cell aesthetic.\n\n**Possible Directions:**\n1. **Cell Visual State**: Health/energy reflected in the player sprite itself\n   - Color intensity/saturation\n   - Glow brightness\n   - Particle density in trail\n   - Size pulsing\n   \n2. **Ambient Indicators**: Environmental cues\n   - Screen vignette darkening when low health\n   - Color grading shifts\n   - Particle field around player\n   - Aura/field effect\n\n3. **Organic Meters**: If we keep meter-like elements, make them fit the world\n   - Circular energy ring around player\n   - DNA helix-style indicator\n   - Orbiting data fragments\n   - Membrane thickness/integrity visual\n\n4. **Hybrid**: Combine multiple subtle cues\n   - Cell glow for energy level\n   - Screen effects for critical health\n   - No exact numbers, just visual feel\n\n**Design Goals:**\n- Maintain critical information (player needs to know when they're in danger)\n- Enhance immersion rather than breaking it\n- Fit the cyber/digital ocean aesthetic\n- Make the game world feel more alive and reactive\n- Reduce UI chrome, increase diegetic feedback\n\n**Implementation Considerations:**\n- Must be clear enough for gameplay decisions\n- Should work at a glance during intense moments\n- Accessibility: colorblind-friendly if using color cues\n- Performance: no expensive shaders if we learned anything from the nutrient glow incident\n\n**Questions to Explore:**\n- Do we need exact numbers at all, or just relative sense of fullness?\n- Can the countdown timer stay? (It's thematic and works well)\n- Should health and energy be visually distinct, or blend together?\n- What feels most \"cyber-organism in digital ocean\"?","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-19T11:16:29.441578-05:00","updated_at":"2025-11-21T16:18:04.161175-05:00","closed_at":"2025-11-21T16:18:04.161175-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-y50","depends_on_id":"godcell-91l","type":"parent-child","created_at":"2025-11-21T11:10:15.768762-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-yt3","content_hash":"511dd52cc0c891728762f56b6daba6886d19f05a1b78b30287752a0305bdd408","title":"Add velocity to Player state broadcast","description":"Server already tracks player velocities internally (playerVelocities Map) but doesn't include it in the Player interface sent to clients.\n\nBenefits of adding:\n- More accurate heading calculation (vs deriving from position deltas)\n- Better client-side interpolation/prediction\n- Speed-based visual effects (motion blur, speed lines)\n- Cleaner code\n\nCurrently working around this by computing velocity from position changes in ThreeRenderer.","status":"closed","priority":3,"issue_type":"task","created_at":"2025-11-26T15:24:56.164612-05:00","updated_at":"2025-11-29T20:55:43.365961-05:00","closed_at":"2025-11-29T20:55:43.365961-05:00","source_repo":"."}
{"id":"godcell-z6t","content_hash":"96d6b3040be2f9464034765c027e737de967ffca4558f24f6efe0602c93c41f9","title":"Implement damage resistance system (server)","description":"Add damage resistance mechanics to server/src/index.ts:\n- Create `getDamageResistance(stage)` helper function\n- Create `applyDamage(player, baseDamage)` helper function\n- Stage-based resistance: Stage1=0%, Stage2=25%, Stage3=40%, Stage4=50%, Stage5=60%\n- Applies to: swarm contact, gravity wells, EMP\n- Does NOT apply to: passive decay, singularity instant-death, predation instant-death\n\nSee history/ENERGY_ONLY_SPEC.md section: \"Damage Resistance\"","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-22T23:22:32.441645-05:00","updated_at":"2025-11-24T18:59:59.96022-05:00","closed_at":"2025-11-24T18:59:59.96022-05:00","source_repo":".","dependencies":[{"issue_id":"godcell-z6t","depends_on_id":"godcell-20o","type":"blocks","created_at":"2025-11-22T23:22:32.442946-05:00","created_by":"matthewhuff"}]}
{"id":"godcell-zh7","content_hash":"125c3dcbd246b3b7026952d84db95d78bd81c1c4f2d0de0648e12077069bc2aa","title":"Allow distortion zones to spawn near/on map edges","description":"Currently distortions may be restricted to interior regions. They should be able to spawn near or on the edges of the game map to create interesting boundary dynamics and prevent edge-camping strategies.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-11-18T14:34:30.521739-05:00","updated_at":"2025-11-19T10:16:10.15434-05:00","closed_at":"2025-11-19T10:16:10.15434-05:00","source_repo":"."}
